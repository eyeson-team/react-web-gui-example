{"version":3,"sources":["Notify.js","eyeson-logo.svg","Toolbar.js","utils.js","StartForm.js","Video.js","Preview.js","Audio.js","SettingsDialog.js","Meeting.js","App.js","index.js"],"names":["queue","createSnackbarQueue","Toolbar","title","fixed","alignStart","src","logo","height","alt","className","alignEnd","tag","target","rel","href","unelevated","getSelectedDeviceId","stream","type","tracks","length","getSettings","deviceId","error","console","mapDeviceList","device","value","label","StartForm","props","useState","ACCESS_KEY_LENGTH","location","search","substring","split","find","line","includes","getRoomToken","token","setToken","id","onSubmit","event","preventDefault","onStart","notify","body","icon","htmlFor","placeholder","onChange","trim","style","width","autoFocus","use","disabled","loading","noop","log","sleep","ms","Promise","resolve","setTimeout","Video","initVideo","video","playPromise","this","srcObject","then","race","play","catch","prevProps","ref","muted","playsInline","Component","Preview","handleChange","cameras","microphones","state","selectedMicrophone","selectedCamera","setState","map","onMicChange","onCamChange","Error","message","toggleAudio","audio","checked","enabledAudio","deviceManager","updateWithOptions","enabledVideo","toggleVideo","setAudioInput","storeConstraints","setVideoInput","onJoin","onExit","exitMeeting","DeviceManager","start","terminate","options","outlined","onClick","Audio","initAudio","SettingsDialog","open","onClose","useRef","videoElement","setCameras","setMicrophones","setSelectedMicrophone","setSelectedCamera","useEffect","debug","microphoneId","cameraId","current","removeListener","stop","updateStream","detail","action","autoPlay","currentTarget","isDefaultAction","Meeting","handleEvent","eyeson","send","screen","localStream","remoteStream","setLoading","solo","hasPresenter","hasMutedVideoPeers","sfuMode","update","sfu","name","endSession","audioEnabled","StreamHelpers","videoEnabled","toggleScreen","screenStream","showSettings","settingsDialog","closeSettings","mediaOptions","canScreenCapture","FeatureDetector","onEvent","join","offEvent","condition","component","showSelfView","span","renderMainView","content","align","App","connectionStatus","connected","connect","inPreview","destroy","primary","secondary","closed","renderContent","messages","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6e691f81.chunk.js","sourcesContent":["import { createSnackbarQueue } from '@rmwc/snackbar';\n\nexport const queue = createSnackbarQueue();\n","export default __webpack_public_path__ + \"static/media/eyeson-logo.844747c0.svg\";","import logo from './eyeson-logo.svg';\nimport { TopAppBar, TopAppBarRow, TopAppBarSection, TopAppBarTitle, TopAppBarFixedAdjust } from '@rmwc/top-app-bar';\nimport { Button } from '@rmwc/button';\n\nconst Toolbar = ({ title }) => (\n  <>\n    <TopAppBar fixed>\n      <TopAppBarRow>\n        <TopAppBarSection alignStart>\n          <img src={logo} height=\"32\" alt=\"eyeson Logo\" className=\"toolbar-logo\" />\n          <TopAppBarTitle>{title}</TopAppBarTitle>\n        </TopAppBarSection>\n        <TopAppBarSection alignEnd>\n          <Button\n            tag=\"a\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            href=\"https://twitter.com/eyeson_team\"\n            unelevated>\n            Twitter\n          </Button>\n          <Button\n            tag=\"a\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            href=\"https://github.com/eyeson-team\"\n            unelevated>\n            GitHub\n          </Button>\n        </TopAppBarSection>\n      </TopAppBarRow>\n    </TopAppBar>\n    <TopAppBarFixedAdjust />\n  </>\n);\n\nexport default Toolbar;\n","export const getRoomToken = ACCESS_KEY_LENGTH => {\n  const token = location.search.substring(1).split('&').find(line => line.length === ACCESS_KEY_LENGTH && !line.includes('='));\n  return token || '';\n};\n\nexport const getSelectedDeviceId = (stream, type) => {\n  try {\n    const tracks = stream[`get${type}Tracks`]();\n    if (tracks.length > 0) {\n      const settings = tracks[0].getSettings();\n      return settings.deviceId;\n    }\n  } catch (error) {\n    console.error(error);\n  }\n  return '';\n};\n\nexport const mapDeviceList = device => ({ value: device.deviceId, label: device.label });\n","import { useState } from 'react';\nimport { Card } from '@rmwc/card';\nimport { Typography } from '@rmwc/typography';\nimport { FormField } from '@rmwc/formfield';\nimport { TextField } from '@rmwc/textfield';\nimport { Button } from '@rmwc/button';\nimport { queue } from './Notify.js';\nimport { getRoomToken } from './utils.js';\n\nconst ACCESS_KEY_LENGTH = 24;\n\nconst StartForm = props => {\n\n  const [token, setToken] = useState(getRoomToken(ACCESS_KEY_LENGTH));\n\n  const onStart = event => {\n    event.preventDefault();\n    if (token.length !== ACCESS_KEY_LENGTH) {\n      queue.notify({ body: 'Invalid access key', icon: 'warning' });\n      return;\n    }\n    props.onStart(token);\n  };\n\n  return (\n    <Card id=\"start\" className=\"page\">\n      <form onSubmit={onStart}>\n        <FormField alignEnd>\n          <label htmlFor=\"input-token\">Meeting Access Key</label>\n          <TextField\n            id=\"input-token\"\n            value={token}\n            placeholder=\"rQIKmLQF6jDQUkJw6AFKJELY\"\n            onChange={({ target }) => setToken(target.value.trim())}\n            style={{ width: '20rem' }}\n            autoFocus\n          />\n        </FormField>\n        <Typography use=\"body1\" tag=\"p\">Get an user access key from starting a meeting via the API or use one from an active meeting.</Typography>\n        <div className=\"buttons\"><Button label=\"Start\" type=\"submit\" unelevated disabled={props.loading} /></div>\n      </form>\n    </Card>\n  );\n};\n\nexport default StartForm;\n","import { Component } from 'react';\n\nconst noop = () => console.log('unable to play video');\nconst sleep = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nclass Video extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.playPromise = Promise.resolve();\n  }\n\n  componentDidMount() {\n    const { video } = this;\n    const { stream } = this.props;\n    if (stream && video && !video.srcObject) {\n      this.playPromise = this.playPromise.then(() => {\n        video.srcObject = stream;\n        return Promise.race([video.play().catch(noop), sleep(150)]);\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { video } = this;\n    const { stream } = this.props;\n    if (stream && video && (!video.srcObject || prevProps.stream !== stream)) {\n      this.playPromise = this.playPromise.then(() => {\n        video.srcObject = stream;\n        return Promise.race([video.play().catch(noop), sleep(150)]);\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    const { video } = this;\n    this.video = null;\n    if (video) {\n      video.srcObject = null;\n    }\n  }\n  \n  initVideo = video => {\n    if (video && video !== this.video) {\n      this.video = video;\n    }\n  };\n\n  render() {\n    return (\n      <video className=\"video\" ref={this.initVideo} muted={this.props.muted} playsInline />\n    );\n  }\n}\n\nexport default Video;\n","import { DeviceManager } from 'eyeson';\nimport { Component } from 'react';\nimport { Typography } from '@rmwc/typography';\nimport { Select } from '@rmwc/select';\nimport { Button } from '@rmwc/button';\nimport { Switch } from '@rmwc/switch';\nimport { Card } from '@rmwc/card';\nimport { queue } from './Notify.js';\nimport Video from './Video.js';\nimport { getSelectedDeviceId, mapDeviceList } from './utils.js';\n\nclass Preview extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      stream: null,\n      cameras: [],\n      microphones: [],\n      selectedCamera: '',\n      selectedMicrophone: '',\n      enabledAudio: true,\n      enabledVideo: true\n    };\n    this.deviceManager = new DeviceManager();\n  }\n\n  componentDidMount() {\n    this.deviceManager.onChange(this.handleChange);\n    this.deviceManager.start();\n  }\n\n  componentWillUnmount() {\n    this.deviceManager.terminate();\n  }\n\n  handleChange = event => {\n    const { cameras, microphones, stream, error } = event;\n    const { selectedMicrophone, selectedCamera } = this.state;\n    if (cameras && microphones) {\n      this.setState({\n        cameras: cameras.map(mapDeviceList),\n        microphones: microphones.map(mapDeviceList)\n      });\n    }\n    if (stream) {\n      this.setState({\n        stream,\n        selectedCamera: getSelectedDeviceId(stream, 'Video'),\n        selectedMicrophone: getSelectedDeviceId(stream, 'Audio')\n      });\n    }\n    if (microphones && selectedMicrophone && !microphones.find(device => device.deviceId === selectedMicrophone) && microphones.length > 0) {\n      this.onMicChange({ target: { value: microphones[0].deviceId } });\n    }\n    if (cameras && selectedCamera && !cameras.find(device => device.deviceId === selectedCamera) && cameras.length > 0) {\n      this.onCamChange({ target: { value: cameras[0].deviceId } });\n    }\n    if (error) {\n      queue.notify({ title: (error instanceof Error ? error.message : error), icon: 'error' });\n    }\n  };\n\n  toggleAudio = ({ target }) => {\n    const audio = target.checked;\n    this.setState({ enabledAudio: audio });\n    this.deviceManager.updateWithOptions({\n      audio,\n      video: this.state.enabledVideo\n    });\n  };\n\n  toggleVideo = ({ target }) => {\n    const video = target.checked;\n    this.setState({ enabledVideo: video });\n    this.deviceManager.updateWithOptions({\n      audio: this.state.enabledAudio,\n      video\n    });\n  };\n\n  onMicChange = ({ target }) => {\n    const { value } = target;\n    this.setState({ selectedMicrophone: value });\n    this.deviceManager.setAudioInput(value);\n    this.deviceManager.storeConstraints();\n  };\n\n  onCamChange = ({ target }) => {\n    const { value } = target;\n    this.setState({ selectedCamera: value });\n    this.deviceManager.setVideoInput(value);\n    this.deviceManager.storeConstraints();\n  };\n\n  onJoin = () => {\n    const { enabledAudio: audio, enabledVideo: video } = this.state;\n    this.deviceManager.storeConstraints();\n    this.props.onJoin({ audio, video });\n  };\n\n  onExit = () => {\n    this.props.exitMeeting();\n  };\n\n  render() {\n    const { stream, enabledAudio, enabledVideo, microphones, cameras, selectedMicrophone, selectedCamera } = this.state;\n    return (\n      <Card id=\"preview\" className=\"page\">\n        <Typography use=\"headline4\" tag=\"h4\" className=\"page-title\">Preview</Typography>\n        <div>\n          {enabledVideo && (\n            <Video stream={stream} muted />\n          )}\n        </div>\n        <div className=\"device\">\n          <div className=\"field\">\n            <Typography use=\"caption\" className=\"title\">Microphone</Typography>\n            <Switch checked={enabledAudio} onChange={this.toggleAudio} />\n          </div>\n          <Select options={microphones} onChange={this.onMicChange} value={selectedMicrophone} disabled={!enabledAudio} />\n        </div>\n        <div className=\"device\">\n          <div className=\"field\">\n            <Typography use=\"caption\" className=\"title\">Camera</Typography>\n            <Switch checked={enabledVideo} onChange={this.toggleVideo} />\n          </div>\n          <Select options={cameras} onChange={this.onCamChange} value={selectedCamera} disabled={!enabledVideo} />\n        </div>\n        <div className=\"buttons\">\n          <Button label=\"Cancel\" outlined onClick={this.onExit} />\n          &nbsp;\n          <Button label=\"Join\" unelevated onClick={this.onJoin} />\n        </div>\n      </Card>\n    );\n  }\n} \n\nexport default Preview;\n","import { Component } from 'react';\n\nconst noop = () => console.log('unable to play audio');\n\nclass Audio extends Component {\n  \n  constructor(props) {\n    super(props);\n    this.playPromise = Promise.resolve();\n  }\n\n  componentDidMount() {\n    const { audio } = this;\n    const { stream } = this.props;\n    if (stream && audio && !audio.srcObject) {\n      this.playPromise = this.playPromise.then(() => {\n        audio.srcObject = stream;\n        return audio.play().catch(noop);\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { audio } = this;\n    const { stream } = this.props;\n    if (stream && audio && (!audio.srcObject || prevProps.stream !== stream)) {\n      this.playPromise = this.playPromise.then(() => {\n        audio.srcObject = stream;\n        return audio.play().catch(noop);\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    const { audio } = this;\n    this.audio = null;\n    if (audio) {\n      audio.srcObject = null;\n    }\n  }\n  \n  initAudio = audio => {\n    if (audio && audio !== this.audio) {\n      this.audio = audio;\n    }\n  };\n\n  render() {\n    return (\n      <audio ref={this.initAudio} />\n    );\n  }\n}\n\nexport default Audio;\n","import { useEffect, useRef, useState } from 'react';\nimport { DeviceManager } from 'eyeson';\nimport { Select } from '@rmwc/select';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, DialogButton } from '@rmwc/dialog';\nimport { getSelectedDeviceId, mapDeviceList } from './utils.js';\n\nconst SettingsDialog = ({ open, onClose }) => {\n    \n  const deviceManager = useRef();\n  const videoElement = useRef();\n  const [cameras, setCameras] = useState([]);\n  const [microphones, setMicrophones] = useState([]);\n  const [selectedMicrophone, setSelectedMicrophone] = useState();\n  const [selectedCamera, setSelectedCamera] = useState();\n\n  const handleClose = event => {\n    let updateStream = false;\n    if (event.detail.action === 'apply') {\n      deviceManager.current.storeConstraints();\n      updateStream = true;\n    }\n    onClose(updateStream);\n  };\n\n  const changeMicrophone = event => {\n    const deviceId = event.currentTarget.value;\n    if (deviceManager.current && deviceId) {\n      setSelectedMicrophone(deviceId);\n      deviceManager.current.setAudioInput(deviceId);\n    }\n  };\n\n  const changeCamera = event => {\n    const deviceId = event.currentTarget.value;\n    if (deviceManager.current && deviceId) {\n      setSelectedCamera(deviceId);\n      deviceManager.current.setVideoInput(deviceId);\n    }\n  };\n\n  useEffect(() => {\n    const handleChange = event => {\n      const { error, stream, microphones, cameras } = event;\n      console.debug(event);\n      if (error) {\n        console.error(error);\n        return;\n      }\n      if (microphones) {\n        setMicrophones(microphones.map(mapDeviceList));\n      }\n      if (cameras) {\n        setCameras(cameras.map(mapDeviceList));\n      }\n      if (stream) {\n        const microphoneId = getSelectedDeviceId(stream, 'Audio');\n        const cameraId = getSelectedDeviceId(stream, 'Video');\n        videoElement.current.srcObject = event.stream;\n        setSelectedMicrophone(microphoneId);\n        setSelectedCamera(cameraId);\n      }\n    };\n    if (open) {\n      deviceManager.current = new DeviceManager();\n      deviceManager.current.onChange(handleChange);\n      deviceManager.current.start();\n    }\n    else if (deviceManager.current) {\n      deviceManager.current.removeListener(handleChange);\n      deviceManager.current.stop();\n      deviceManager.current = null;\n      videoElement.current.srcObject = null;\n    }\n  }, [open]);\n\n  return (\n    <Dialog\n      id=\"dialog-settings\"\n      open={open}\n      onClose={handleClose}\n    >\n      <DialogTitle>Devices</DialogTitle>\n      <DialogContent>\n        <video ref={videoElement} playsInline autoPlay muted />\n        <Select\n          label=\"Microphone\"\n          value={selectedMicrophone}\n          options={microphones}\n          onChange={changeMicrophone}\n        />\n        <Select\n          label=\"Camera\"\n          value={selectedCamera}\n          options={cameras}\n          onChange={changeCamera}\n        />\n      </DialogContent>\n      <DialogActions>\n        <DialogButton outlined action=\"close\">Cancel</DialogButton>\n        <DialogButton unelevated action=\"apply\" isDefaultAction>Apply</DialogButton>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default SettingsDialog;\n","import eyeson, { StreamHelpers, FeatureDetector } from 'eyeson';\nimport { Component } from 'react';\nimport { Grid, GridCell } from '@rmwc/grid';\nimport { Tooltip } from '@rmwc/tooltip';\nimport { IconButton } from '@rmwc/icon-button';\nimport { queue } from './Notify.js';\nimport Video from './Video.js';\nimport Audio from './Audio.js';\nimport SettingsDialog from './SettingsDialog.js';\n\nclass Meeting extends Component {\n\n  constructor(props) {\n    super(props);\n\n    const { mediaOptions } = props;\n\n    this.state = {\n      localStream: null,\n      remoteStream: null,\n      audio: mediaOptions.audio,\n      video: mediaOptions.video,\n      screen: false,\n      settingsDialog: false,\n      sfuMode: false,\n      solo: true,\n      hasPresenter: false,\n      hasMutedVideoPeers: false,\n    };\n\n    this.canScreenCapture = FeatureDetector.canScreenCapture();\n  }\n\n  componentDidMount() {\n    const { audio, video } = this.state;\n    this.props.setLoading(true);\n    eyeson.onEvent(this.handleEvent);\n    eyeson.join({ audio, video });\n  }\n\n  componentWillUnmount() {\n    eyeson.offEvent(this.handleEvent);\n    this.setState({\n      localStream: null,\n      remoteStream: null\n    });\n  }\n\n  handleEvent = event => {\n    const { type } = event;\n    console.debug(type, event);\n    if (type === 'presentation_ended') {\n      eyeson.send({\n        type: 'start_stream',\n        audio: this.state.audio,\n        video: this.state.video\n      });\n      this.setState({ screen: false });\n    }\n    else if (type === 'accept') {\n      this.setState({\n        localStream: event.localStream,\n        remoteStream: event.remoteStream\n      });\n      this.props.setLoading(false);\n    }\n    else if (type === 'stream_update') {\n      if (event.localStream) {\n        this.setState({ localStream: event.localStream });\n      }\n      if (event.stream) {\n        this.setState({ remoteStream: event.stream });\n      }\n    }\n    else if (type === 'podium') {\n      this.setState({\n        solo: event.solo,\n        hasPresenter: event.hasPresenter,\n        hasMutedVideoPeers: event.hasMutedVideoPeers,\n      });\n    }\n    else if (type === 'remote_description_update') {\n      this.setState({ sfuMode: event.update.sfu });\n    }\n    else if (type === 'warning') {\n      queue.notify({ title: `Warning: ${event.name}`, icon: 'warning' });\n    }\n    else if (type === 'error') {\n      queue.notify({ title: `Error: ${event.name}`, icon: 'error' });\n      this.endSession();\n    }\n    else if (type === 'exit') {\n      queue.notify({ title: 'Meeting has ended' });\n      this.endSession();\n    }\n    else {\n      console.debug('[App]', 'Ignore received event:', event.type);\n    }\n  };\n\n  toggleAudio = () => {\n    const { audio, localStream } = this.state;\n    const audioEnabled = !audio;\n    StreamHelpers.toggleAudio(localStream, audioEnabled);\n    this.setState({ audio: audioEnabled });\n  };\n\n  toggleVideo = () => {\n    const { audio, video, localStream } = this.state;\n    const videoEnabled = !video;\n    eyeson.send({\n      type: 'change_stream',\n      stream: localStream,\n      video: videoEnabled,\n      audio: audio\n    });\n    this.setState({ video: videoEnabled });\n  };\n\n  toggleScreen = () => {\n    if (!this.state.screen) {\n      eyeson.send({\n        type: 'start_screen_capture',\n        audio: this.state.audio,\n        screenStream: null,\n        screen: true\n      });\n      this.setState({ screen: true });\n    } else {\n      eyeson.send({ type: 'stop_presenting' });\n    }\n  };\n\n  showSettings = () => {\n    this.setState({ settingsDialog: true });\n  };\n\n  closeSettings = (updateStream = false) => {\n    this.setState({ settingsDialog: false });\n    if (updateStream && !this.state.screen) {\n      eyeson.send({\n        type: 'start_stream',\n        audio: this.state.audio,\n        video: this.state.video\n      });\n    }\n  };\n\n  endSession = () => {\n    this.props.exitMeeting();\n  };\n\n  renderMainView() {\n    const { remoteStream, localStream, video, sfuMode, solo, hasMutedVideoPeers } = this.state;\n    return [{\n      condition: () => solo && video,\n      component: () => (\n        <Video stream={localStream} muted />\n      )\n    }, {\n      condition: () => sfuMode && hasMutedVideoPeers,\n      component: () => (\n        <div className=\"empty-video-container\">\n          <div className=\"video empty\">\n            <Audio stream={remoteStream} />\n          </div>\n        </div>\n      )\n    }, {\n      condition: () => true,\n      component: () => (\n        <Video stream={remoteStream} />\n      )\n    }]\n    .find(component => component.condition())\n    .component();\n  };\n\n  render() {\n    const { localStream, audio, video, screen, sfuMode, solo, hasPresenter, settingsDialog } = this.state;\n    const showSelfView = video && sfuMode && !solo && !hasPresenter;\n    return (\n      <>\n        <Grid>\n          <GridCell span=\"11\">\n            {this.renderMainView()}\n            {showSelfView && (\n              <div id=\"self-view\">\n                <Video stream={localStream} muted />\n              </div>\n            )}\n          </GridCell>\n          <GridCell span=\"1\" className=\"app-sidebar\">\n            <Tooltip content={audio ? 'Mute' : 'Unmute'} align=\"left\">\n              <IconButton\n                checked={audio}\n                onClick={this.toggleAudio}\n                label=\"Toggle audio\"\n                icon={audio ? 'mic' : 'mic_off'}\n              />\n            </Tooltip>\n            <Tooltip content={video ? 'Turn off camera' : 'Turn on camera'} align=\"left\">\n              <IconButton\n                checked={video}\n                disabled={screen}\n                onClick={this.toggleVideo}\n                label=\"Toggle video\"\n                icon={video ? 'videocam' : 'videocam_off'}\n              />\n            </Tooltip>\n            <Tooltip content={screen ? 'Stop screenshare' : 'Start screenshare'} align=\"left\">\n              <IconButton\n                disabled={this.canScreenCapture === false}\n                checked={screen}\n                onClick={this.toggleScreen}\n                label=\"Share screen\"\n                icon={screen ? 'stop_screen_share' : 'screen_share'}\n              />\n            </Tooltip>\n            <Tooltip content=\"Device settings\" align=\"left\">\n              <IconButton\n                disabled={screen}\n                onClick={this.showSettings}\n                label=\"Device settings\"\n                icon=\"settings\"\n              />\n            </Tooltip>\n            <Tooltip content=\"Leave Meeting\" align=\"left\">\n              <IconButton\n                onClick={this.endSession}\n                label=\"Leave Meeting\"\n                icon=\"logout\"\n              />\n            </Tooltip>\n          </GridCell>\n        </Grid>\n        <SettingsDialog\n          open={settingsDialog}\n          onClose={this.closeSettings}\n        />\n      </>\n    );\n  }\n} \n\nexport default Meeting;\n","import eyeson from 'eyeson';\nimport { Component } from 'react';\nimport { ThemeProvider } from '@rmwc/theme';\nimport { LinearProgress } from '@rmwc/linear-progress';\nimport { SnackbarQueue } from '@rmwc/snackbar';\nimport { queue } from './Notify.js';\nimport Toolbar from './Toolbar.js';\nimport StartForm from './StartForm.js';\nimport Preview from './Preview.js';\nimport Meeting from './Meeting.js';\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      connected: false,\n      inPreview: true,\n      mediaOptions: { audio: true, video: true }\n    };\n  }\n\n  componentDidMount() {\n    eyeson.onEvent(this.handleEvent);\n  }\n\n  handleEvent = event => {\n    const { type, connectionStatus } = event;\n\n    if (type !== 'connection') {\n      return;\n    }\n\n    if (!['initialize', 'fetch_room', 'received_room', 'ready'].includes(connectionStatus)) {\n      this.setState({ loading: false }, () => {\n        queue.notify({ title: connectionStatus, icon: 'error' });\n      });\n      return;\n    }\n\n    if (connectionStatus === 'ready') {\n      this.setState({\n        loading: false,\n        connected: true\n      });\n    }\n  };\n\n  onStart = token => {\n    this.setState({ loading: true });\n    eyeson.connect(token);\n  };\n\n  onJoin = mediaOptions => {\n    this.setState({ mediaOptions, inPreview: false });\n  };\n\n  exitMeeting = () => {\n    eyeson.destroy();\n    eyeson.onEvent(this.handleEvent);\n    this.setState({ loading: false, connected: false, inPreview: true });\n  };\n\n  setLoading = loading => {\n    this.setState({ loading });\n  };\n\n  renderContent() {\n    return [{\n      condition: () => this.state.inPreview && !this.state.connected,\n      component: () => (\n        <StartForm onStart={this.onStart} loading={this.state.loading} />\n      )\n    }, {\n      condition: () => this.state.inPreview,\n      component: () => (\n        <Preview onJoin={this.onJoin} exitMeeting={this.exitMeeting} />\n      )\n    }, {\n      condition: () => true,\n      component: () => {\n        eyeson.offEvent(this.handleEvent);\n        return (\n          <Meeting exitMeeting={this.exitMeeting} setLoading={this.setLoading} mediaOptions={this.state.mediaOptions} />\n        );\n      }\n    }]\n      .find(component => component.condition())\n      .component();\n  }\n\n  render() {\n    return (\n      <ThemeProvider options={{ primary: '#9e206c', secondary: '#6d6d6d' }}>\n        <Toolbar title=\"Web GUI React App\" />\n        <LinearProgress closed={!this.state.loading} />\n        <main id=\"app\">\n          {this.renderContent()}\n        </main>\n        <SnackbarQueue messages={queue.messages} />\n      </ThemeProvider>\n\n    );\n  }\n} \n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport 'rmwc/dist/styles';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// remove discontinued service worker installations\nif ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n        registration.unregister();\n    }).catch((error) => {\n        console.error(error.message);\n    });\n}\n"],"sourceRoot":""}