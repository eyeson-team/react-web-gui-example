/*! For license information please see 2.1deed716.chunk.js.LICENSE.txt */
(this["webpackJsonpeyeson-web-gui-react"]=this["webpackJsonpeyeson-web-gui-react"]||[]).push([[2],[function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}},function(e,t,n){"use strict";e.exports=n(31)},function(e,t,n){"use strict";e.exports=n(30)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(0),i=n(1),o=n.n(i),s=n(6),a=n.n(s),c=n(25),u=o.a.forwardRef((function(e,t){var n=e.tag,i=void 0===n?"div":n,s=(e.theme,e.element),a=Object(r.d)(e,["tag","theme","element"]),c=s?s.props(a):a,u=s?d(t,s.setRef):t;return o.a.createElement(i,Object(r.a)({},c,{ref:u}))})),l=function(e,t){return a.a.apply(void 0,Object(r.e)([e.className],e.theme?Object(c.a)(e.theme):[],"function"===typeof t?t(e):t))},d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n,i;try{for(var o=Object(r.f)(e),s=o.next();!s.done;s=o.next()){var a=s.value;"function"===typeof a?a(t):a&&"current"in a&&(a.current=t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}},h=function(e,t){"function"===typeof e?e(t):e&&"current"in e&&(e.current=t)};function f(e){var t=o.a.forwardRef(e),n=function(e,t){return o.a.createElement(o.a.Fragment,null)};return n.displayName=e.constructor.name||"RMWCComponent",t.displayName=n.displayName,t}function p(e){var t=f(e);return o.a.memo(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}()},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var s=i.apply(null,r);s&&e.push(s)}else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r=n(36);window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=31)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(20);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(7),i=n(12);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t,n){var r=n(25),i=n(26),o=n(14),s=n(27);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||s()}},function(e,t,n){var r=n(21);function i(t,n,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){e.exports=n(24)},function(e,t,n){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,o={};r<i;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)o[n[0][r]]=e[r];return o}return!1}(),i={change:r.fullscreenchange,error:r.fullscreenerror},o={request:function(e){return new Promise(function(n,i){var o=function(){this.off("change",o),n()}.bind(this);this.on("change",o);var s=(e=e||t.documentElement)[r.requestFullscreen]();s instanceof Promise&&s.then(o).catch(i)}.bind(this))},exit:function(){return new Promise(function(e,n){if(this.isFullscreen){var i=function(){this.off("change",i),e()}.bind(this);this.on("change",i);var o=t[r.exitFullscreen]();o instanceof Promise&&o.then(i).catch(n)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=i[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=i[e];r&&t.removeEventListener(r,n,!1)},raw:r};r?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=o:window.screenfull=o):n?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},function(e,t){function n(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)}))}}},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}})),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=l}))),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),i=r.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var s=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(28),i=n(29),o=n(14),s=n(30);e.exports=function(e){return r(e)||i(e)||o(e)||s()}},function(e,t,n){var r=n(15);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";var r=n(11);function i(e,t,n,i,o){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}})),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var l=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=i?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=r.getMediaSections(i._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+l.join("");var d=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",s),d&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,i){var s=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),i&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},l.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var s=i.transceivers[t],c=s.iceGatherer,u=s.iceTransport,l=s.dtlsTransport,d=s.localCapabilities,h=s.remoteCapabilities;if((!r.isRejected(e)||0!==r.matchPrefix(e,"a=bundle-only").length)&&!s.rejected){var f=r.getIceParameters(e,n),p=r.getDtlsParameters(e,n);a&&(p.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===u.state&&u.start(c,f,a?"controlling":"controlled"),"new"===l.state&&l.start(p));var m=o(d,h);i._transceive(s,m.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(i){var l=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!s("setRemoteDescription",i.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var h=[],f=r.splitSections(i.sdp),p=f.shift(),m=r.matchPrefix(p,"a=ice-lite").length>0,g=r.matchPrefix(p,"a=group:BUNDLE ").length>0;l.usingBundle=g;var v=r.matchPrefix(p,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!v&&v.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(s,c){var u=r.splitLines(s),f=r.getKind(s),v=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],b=r.getDirection(s,p),S=r.parseMsid(s),T=r.getMid(s)||r.generateIdentifier();if(v||"application"===f&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[c]={mid:T,kind:f,protocol:y,rejected:!0};else{var _,E,C,w,R,k,A,O,I;!v&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(f,!0));var x,D,P=r.parseRtpParameters(s);v||(x=r.getIceParameters(s,p),(D=r.getDtlsParameters(s,p)).role="client"),A=r.parseRtpEncodingParameters(s);var N=r.parseRtcpParameters(s),L=r.matchPrefix(s,"a=end-of-candidates",p).length>0,M=r.matchPrefix(s,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!v&&g&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==i.type||v)"answer"!==i.type||v||(E=(_=l.transceivers[c]).iceGatherer,C=_.iceTransport,w=_.dtlsTransport,R=_.rtpReceiver,k=_.sendEncodingParameters,O=_.localCapabilities,l.transceivers[c].recvEncodingParameters=A,l.transceivers[c].remoteCapabilities=P,l.transceivers[c].rtcpParameters=N,M.length&&"new"===C.state&&(!m&&!L||g&&0!==c?M.forEach((function(e){a(_.iceTransport,e)})):C.setRemoteCandidates(M)),g&&0!==c||("new"===C.state&&C.start(E,x,"controlling"),"new"===w.state&&w.start(D)),!o(_.localCapabilities,_.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&_.sendEncodingParameters[0].rtx&&delete _.sendEncodingParameters[0].rtx,l._transceive(_,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!R||"sendrecv"!==b&&"sendonly"!==b?delete _.rtpReceiver:(I=R.track,S?(d[S.stream]||(d[S.stream]=new e.MediaStream),n(I,d[S.stream]),h.push([I,R,d[S.stream]])):(d.default||(d.default=new e.MediaStream),n(I,d.default),h.push([I,R,d.default]))));else{(_=l.transceivers[c]||l._createTransceiver(f)).mid=T,_.iceGatherer||(_.iceGatherer=l._createIceGatherer(c,g)),M.length&&"new"===_.iceTransport.state&&(!L||g&&0!==c?M.forEach((function(e){a(_.iceTransport,e)})):_.iceTransport.setRemoteCandidates(M)),O=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(O.codecs=O.codecs.filter((function(e){return"rtx"!==e.name}))),k=_.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var U,j=!1;"sendrecv"===b||"sendonly"===b?(j=!_.rtpReceiver,R=_.rtpReceiver||new e.RTCRtpReceiver(_.dtlsTransport,f),j&&(I=R.track,S&&"-"===S.stream||(S?(d[S.stream]||(d[S.stream]=new e.MediaStream,Object.defineProperty(d[S.stream],"id",{get:function(){return S.stream}})),Object.defineProperty(I,"id",{get:function(){return S.track}}),U=d[S.stream]):(d.default||(d.default=new e.MediaStream),U=d.default)),U&&(n(I,U),_.associatedRemoteMediaStreams.push(U)),h.push([I,R,U]))):_.rtpReceiver&&_.rtpReceiver.track&&(_.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===_.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),_.associatedRemoteMediaStreams=[]),_.localCapabilities=O,_.remoteCapabilities=P,_.rtpReceiver=R,_.rtcpParameters=N,_.sendEncodingParameters=k,_.recvEncodingParameters=A,l._transceive(l.transceivers[c],!1,j)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===i.type?"active":"passive"),l._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}h.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),h.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,s=n.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));o>0||s>0;)o>0&&(n._createTransceiver("audio"),o--),s>0&&(n._createTransceiver("video"),s--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,o){var s=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){s=u;break}var l=n.transceivers[s];if(!l)return o(c("OperationError","Can not add ICE candidate"));if(l.rejected)return i();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return i();if(d.component&&1!==d.component)return i();if((0===s||s>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!a(l.iceTransport,d))return o(c("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[s]+="a="+(d.type?h:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var f=0;f<n.transceivers.length&&(n.transceivers[f].rejected||(n.transceivers[f].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));f++);i()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},function(e,t,n){(function(e,r){var i;(function(){"use strict";var o={function:!0,object:!0},s=o[typeof window]&&window||this,a=o[typeof t]&&t,c=o[typeof e]&&e&&!e.nodeType&&e,u=a&&c&&"object"==typeof r&&r;!u||u.global!==u&&u.window!==u&&u.self!==u||(s=u);var l=Math.pow(2,53)-1,d=/\bOpera/,h=Object.prototype,f=h.hasOwnProperty,p=h.toString;function m(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function g(e){return e=T(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:m(e)}function v(e,t){for(var n in e)f.call(e,n)&&t(e[n],n,e)}function y(e){return null==e?m(e):p.call(e).slice(8,-1)}function b(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function S(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=l)for(;++n<r;)t(e[n],n,e);else v(e,t)}(e,(function(r,i){n=t(n,r,i,e)})),n}function T(e){return String(e).replace(/^ +| +$/g,"")}var _=function e(t){var n=s,r=t&&"object"==typeof t&&"String"!=y(t);r&&(n=t,t=null);var i=n.navigator||{},o=i.userAgent||"";t||(t=o);var a,c,u,l,h,f=r?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(p.toString()),m=r?"Object":"ScriptBridgingProxyObject",_=r?"Object":"Environment",E=r&&n.java?"JavaPackage":y(n.java),C=r?"Object":"RuntimeObject",w=/\bJava/.test(E)&&n.java,R=w&&y(n.environment)==_,k=w?"a":"\u03b1",A=w?"b":"\u03b2",O=n.document||{},I=n.operamini||n.opera,x=d.test(x=r&&I?I["[[Class]]"]:y(I))?x:I=null,D=t,P=[],N=null,L=t==o,M=L&&I&&"function"==typeof I.version&&I.version(),U=S([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||b(n))+"\\b","i").exec(t)&&(n.label||n)})),j=S(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,n){return e||RegExp("\\b"+(n.pattern||b(n))+"\\b","i").exec(t)&&(n.label||n)})),H=q([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),F=S({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(e,n,r){return e||(n[H]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(H)]||RegExp("\\b"+b(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r})),$=S(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,n){var r=n.pattern||b(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),g(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}));function q(e){return S(e,(function(e,n){var r=n.pattern||b(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=g(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(U&&(U=[U]),F&&!H&&(H=q([F])),(a=/\bGoogle TV\b/.exec(H))&&(H=a[0]),/\bSimulator\b/i.test(t)&&(H=(H?H+" ":"")+"Simulator"),"Opera Mini"==j&&/\bOPiOS\b/.test(t)&&P.push("running in Turbo/Uncompressed mode"),"IE"==j&&/\blike iPhone OS\b/.test(t)?(F=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,H=a.product):/^iP/.test(H)?(j||(j="Safari"),$="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=j||/buntu/i.test($)?F&&"Google"!=F&&(/Chrome/.test(j)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(H))||/\bAndroid\b/.test($)&&/^Chrome/.test(j)&&/\bVersion\//i.test(t)?(j="Android Browser",$=/\bAndroid\b/.test($)?$:"Android"):"Silk"==j?(/\bMobi/i.test(t)||($="Android",P.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&P.unshift("accelerated")):"PaleMoon"==j&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?P.push("identifying as Firefox "+a[1]):"Firefox"==j&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?($||($="Firefox OS"),H||(H=a[1])):!j||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(j))?(j&&!H&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&(j=null),(a=H||F||$)&&(H||F||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test($))&&(j=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test($)?$:a)+" Browser")):"Electron"==j&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&P.push("Chromium "+a):$="Kubuntu",M||(M=S(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",b(j),"(?:Firefox|Minefield|NetFront)"],(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))),(a=("iCab"==U&&parseFloat(M)>3?"WebKit":/\bOpera\b/.test(j)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(U)&&"WebKit"||!U&&/\bMSIE\b/i.test(t)&&("Mac OS"==$?"Tasman":"Trident")||"WebKit"==U&&/\bPlayStation\b(?! Vita\b)/i.test(j)&&"NetFront")&&(U=[a]),"IE"==j&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(j+=" Mobile",$="Windows Phone "+(/\+$/.test(a)?a:a+".x"),P.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(j="IE Mobile",$="Windows Phone 8.x",P.unshift("desktop mode"),M||(M=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=j&&"Trident"==U&&(a=/\brv:([\d.]+)/.exec(t))&&(j&&P.push("identifying as "+j+(M?" "+M:"")),j="IE",M=a[1]),L){if(l="global",h=null!=(u=n)?typeof u[l]:"number",/^(?:boolean|number|string|undefined)$/.test(h)||"object"==h&&!u[l])y(a=n.runtime)==m?(j="Adobe AIR",$=a.flash.system.Capabilities.os):y(a=n.phantom)==C?(j="PhantomJS",M=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof O.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?(M=[M,O.documentMode],(a=+a[1]+4)!=M[1]&&(P.push("IE "+M[1]+" mode"),U&&(U[1]=""),M[1]=a),M="IE"==j?String(M[1].toFixed(1)):M[0]):"number"==typeof O.documentMode&&/^(?:Chrome|Firefox)\b/.test(j)&&(P.push("masking as "+j+" "+M),j="IE",M="11.0",U=["Trident"],$="Windows");else if(w&&(D=(a=w.lang.System).getProperty("os.arch"),$=$||a.getProperty("os.name")+" "+a.getProperty("os.version")),R){try{M=n.require("ringo/engine").version.join("."),j="RingoJS"}catch(e){(a=n.system)&&a.global.system==n.system&&(j="Narwhal",$||($=a[0].os||null))}j||(j="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(P.push("Node "+a.versions.node),j="Electron",M=a.versions.electron):"string"==typeof a.versions.nw&&(P.push("Chromium "+M,"Node "+a.versions.node),j="NW.js",M=a.versions.nw)),j||(j="Node.js",D=a.arch,$=a.platform,M=(M=/[\d.]+/.exec(a.version))?M[0]:null));$=$&&g($)}if(M&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(M)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(L&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(N=/b/i.test(a)?"beta":"alpha",M=M.replace(RegExp(a+"\\+?$"),"")+("beta"==N?A:k)+(/\d+\+?/.exec(a)||"")),"Fennec"==j||"Firefox"==j&&/\b(?:Android|Firefox OS)\b/.test($))j="Firefox Mobile";else if("Maxthon"==j&&M)M=M.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(H))"Xbox 360"==H&&($=null),"Xbox 360"==H&&/\bIEMobile\b/.test(t)&&P.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(j)&&(!j||H||/Browser|Mobi/.test(j))||"Windows CE"!=$&&!/Mobi/i.test(t))if("IE"==j&&L)try{null===n.external&&P.unshift("platform preview")}catch(e){P.unshift("embedded")}else(/\bBlackBerry\b/.test(H)||/\bBB10\b/.test(t))&&(a=(RegExp(H.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||M)?($=((a=[a,/BB10/.test(t)])[1]?(H=null,F="BlackBerry"):"Device Software")+" "+a[0],M=null):this!=v&&"Wii"!=H&&(L&&I||/Opera/.test(j)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==j&&/\bOS X (?:\d+\.){2,}/.test($)||"IE"==j&&($&&!/^Win/.test($)&&M>5.5||/\bWindows XP\b/.test($)&&M>8||8==M&&!/\bTrident\b/.test(t)))&&!d.test(a=e.call(v,t.replace(d,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),d.test(j)?(/\bIE\b/.test(a)&&"Mac OS"==$&&($=null),a="identify"+a):(a="mask"+a,j=x?g(x.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&($=null),L||(M=null)),U=["Presto"],P.push(a));else j+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==j&&"+"==a[1].slice(-1)?(j="WebKit Nightly",N="alpha",M=a[1].slice(0,-1)):M!=a[1]&&M!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(M=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==U&&(U=["Blink"]),L&&(f||a[1])?(U&&(U[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=U?"27":"28")):(U&&(U[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),U&&(U[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==j&&(!M||parseInt(M)>45)&&(M=a)),"Opera"==j&&(a=/\bzbov|zvav$/.exec($))?(j+=" ",P.unshift("desktop mode"),"zvav"==a?(j+="Mini",M=null):j+="Mobile",$=$.replace(RegExp(" *"+a+"$"),"")):"Safari"==j&&/\bChrome\b/.exec(U&&U[1])&&(P.unshift("desktop mode"),j="Chrome Mobile",M=null,/\bOS X\b/.test($)?(F="Apple",$="iOS 4.3+"):$=null),M&&0==M.indexOf(a=/[\d.]+$/.exec($))&&t.indexOf("/"+a+"-")>-1&&($=T($.replace(a,""))),U&&!/\b(?:Avant|Nook)\b/.test(j)&&(/Browser|Lunascape|Maxthon/.test(j)||"Safari"!=j&&/^iOS/.test($)&&/\bSafari\b/.test(U[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(j)&&U[1])&&(a=U[U.length-1])&&P.push(a),P.length&&(P=["("+P.join("; ")+")"]),F&&H&&H.indexOf(F)<0&&P.push("on "+F),H&&P.push((/^on /.test(P[P.length-1])?"":"on ")+H),$&&(a=/ ([\d.+]+)$/.exec($),c=a&&"/"==$.charAt($.length-a[0].length-1),$={architecture:32,family:a&&!c?$.replace(a[0],""):$,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(D))&&!/\bi686\b/i.test(D)?($&&($.architecture=64,$.family=$.family.replace(RegExp(" *"+a),"")),j&&(/\bWOW64\b/i.test(t)||L&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&P.unshift("32-bit")):$&&/^OS X/.test($.family)&&"Chrome"==j&&parseFloat(M)>=39&&($.architecture=64),t||(t=null);var B={};return B.description=t,B.layout=U&&U[0],B.manufacturer=F,B.name=j,B.prerelease=N,B.product=H,B.ua=t,B.version=j&&M,B.os=$||{architecture:null,family:null,version:null,toString:function(){return"null"}},B.parse=e,B.toString=function(){return this.description||""},B.version&&P.unshift(M),B.name&&P.unshift(j),$&&j&&($!=String($).split(" ")[0]||$!=j.split(" ")[0]&&!H)&&P.push(H?"("+$+")":"on "+$),P.length&&(B.description=P.join(" ")),B}();s.platform=_,void 0===(i=function(){return _}.call(t,n,t,e))||(e.exports=i)}).call(this)}).call(this,n(22)(e),n(23))},function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";e.exports=n(1)(n(40))},function(e,t,n){"use strict";e.exports=function(e){var t=n(2),r=t.version,i=t.title,o=Object.defineProperties({},{version:{get:function(){return r}},name:{get:function(){return i}}});return n(3)(o,e),o.LoggerFactory=n(4)(e.console),o.EventEmitter=n(5)(),o.C=n(7)(o.name,o.version),o.Exceptions=n(8),o.Timers=n(9)(e.timers),o.Transport=n(10)(o),n(11)(o),n(12)(o),n(13)(o),n(14)(o),n(15)(o),n(16)(o),n(18)(o),n(19)(o),o.SessionDescriptionHandler=n(20)(o.EventEmitter),n(21)(o),n(22)(o),n(23)(o),n(25)(o),n(26)(o),n(27)(o,e),n(32)(o),o.DigestAuthentication=n(33)(o.Utils),o.Grammar=n(36)(o),o.Web={Modifiers:n(38)(o),Simple:n(39)(o)},o}},function(e){e.exports={name:"sip.js",title:"SIP.js",description:"A simple, intuitive, and powerful JavaScript signaling library",version:"0.11.6",main:"dist/sip.js",browser:{"./src/environment.js":"./src/environment_browser.js"},homepage:"https://sipjs.com",author:"OnSIP <developer@onsip.com> (https://sipjs.com/aboutus/)",contributors:[{url:"https://github.com/onsip/SIP.js/blob/master/THANKS.md"}],repository:{type:"git",url:"https://github.com/onsip/SIP.js.git"},keywords:["sip","websocket","webrtc","library","javascript"],devDependencies:{"awesome-typescript-loader":"^5.2.1",eslint:"^5.4.0","jasmine-core":"^3.2.1",karma:"^3.0.0","karma-chrome-launcher":"^2.2.0","karma-cli":"^1.0.1","karma-jasmine":"^1.1.0","karma-jasmine-html-reporter":"^1.3.1","karma-mocha-reporter":"^2.2.5","karma-webpack":"^3.0.0",pegjs:"^0.10.0","pegjs-loader":"^0.5.4",typescript:"^3.0.3",webpack:"^4.19.0","webpack-cli":"^3.0.8"},engines:{node:">=6.0"},license:"MIT",scripts:{prebuild:"eslint src/*.js src/**/*.js","build-dev":"webpack --progress --env.buildType dev","build-prod":"webpack --progress --env.buildType prod","copy-dist-files":"cp dist/sip.js dist/sip-$npm_package_version.js && cp dist/sip.min.js  dist/sip-$npm_package_version.min.js",build:"npm run build-dev && npm run build-prod && npm run copy-dist-files",browserTest:"sleep 2 && open http://0.0.0.0:9876/debug.html & karma start --reporters kjhtml --no-single-run",commandLineTest:"karma start --reporters mocha --browsers ChromeHeadless --single-run",buildAndTest:"npm run build && npm run commandLineTest",buildAndBrowserTest:"npm run build && npm run browserTest"},dependencies:{"crypto-js":"^3.1.9-1"},optionalDependencies:{promiscuous:"^0.6.0"}}},function(e,t,n){"use strict";e.exports=function(e,t){var n;n={Promise:t.Promise,defer:function(){var e={};return e.promise=new n.Promise((function(t,n){e.resolve=t,e.reject=n})),e},reducePromises:function(t,n){return t.reduce((function(e,t){return e.then(t)}),e.Utils.Promise.resolve(n))},augment:function(e,t,n,r){var i,o;for(i in o=t.prototype)(r||void 0===e[i])&&(e[i]=o[i]);t.apply(e,n)},defaultOptions:function(e,t){return e=e||{},t=t||{},Object.assign({},e,t)},optionsOverride:function(e,t,n,r,i,o){r&&e[n]&&i.warn(n+" is deprecated, please use "+t+" instead"),e[t]&&e[n]&&i.warn(t+" overriding "+n),e[t]=e[t]||e[n]||o},str_utf8_length:function(e){return encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length},generateFakeSDP:function(e){if(e){var t=e.indexOf("o="),n=e.indexOf("\r\n",t);return"v=0\r\n"+e.slice(t,n)+"\r\ns=-\r\nt=0 0\r\nc=IN IP4 0.0.0.0"}},isFunction:function(e){return void 0!==e&&"[object Function]"===Object.prototype.toString.call(e)},isDecimal:function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},createRandomToken:function(e,t){var n,r="";for(t=t||32,n=0;n<e;n++)r+=(Math.random()*t|0).toString(t);return r},newTag:function(){return e.Utils.createRandomToken(e.UA.C.TAG_LENGTH)},newUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},hostType:function(t){if(t)return-1!==(t=e.Grammar.parse(t,"host"))?t.host_type:void 0},normalizeTarget:function(t,n){var r,i,o;if(t){if(t instanceof e.URI)return t;if("string"==typeof t){switch((r=t.split("@")).length){case 1:if(!n)return;i=t,o=n;break;case 2:i=r[0],o=r[1];break;default:i=r.slice(0,r.length-1).join("@"),o=r[r.length-1]}return i=i.replace(/^(sips?|tel):/i,""),/^[\-\.\(\)]*\+?[0-9\-\.\(\)]+$/.test(i)&&(i=i.replace(/[\-\.\(\)]/g,"")),t=e.C.SIP+":"+e.Utils.escapeUser(i)+"@"+o,e.URI.parse(t)}}},escapeUser:function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},headerize:function(e){var t,n={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),i="",o=r.length;for(t=0;t<o;t++)0!==t&&(i+="-"),i+=r[t].charAt(0).toUpperCase()+r[t].substring(1);return n[i]&&(i=n[i]),i},sipErrorCause:function(t){var n;for(n in e.C.SIP_ERROR_CAUSES)if(-1!==e.C.SIP_ERROR_CAUSES[n].indexOf(t))return e.C.causes[n];return e.C.causes.SIP_FAILURE_CODE},getReasonPhrase:function(t,n){return n||e.C.REASON_PHRASE[t]||""},getReasonHeaderValue:function(t,n){return"SIP;cause="+t+';text="'+(n=e.Utils.getReasonPhrase(t,n))+'"'},getCancelReason:function(t,n){if(t&&t<200||t>699)throw new TypeError("Invalid status_code: "+t);if(t)return e.Utils.getReasonHeaderValue(t,n)},buildStatusLine:function(e,t){if(t=t||null,!(e=e||null)||e<100||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);return"SIP/2.0 "+e+" "+(t=n.getReasonPhrase(e,t))+"\r\n"},getRandomTestNetIP:function(){return"192.0.2."+(e=1,t=254,Math.floor(Math.random()*(t-e+1)+e));var e,t}},e.Utils=n}},function(e,t,n){"use strict";var r={error:0,warn:1,log:2,debug:3};e.exports=function(e){var t=function(){var e,t=2,n=!0,i=null;this.loggers={},e=this.getLogger("sip.loggerfactory"),Object.defineProperties(this,{builtinEnabled:{get:function(){return n},set:function(t){"boolean"==typeof t?n=t:e.error('invalid "builtinEnabled" parameter value: '+JSON.stringify(t))}},level:{get:function(){return t},set:function(n){n>=0&&n<=3?t=n:n>3?t=3:r.hasOwnProperty(n)?t=r[n]:e.error('invalid "level" parameter value: '+JSON.stringify(n))}},connector:{get:function(){return i},set:function(t){null===t||""===t||void 0===t?i=null:"function"==typeof t?i=t:e.error('invalid "connector" parameter value: '+JSON.stringify(t))}}})};function n(e,t,n){this.logger=e,this.category=t,this.label=n}return t.prototype.print=function(t,n,r,i){if("string"==typeof i){var o=[new Date,n];r&&o.push(r),i=o.concat(i).join(" | ")}t.call(e,i)},Object.keys(r).forEach((function(i){n.prototype[i]=function(e){this.logger[i](this.category,this.label,e)},t.prototype[i]=function(t,n,o){this.level>=r[i]&&(this.builtinEnabled&&this.print(e[i],t,n,o),this.connector&&this.connector(i,t,n,o))}})),t.prototype.getLogger=function(e,t){var r;return t&&3===this.level?new n(this,e,t):this.loggers[e]?this.loggers[e]:(r=new n(this,e),this.loggers[e]=r,r)},t}},function(e,t,n){"use strict";var r=n(6).EventEmitter;e.exports=function(){function e(){r.call(this)}return e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(u=n.slice()).length,c=0;c<s;c++)u[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";e.exports=function(e,t){return{USER_AGENT:e+"/"+t,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",AUTHENTICATION_ERROR:"Authentication Error",DIALOG_ERROR:"Dialog Error",WEBRTC_NOT_SUPPORTED:"WebRTC Not Supported",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",NO_PRACK:"No PRACK",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},supported:{UNSUPPORTED:"none",SUPPORTED:"supported",REQUIRED:"required"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",PUBLISH:"PUBLISH",REFER:"REFER",PRACK:"PRACK",REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},OPTION_TAGS:{"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0},dtmfType:{INFO:"info",RTP:"rtp"}}}},function(e,t,n){"use strict";var r;e.exports={ConfigurationError:(r=function(e,t){this.code=1,this.name="CONFIGURATION_ERROR",this.parameter=e,this.value=t,this.message=this.value?"Invalid value "+JSON.stringify(this.value)+' for parameter "'+this.parameter+'"':"Missing parameter: "+this.parameter},r.prototype=new Error,r),InvalidStateError:function(){var e=function(e){this.code=2,this.name="INVALID_STATE_ERROR",this.status=e,this.message="Invalid status: "+e};return e.prototype=new Error,e}(),NotSupportedError:function(){var e=function(e){this.code=3,this.name="NOT_SUPPORTED_ERROR",this.message=e};return e.prototype=new Error,e}(),GetDescriptionError:function(){var e=function(e){this.code=4,this.name="GET_DESCRIPTION_ERROR",this.message=e};return e.prototype=new Error,e}(),RenegotiationError:function(){var e=function(e){this.code=5,this.name="RENEGOTIATION_ERROR",this.message=e};return e.prototype=new Error,e}(),MethodParameterError:function(){var e=function(e,t,n){this.code=6,this.name="METHOD_PARAMETER_ERROR",this.method=e,this.parameter=t,this.value=n,this.message=this.value?"Invalid value "+JSON.stringify(this.value)+' for parameter "'+this.parameter+'"':"Missing parameter: "+this.parameter};return e.prototype=new Error,e}(),TransportError:function(){var e=function(e){this.code=7,this.name="TRANSPORT_ERROR",this.message=e};return e.prototype=new Error,e}(),SessionDescriptionHandlerError:function(){var e=function(e,t,n){this.code=8,this.name="SESSION_DESCRIPTION_HANDLER_ERROR",this.method=e,this.error=t,this.message=n||"Error with Session Description Handler"};return e.prototype=new Error,e}()}},function(e,t,n){"use strict";var r=500;e.exports=function(e){var t={T1:r,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,TIMER_N:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4};return["setTimeout","clearTimeout","setInterval","clearInterval"].forEach((function(n){t[n]=function(){return e[n].apply(e,arguments)}})),t}},function(e,t,n){"use strict";e.exports=function(e){var t=function(e,t){};return t.prototype=Object.create(e.EventEmitter.prototype,{connect:{writable:!0,value:function(e){return e=e||{},this.connectPromise(e).then(function(e){!e.overrideEvent&&this.emit("connected")}.bind(this))}},connectPromise:{writable:!0,value:function(e){}},isConnected:{writable:!0,value:function(){}},send:{writable:!0,value:function(e,t){return t=t||{},this.sendPromise(e).then(function(e){!e.overrideEvent&&this.emit("messageSent",e.msg)}.bind(this))}},sendPromise:{writable:!0,value:function(e,t){}},onMessage:{writable:!0,value:function(e){}},disconnect:{writable:!0,value:function(e){return e=e||{},this.disconnectPromise(e).then(function(e){!e.overrideEvent&&this.emit("disconnected")}.bind(this))}},disconnectPromise:{writable:!0,value:function(e){}},afterConnected:{writable:!0,value:function(e){this.isConnected()?e():this.once("connected",e)}},waitForConnected:{writable:!0,value:function(){return console.warn("DEPRECATION WARNING Transport.waitForConnected(): use afterConnected() instead"),new e.Utils.Promise(function(e){this.afterConnected(e)}.bind(this))}}}),t}},function(e,t,n){"use strict";e.exports=function(e){var t;function n(e,t){var n=t,r=0,i=0;if(e.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(-1===(i=e.indexOf("\r\n",n)))return i;!e.substring(i+2,i+4).match(/(^\r\n)/)&&e.charAt(i+2).match(/(^\s+)/)?n=i+2:r=i}return r}function r(t,n,r,i){var o,s,a,c,u=n.indexOf(":",r),l=n.substring(r,u).trim(),d=n.substring(u+1,i).trim();switch(l.toLowerCase()){case"via":case"v":t.addHeader("via",d),1===t.getHeaders("via").length?(c=t.parseHeader("Via"))&&(t.via=c,t.via_branch=c.branch):c=0;break;case"from":case"f":t.setHeader("from",d),(c=t.parseHeader("from"))&&(t.from=c,t.from_tag=c.getParam("tag"));break;case"to":case"t":t.setHeader("to",d),(c=t.parseHeader("to"))&&(t.to=c,t.to_tag=c.getParam("tag"));break;case"record-route":if(-1===(c=e.Grammar.parse(d,"Record_Route"))){c=void 0;break}for(a=c.length,s=0;s<a;s++)o=c[s],t.addHeader("record-route",d.substring(o.position,o.offset)),t.headers["Record-Route"][t.getHeaders("record-route").length-1].parsed=o.parsed;break;case"call-id":case"i":t.setHeader("call-id",d),(c=t.parseHeader("call-id"))&&(t.call_id=d);break;case"contact":case"m":if(-1===(c=e.Grammar.parse(d,"Contact"))){c=void 0;break}for(a=c.length,s=0;s<a;s++)o=c[s],t.addHeader("contact",d.substring(o.position,o.offset)),t.headers.Contact[t.getHeaders("contact").length-1].parsed=o.parsed;break;case"content-length":case"l":t.setHeader("content-length",d),c=t.parseHeader("content-length");break;case"content-type":case"c":t.setHeader("content-type",d),c=t.parseHeader("content-type");break;case"cseq":t.setHeader("cseq",d),(c=t.parseHeader("cseq"))&&(t.cseq=c.value),t instanceof e.IncomingResponse&&(t.method=c.method);break;case"max-forwards":t.setHeader("max-forwards",d),c=t.parseHeader("max-forwards");break;case"www-authenticate":t.setHeader("www-authenticate",d),c=t.parseHeader("www-authenticate");break;case"proxy-authenticate":t.setHeader("proxy-authenticate",d),c=t.parseHeader("proxy-authenticate");break;case"refer-to":case"r":t.setHeader("refer-to",d),(c=t.parseHeader("refer-to"))&&(t.refer_to=c);break;default:t.setHeader(l,d),c=0}return void 0!==c||{error:'error parsing header "'+l+'"'}}(t={}).parseMessage=function(t,i){var o,s,a,c,u,l=0,d=t.indexOf("\r\n"),h=i.getLogger("sip.parser");if(-1!==d){if(s=t.substring(0,d),-1!==(u=e.Grammar.parse(s,"Request_Response"))){for(u.status_code?((o=new e.IncomingResponse(i)).status_code=u.status_code,o.reason_phrase=u.reason_phrase):((o=new e.IncomingRequest(i)).method=u.method,o.ruri=u.uri),o.data=t,l=d+2;;){if(-2===(d=n(t,l))){c=l+2;break}if(-1===d)return void h.error("malformed message");if(!0!==(u=r(o,t,l,d)))return void h.error(u.error);l=d+2}return o.hasHeader("content-length")?(a=o.getHeader("content-length"),o.body=t.substr(c,a)):o.body=t.substring(c),o}h.warn('error parsing first line of SIP message: "'+s+'"')}else h.warn("no CRLF found, not a SIP message, discarded")},e.Parser=t}},function(e,t,n){"use strict";e.exports=function(e){var t,n,r,i;function o(t){var n=t.ua.configuration.hackAllowUnregisteredOptionTags,r=[],i={};return t.method===e.C.REGISTER?r.push("path","gruu"):t.method===e.C.INVITE&&(t.ua.contact.pub_gruu||t.ua.contact.temp_gruu)&&r.push("gruu"),t.ua.configuration.rel100===e.C.supported.SUPPORTED&&r.push("100rel"),t.ua.configuration.replaces===e.C.supported.SUPPORTED&&r.push("replaces"),r.push("outbound"),"Supported: "+(r=(r=r.concat(t.ua.configuration.extraSupported)).filter((function(t){var r=e.C.OPTION_TAGS[t],o=!i[t];return i[t]=!0,(r||n)&&o}))).join(", ")+"\r\n"}(t=function(t,n,r,i,o,s){var a,c,u,l,d,h;if(i=i||{},!t||!n||!r)return null;this.logger=r.getLogger("sip.sipmessage"),this.ua=r,this.headers={},this.method=t,this.ruri=n,this.body=s,this.extraHeaders=(o||[]).slice(),this.statusCode=i.status_code,this.reasonPhrase=i.reason_phrase,i.route_set?this.setHeader("route",i.route_set):r.configuration.usePreloadedRoute&&this.setHeader("route",r.transport.server.sip_uri),this.setHeader("via",""),this.setHeader("max-forwards",e.UA.C.MAX_FORWARDS),d=i.to_uri||n,a=i.to_displayName||0===i.to_displayName?'"'+i.to_displayName+'" ':"",a+="<"+(d&&d.toRaw?d.toRaw():d)+">",a+=i.to_tag?";tag="+i.to_tag:"",this.to=new e.NameAddrHeader.parse(a),this.setHeader("to",a),h=i.from_uri||r.configuration.uri,c=i.from_displayName||0===i.from_displayName?'"'+i.from_displayName+'" ':r.configuration.displayName?'"'+r.configuration.displayName+'" ':"",c+="<"+(h&&h.toRaw?h.toRaw():h)+">;tag=",c+=i.from_tag||e.Utils.newTag(),this.from=new e.NameAddrHeader.parse(c),this.setHeader("from",c),u=i.call_id||r.configuration.sipjsId+e.Utils.createRandomToken(15),this.call_id=u,this.setHeader("call-id",u),l=i.cseq||Math.floor(1e4*Math.random()),this.cseq=l,this.setHeader("cseq",l+" "+t)}).prototype={setHeader:function(t,n){this.headers[e.Utils.headerize(t)]=n instanceof Array?n:[n]},getHeader:function(t){var n,r,i=this.extraHeaders.length,o=this.headers[e.Utils.headerize(t)];if(o){if(o[0])return o[0]}else for(n=new RegExp("^\\s*"+t+"\\s*:","i"),r=0;r<i;r++)if(o=this.extraHeaders[r],n.test(o))return o.substring(o.indexOf(":")+1).trim()},getHeaders:function(t){var n,r,i,o=this.headers[e.Utils.headerize(t)],s=[];if(o){for(r=o.length,n=0;n<r;n++)s.push(o[n]);return s}for(r=this.extraHeaders.length,i=new RegExp("^\\s*"+t+"\\s*:","i"),n=0;n<r;n++)o=this.extraHeaders[n],i.test(o)&&s.push(o.substring(o.indexOf(":")+1).trim());return s},hasHeader:function(t){var n,r,i=this.extraHeaders.length;if(this.headers[e.Utils.headerize(t)])return!0;for(n=new RegExp("^\\s*"+t+"\\s*:","i"),r=0;r<i;r++)if(n.test(this.extraHeaders[r]))return!0;return!1},toString:function(){var t,n,r,i="";for(t in i+=this.method+" "+(this.ruri.toRaw?this.ruri.toRaw():this.ruri)+" SIP/2.0\r\n",this.headers)for(n=this.headers[t].length,r=0;r<n;r++)i+=t+": "+this.headers[t][r]+"\r\n";for(n=this.extraHeaders.length,r=0;r<n;r++)i+=this.extraHeaders[r].trim()+"\r\n";return i+=o(this),i+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",this.body?"string"==typeof this.body?(i+="Content-Length: "+(n=e.Utils.str_utf8_length(this.body))+"\r\n\r\n",i+=this.body):this.body.body&&this.body.contentType?(n=e.Utils.str_utf8_length(this.body.body),i+="Content-Type: "+this.body.contentType+"\r\n",i+="Content-Length: "+n+"\r\n\r\n",i+=this.body.body):i+="Content-Length: 0\r\n\r\n":i+="Content-Length: 0\r\n\r\n",i}},(n=function(){this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null}).prototype={addHeader:function(t,n){var r={raw:n};t=e.Utils.headerize(t),this.headers[t]?this.headers[t].push(r):this.headers[t]=[r]},getHeader:function(t){var n=this.headers[e.Utils.headerize(t)];if(n)return n[0]?n[0].raw:void 0},getHeaders:function(t){var n,r,i=this.headers[e.Utils.headerize(t)],o=[];if(!i)return[];for(r=i.length,n=0;n<r;n++)o.push(i[n].raw);return o},hasHeader:function(t){return!!this.headers[e.Utils.headerize(t)]},parseHeader:function(t,n){var r,i,o;if(t=e.Utils.headerize(t),n=n||0,this.headers[t]){if(!(n>=this.headers[t].length))return i=(r=this.headers[t][n]).raw,r.parsed?r.parsed:-1===(o=e.Grammar.parse(i,t.replace(/-/g,"_")))?(this.headers[t].splice(n,1),void this.logger.warn('error parsing "'+t+'" header field with value "'+i+'"')):(r.parsed=o,o);this.logger.log('not so many "'+t+'" headers present')}else this.logger.log('header "'+t+'" not present')},s:function(e,t){return this.parseHeader(e,t)},setHeader:function(t,n){var r={raw:n};this.headers[e.Utils.headerize(t)]=[r]},toString:function(){return this.data}},((r=function(e){this.logger=e.getLogger("sip.sipmessage"),this.ua=e,this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null}).prototype=new n).reply=function(t,n,r,i,s,a){var c,u,l,d,h,f=this.getHeader("To"),p=0,m=0;if(h=e.Utils.buildStatusLine(t,n),r=(r||[]).slice(),this.method===e.C.INVITE&&t>100&&t<=200)for(l=(c=this.getHeaders("record-route")).length;p<l;p++)h+="Record-Route: "+c[p]+"\r\n";for(l=(u=this.getHeaders("via")).length;m<l;m++)h+="Via: "+u[m]+"\r\n";for(!this.to_tag&&t>100?f+=";tag="+e.Utils.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(f+=";tag="+this.to_tag),h+="To: "+f+"\r\n",h+="From: "+this.getHeader("From")+"\r\n",h+="Call-ID: "+this.call_id+"\r\n",h+="CSeq: "+this.cseq+" "+this.method+"\r\n",l=r.length,d=0;d<l;d++)h+=r[d].trim()+"\r\n";return h+=o(this),h+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",i?"string"==typeof i?(h+="Content-Type: application/sdp\r\n",h+="Content-Length: "+(l=e.Utils.str_utf8_length(i))+"\r\n\r\n",h+=i):i.body&&i.contentType?(l=e.Utils.str_utf8_length(i.body),h+="Content-Type: "+i.contentType+"\r\n",h+="Content-Length: "+l+"\r\n\r\n",h+=i.body):h+="Content-Length: 0\r\n\r\n":h+="Content-Length: 0\r\n\r\n",this.server_transaction.receiveResponse(t,h).then(s,a),h},r.prototype.reply_sl=function(t,n){var r,i,o=0,s=this.getHeaders("via"),a=s.length;for(i=e.Utils.buildStatusLine(t,n);o<a;o++)i+="Via: "+s[o]+"\r\n";r=this.getHeader("To"),!this.to_tag&&t>100?r+=";tag="+e.Utils.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(r+=";tag="+this.to_tag),i+="To: "+r+"\r\n",i+="From: "+this.getHeader("From")+"\r\n",i+="Call-ID: "+this.call_id+"\r\n",i+="CSeq: "+this.cseq+" "+this.method+"\r\n",i+="User-Agent: "+this.ua.configuration.userAgentString+"\r\n",i+="Content-Length: 0\r\n\r\n",this.transport.send(i)},(i=function(e){this.logger=e.getLogger("sip.sipmessage"),this.headers={},this.status_code=null,this.reason_phrase=null}).prototype=new n,e.OutgoingRequest=t,e.IncomingRequest=r,e.IncomingResponse=i}},function(e,t,n){"use strict";e.exports=function(e){var t;(t=function(t,n,r,i,o,s){var a,c,u,l;if(!r)throw new TypeError('missing or invalid "host" parameter');for(a in t=t||e.C.SIP,this.parameters={},this.headers={},o)this.setParam(a,o[a]);for(c in s)this.setHeader(c,s[c]);u={scheme:t,user:n,host:r,port:i},l={scheme:t.toLowerCase(),user:n,host:r.toLowerCase(),port:i},Object.defineProperties(this,{_normal:{get:function(){return l}},_raw:{get:function(){return u}},scheme:{get:function(){return l.scheme},set:function(e){u.scheme=e,l.scheme=e.toLowerCase()}},user:{get:function(){return l.user},set:function(e){l.user=u.user=e}},host:{get:function(){return l.host},set:function(e){u.host=e,l.host=e.toLowerCase()}},aor:{get:function(){return l.user+"@"+l.host}},port:{get:function(){return l.port},set:function(e){l.port=u.port=0===e?e:parseInt(e,10)||null}}})}).prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]=null==t?null:t.toString())},getParam:function(e){if(e)return this.parameters[e.toLowerCase()]},hasParam:function(e){if(e)return!!this.parameters.hasOwnProperty(e.toLowerCase())},deleteParam:function(e){var t;if(e=e.toLowerCase(),this.parameters.hasOwnProperty(e))return t=this.parameters[e],delete this.parameters[e],t},clearParams:function(){this.parameters={}},setHeader:function(t,n){this.headers[e.Utils.headerize(t)]=n instanceof Array?n:[n]},getHeader:function(t){if(t)return this.headers[e.Utils.headerize(t)]},hasHeader:function(t){if(t)return!!this.headers.hasOwnProperty(e.Utils.headerize(t))},deleteHeader:function(t){var n;if(t=e.Utils.headerize(t),this.headers.hasOwnProperty(t))return n=this.headers[t],delete this.headers[t],n},clearHeaders:function(){this.headers={}},clone:function(){return new t(this._raw.scheme,this._raw.user,this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))},toRaw:function(){return this._toString(this._raw)},toString:function(){return this._toString(this._normal)},_toString:function(t){var n,r,i,o,s=[];for(r in o=t.scheme+":",t.scheme.toLowerCase().match("^sips?$")||(o+="//"),t.user&&(o+=e.Utils.escapeUser(t.user)+"@"),o+=t.host,(t.port||0===t.port)&&(o+=":"+t.port),this.parameters)o+=";"+r,null!==this.parameters[r]&&(o+="="+this.parameters[r]);for(n in this.headers)for(i in this.headers[n])s.push(n+"="+this.headers[n][i]);return s.length>0&&(o+="?"+s.join("&")),o}},t.parse=function(t){return-1!==(t=e.Grammar.parse(t,"SIP_URI"))?t:void 0},e.URI=t}},function(e,t,n){"use strict";e.exports=function(e){var t;(t=function(t,n,r){var i;if(!(t&&t instanceof e.URI))throw new TypeError('missing or invalid "uri" parameter');for(i in this.uri=t,this.parameters={},r)this.setParam(i,r[i]);Object.defineProperties(this,{friendlyName:{get:function(){return this.displayName||t.aor}},displayName:{get:function(){return n},set:function(e){n=0===e?"0":e}}})}).prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]=null==t?null:t.toString())},getParam:e.URI.prototype.getParam,hasParam:e.URI.prototype.hasParam,deleteParam:e.URI.prototype.deleteParam,clearParams:e.URI.prototype.clearParams,clone:function(){return new t(this.uri.clone(),this.displayName,JSON.parse(JSON.stringify(this.parameters)))},toString:function(){var e,t;for(t in e=this.displayName||0===this.displayName?'"'+this.displayName+'" ':"",e+="<"+this.uri.toString()+">",this.parameters)e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]);return e}},t.parse=function(t){return-1!==(t=e.Grammar.parse(t,"Name_Addr_Header"))?t:void 0},e.NameAddrHeader=t}},function(e,t,n){"use strict";e.exports=function(e){var t={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"};function n(e,t,n){var r;return r="SIP/2.0/"+(e.ua.configuration.hackViaTcp?"TCP":t.server.scheme),r+=" "+e.ua.configuration.viaHost+";branch="+n,e.ua.configuration.forceRport&&(r+=";rport"),r}var r=function(e,r,i){var o;this.type=t.NON_INVITE_CLIENT,this.transport=i,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=r,this.logger=e.ua.getLogger("sip.transaction.nict",this.id),o=n(e,i,this.id),this.request.setHeader("via",o),this.request_sender.ua.newTransaction(this)};(r.prototype=Object.create(e.EventEmitter.prototype)).stateChanged=function(e){this.state=e,this.emit("stateChanged")},r.prototype.send=function(){this.stateChanged(t.STATUS_TRYING),this.F=e.Timers.setTimeout(this.timer_F.bind(this),e.Timers.TIMER_F),this.transport.send(this.request).catch(function(){this.onTransportError()}.bind(this))},r.prototype.onTransportError=function(){this.logger.log("transport error occurred, deleting non-INVITE client transaction "+this.id),e.Timers.clearTimeout(this.F),e.Timers.clearTimeout(this.K),this.stateChanged(t.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onTransportError()},r.prototype.timer_F=function(){this.logger.debug("Timer F expired for non-INVITE client transaction "+this.id),this.stateChanged(t.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout()},r.prototype.timer_K=function(){this.stateChanged(t.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},r.prototype.receiveResponse=function(n){var r=n.status_code;if(r<200)switch(this.state){case t.STATUS_TRYING:case t.STATUS_PROCEEDING:this.stateChanged(t.STATUS_PROCEEDING),this.request_sender.receiveResponse(n)}else switch(this.state){case t.STATUS_TRYING:case t.STATUS_PROCEEDING:this.stateChanged(t.STATUS_COMPLETED),e.Timers.clearTimeout(this.F),408===r?this.request_sender.onRequestTimeout():this.request_sender.receiveResponse(n),this.K=e.Timers.setTimeout(this.timer_K.bind(this),e.Timers.TIMER_K)}};var i=function(e,r,i){var o,s=this;this.type=t.INVITE_CLIENT,this.transport=i,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=r,this.logger=e.ua.getLogger("sip.transaction.ict",this.id),o=n(e,i,this.id),this.request.setHeader("via",o),this.request_sender.ua.newTransaction(this),this.request.cancel=function(e,t){for(var n=(t=(t||[]).slice()).length,r=null,i=0;i<n;i++)r=(r||"")+t[i].trim()+"\r\n";s.cancel_request(s,e,r)}};(i.prototype=Object.create(e.EventEmitter.prototype)).stateChanged=function(e){this.state=e,this.emit("stateChanged")},i.prototype.send=function(){this.stateChanged(t.STATUS_CALLING),this.B=e.Timers.setTimeout(this.timer_B.bind(this),e.Timers.TIMER_B),this.transport.send(this.request).catch(function(){this.onTransportError()}.bind(this))},i.prototype.onTransportError=function(){this.logger.log("transport error occurred, deleting INVITE client transaction "+this.id),e.Timers.clearTimeout(this.B),e.Timers.clearTimeout(this.D),e.Timers.clearTimeout(this.M),this.stateChanged(t.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.state!==t.STATUS_ACCEPTED&&this.request_sender.onTransportError()},i.prototype.timer_M=function(){this.logger.debug("Timer M expired for INVITE client transaction "+this.id),this.state===t.STATUS_ACCEPTED&&(e.Timers.clearTimeout(this.B),this.stateChanged(t.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this))},i.prototype.timer_B=function(){this.logger.debug("Timer B expired for INVITE client transaction "+this.id),this.state===t.STATUS_CALLING&&(this.stateChanged(t.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout())},i.prototype.timer_D=function(){this.logger.debug("Timer D expired for INVITE client transaction "+this.id),e.Timers.clearTimeout(this.B),this.stateChanged(t.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},i.prototype.sendACK=function(t){var n,r=this;t=t||{},n=this.response.getHeader("contact")?this.response.parseHeader("contact").uri:this.request.ruri;var i=new e.OutgoingRequest("ACK",n,this.request.ua,{cseq:this.response.cseq,call_id:this.response.call_id,from_uri:this.response.from.uri,from_tag:this.response.from_tag,to_uri:this.response.to.uri,to_tag:this.response.to_tag,route_set:this.response.getHeaders("record-route").reverse()},t.extraHeaders||[],t.body);return this.ackSender=new e.RequestSender({request:i,onRequestTimeout:this.request_sender.applicant.applicant?this.request_sender.applicant.applicant.onRequestTimeout:function(){r.logger.warn("ACK Request timed out")},onTransportError:this.request_sender.applicant.applicant?this.request_sender.applicant.applicant.onRequestTransportError:function(){r.logger.warn("ACK Request had a transport error")},receiveResponse:t.receiveResponse||function(){r.logger.warn("Received a response to an ACK which was unexpected. Dropping Response.")}},this.request.ua).send(),i},i.prototype.cancel_request=function(n,r,i){var o=n.request;this.cancel=e.C.CANCEL+" "+o.ruri+" SIP/2.0\r\n",this.cancel+="Via: "+o.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.cancel+="Route: "+o.headers.Route.toString()+"\r\n"),this.cancel+="To: "+o.headers.To.toString()+"\r\n",this.cancel+="From: "+o.headers.From.toString()+"\r\n",this.cancel+="Call-ID: "+o.headers["Call-ID"].toString()+"\r\n",this.cancel+="Max-Forwards: "+e.UA.C.MAX_FORWARDS+"\r\n",this.cancel+="CSeq: "+o.headers.CSeq.toString().split(" ")[0]+" CANCEL\r\n",r&&(this.cancel+="Reason: "+r+"\r\n"),i&&(this.cancel+=i),this.cancel+="Content-Length: 0\r\n\r\n",this.state===t.STATUS_PROCEEDING&&this.transport.send(this.cancel)},i.prototype.receiveResponse=function(n){var r=n.status_code;if(n.transaction=this,this.response&&this.response.status_code===n.status_code&&this.response.cseq===n.cseq)return this.logger.debug("ICT Received a retransmission for cseq: "+n.cseq),void(this.ackSender&&this.ackSender.send());if(this.response=n,r>=100&&r<=199)switch(this.state){case t.STATUS_CALLING:this.stateChanged(t.STATUS_PROCEEDING),this.request_sender.receiveResponse(n),this.cancel&&this.transport.send(this.cancel);break;case t.STATUS_PROCEEDING:this.request_sender.receiveResponse(n)}else if(r>=200&&r<=299)switch(this.state){case t.STATUS_CALLING:case t.STATUS_PROCEEDING:this.stateChanged(t.STATUS_ACCEPTED),this.M=e.Timers.setTimeout(this.timer_M.bind(this),e.Timers.TIMER_M),this.request_sender.receiveResponse(n);break;case t.STATUS_ACCEPTED:this.request_sender.receiveResponse(n)}else if(r>=300&&r<=699)switch(this.state){case t.STATUS_CALLING:case t.STATUS_PROCEEDING:this.stateChanged(t.STATUS_COMPLETED),this.sendACK(),this.request_sender.receiveResponse(n);break;case t.STATUS_COMPLETED:this.sendACK()}};var o=function(e,t,r){var i;this.transport=r,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,this.logger=e.ua.getLogger("sip.transaction.nict",this.id),i=n(e,r,this.id),this.request.setHeader("via",i)};(o.prototype=Object.create(e.EventEmitter.prototype)).send=function(){this.transport.send(this.request).catch(function(){this.onTransportError()}.bind(this))},o.prototype.onTransportError=function(){this.logger.log("transport error occurred, for an ACK client transaction "+this.id),this.request_sender.onTransportError()};var s=function(e,n){this.type=t.NON_INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=n.transport,this.ua=n,this.last_response="",e.server_transaction=this,this.logger=n.getLogger("sip.transaction.nist",this.id),this.state=t.STATUS_TRYING,n.newTransaction(this)};(s.prototype=Object.create(e.EventEmitter.prototype)).stateChanged=function(e){this.state=e,this.emit("stateChanged")},s.prototype.timer_J=function(){this.logger.debug("Timer J expired for non-INVITE server transaction "+this.id),this.stateChanged(t.STATUS_TERMINATED),this.ua.destroyTransaction(this)},s.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,this.logger.log("transport error occurred, deleting non-INVITE server transaction "+this.id),e.Timers.clearTimeout(this.J),this.stateChanged(t.STATUS_TERMINATED),this.ua.destroyTransaction(this))},s.prototype.receiveResponse=function(n,r){var i=e.Utils.defer();if(100===n)switch(this.state){case t.STATUS_TRYING:this.stateChanged(t.STATUS_PROCEEDING),this.transport.send(r).catch(function(){this.onTransportError()}.bind(this));break;case t.STATUS_PROCEEDING:this.last_response=r,this.transport.send(r).then((function(){i.resolve()})).catch(function(){this.onTransportError(),i.reject()}.bind(this))}else if(n>=200&&n<=699)switch(this.state){case t.STATUS_TRYING:case t.STATUS_PROCEEDING:this.stateChanged(t.STATUS_COMPLETED),this.last_response=r,this.J=e.Timers.setTimeout(this.timer_J.bind(this),e.Timers.TIMER_J),this.transport.send(r).then((function(){i.resolve()})).catch(function(){this.onTransportError(),i.reject()}.bind(this))}return i.promise};var a=function(e,n){this.type=t.INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=n.transport,this.ua=n,this.last_response="",e.server_transaction=this,this.logger=n.getLogger("sip.transaction.ist",this.id),this.state=t.STATUS_PROCEEDING,n.newTransaction(this),this.resendProvisionalTimer=null,e.reply(100)};(a.prototype=Object.create(e.EventEmitter.prototype)).stateChanged=function(e){this.state=e,this.emit("stateChanged")},a.prototype.timer_H=function(){this.logger.debug("Timer H expired for INVITE server transaction "+this.id),this.state===t.STATUS_COMPLETED&&this.logger.warn("transactions","ACK for INVITE server transaction was never received, call will be terminated"),this.stateChanged(t.STATUS_TERMINATED),this.ua.destroyTransaction(this)},a.prototype.timer_I=function(){this.stateChanged(t.STATUS_TERMINATED),this.ua.destroyTransaction(this)},a.prototype.timer_L=function(){this.logger.debug("Timer L expired for INVITE server transaction "+this.id),this.state===t.STATUS_ACCEPTED&&(this.stateChanged(t.STATUS_TERMINATED),this.ua.destroyTransaction(this))},a.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,this.logger.log("transport error occurred, deleting INVITE server transaction "+this.id),null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),e.Timers.clearTimeout(this.L),e.Timers.clearTimeout(this.H),e.Timers.clearTimeout(this.I),this.stateChanged(t.STATUS_TERMINATED),this.ua.destroyTransaction(this))},a.prototype.resend_provisional=function(){this.transport.send(this.request).catch(function(){this.onTransportError()}.bind(this))},a.prototype.receiveResponse=function(n,r){var i=this,o=e.Utils.defer();if(n>=100&&n<=199)switch(this.state){case t.STATUS_PROCEEDING:this.transport.send(r).catch(function(){this.onTransportError()}.bind(this)),this.last_response=r}if(n>100&&n<=199&&this.state===t.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=e.Timers.setInterval(i.resend_provisional.bind(i),e.Timers.PROVISIONAL_RESPONSE_INTERVAL));else if(n>=200&&n<=299)switch(this.state){case t.STATUS_PROCEEDING:this.stateChanged(t.STATUS_ACCEPTED),this.last_response=r,this.L=e.Timers.setTimeout(i.timer_L.bind(i),e.Timers.TIMER_L),null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case t.STATUS_ACCEPTED:this.transport.send(r).then((function(){o.resolve()})).catch(function(e){this.logger.error(e),this.onTransportError(),o.reject()}.bind(this))}else if(n>=300&&n<=699)switch(this.state){case t.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(e.Timers.clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(r).then(function(){this.stateChanged(t.STATUS_COMPLETED),this.H=e.Timers.setTimeout(i.timer_H.bind(i),e.Timers.TIMER_H),o.resolve()}.bind(this)).catch(function(e){this.logger.error(e),this.onTransportError(),o.reject()}.bind(this))}return o.promise},e.Transactions={C:t,checkTransaction:function(n,r){var i;switch(r.method){case e.C.INVITE:if(i=n.transactions.ist[r.via_branch]){switch(i.state){case t.STATUS_PROCEEDING:i.transport.send(i.last_response)}return!0}break;case e.C.ACK:if(!(i=n.transactions.ist[r.via_branch]))return!1;if(i.state===t.STATUS_ACCEPTED)return!1;if(i.state===t.STATUS_COMPLETED)return i.stateChanged(t.STATUS_CONFIRMED),i.I=e.Timers.setTimeout(i.timer_I.bind(i),e.Timers.TIMER_I),!0;break;case e.C.CANCEL:return(i=n.transactions.ist[r.via_branch])?(r.reply_sl(200),i.state!==t.STATUS_PROCEEDING):(r.reply_sl(481),!0);default:if(i=n.transactions.nist[r.via_branch]){switch(i.state){case t.STATUS_TRYING:break;case t.STATUS_PROCEEDING:case t.STATUS_COMPLETED:i.transport.send(i.last_response)}return!0}}},NonInviteClientTransaction:r,InviteClientTransaction:i,AckClientTransaction:o,NonInviteServerTransaction:s,InviteServerTransaction:a}}},function(e,t,n){"use strict";e.exports=function(e){var t,r=n(17)(e),i={STATUS_EARLY:1,STATUS_CONFIRMED:2};(t=function(t,n,r,o){var s;if(this.uac_pending_reply=!1,this.uas_pending_reply=!1,!n.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};o=n instanceof e.IncomingResponse?n.status_code<200?i.STATUS_EARLY:i.STATUS_CONFIRMED:o||i.STATUS_CONFIRMED,s=n.parseHeader("contact"),"UAS"===r?(this.id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=o,this.remote_seqnum=n.cseq,this.local_uri=n.parseHeader("to").uri,this.remote_uri=n.parseHeader("from").uri,this.remote_target=s.uri,this.route_set=n.getHeaders("record-route"),this.invite_seqnum=n.cseq,this.local_seqnum=n.cseq):"UAC"===r&&(this.id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=o,this.invite_seqnum=n.cseq,this.local_seqnum=n.cseq,this.local_uri=n.parseHeader("from").uri,this.pracked=[],this.remote_uri=n.parseHeader("to").uri,this.remote_target=s.uri,this.route_set=n.getHeaders("record-route").reverse()),this.logger=t.ua.getLogger("sip.dialog",this.id.toString()),this.owner=t,t.ua.dialogs[this.id.toString()]=this,this.logger.log("new "+r+" dialog created with status "+(this.state===i.STATUS_EARLY?"EARLY":"CONFIRMED")),t.emit("dialog",this)}).prototype={update:function(e,t){this.state=i.STATUS_CONFIRMED,this.logger.log("dialog "+this.id.toString()+"  changed to CONFIRMED state"),"UAC"===t&&(this.route_set=e.getHeaders("record-route").reverse())},terminate:function(){this.logger.log("dialog "+this.id.toString()+" deleted"),this.sessionDescriptionHandler&&this.state!==i.STATUS_CONFIRMED&&this.sessionDescriptionHandler.close(),delete this.owner.ua.dialogs[this.id.toString()]},createRequest:function(t,n,r){var i,o;return n=(n||[]).slice(),this.local_seqnum||(this.local_seqnum=Math.floor(1e4*Math.random())),i=t===e.C.CANCEL||t===e.C.ACK?this.invite_seqnum:this.local_seqnum+=1,(o=new e.OutgoingRequest(t,this.remote_target,this.owner.ua,{cseq:i,call_id:this.id.call_id,from_uri:this.local_uri,from_tag:this.id.local_tag,to_uri:this.remote_uri,to_tag:this.id.remote_tag,route_set:this.route_set},n,r)).dialog=this,o},checkInDialogRequest:function(t){var n=this;if(this.remote_seqnum){if(t.cseq<this.remote_seqnum)return t.method!==e.C.ACK&&t.reply(500),t.cseq===this.invite_seqnum}else this.remote_seqnum=t.cseq;switch(t.method){case e.C.INVITE:if(!0===this.uac_pending_reply)t.reply(491);else{if(!0===this.uas_pending_reply&&t.cseq>this.remote_seqnum){var r=1+(10*Math.random()|0);return t.reply(500,null,["Retry-After:"+r]),this.remote_seqnum=t.cseq,!1}this.uas_pending_reply=!0,t.server_transaction.on("stateChanged",(function t(){this.state!==e.Transactions.C.STATUS_ACCEPTED&&this.state!==e.Transactions.C.STATUS_COMPLETED&&this.state!==e.Transactions.C.STATUS_TERMINATED||(this.removeListener("stateChanged",t),n.uas_pending_reply=!1)}))}t.hasHeader("contact")&&t.server_transaction.on("stateChanged",(function(){this.state===e.Transactions.C.STATUS_ACCEPTED&&(n.remote_target=t.parseHeader("contact").uri)}));break;case e.C.NOTIFY:t.hasHeader("contact")&&t.server_transaction.on("stateChanged",(function(){this.state===e.Transactions.C.STATUS_COMPLETED&&(n.remote_target=t.parseHeader("contact").uri)}))}return t.cseq>this.remote_seqnum&&(this.remote_seqnum=t.cseq),!0},sendRequest:function(e,t,n){var i=((n=n||{}).extraHeaders||[]).slice(),o=null;n.body&&(n.body.body?o=n.body:((o={}).body=n.body,n.contentType&&(o.contentType=n.contentType)));var s=this.createRequest(t,i,o);return new r(this,e,s).send(),s},receiveRequest:function(e){this.checkInDialogRequest(e)&&this.owner.receiveRequest(e)}},t.C=i,e.Dialog=t}},function(e,t,n){"use strict";e.exports=function(e){var t;return(t=function(e,t,n){this.dialog=e,this.applicant=t,this.request=n,this.reattempt=!1,this.reattemptTimer=null}).prototype={send:function(){var t=this,n=new e.RequestSender(this,this.dialog.owner.ua);n.send(),this.request.method===e.C.INVITE&&n.clientTransaction.state!==e.Transactions.C.STATUS_TERMINATED&&(this.dialog.uac_pending_reply=!0,n.clientTransaction.on("stateChanged",(function n(){this.state!==e.Transactions.C.STATUS_ACCEPTED&&this.state!==e.Transactions.C.STATUS_COMPLETED&&this.state!==e.Transactions.C.STATUS_TERMINATED||(this.removeListener("stateChanged",n),t.dialog.uac_pending_reply=!1)})))},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(t){var n=this;408===t.status_code||481===t.status_code?this.applicant.onDialogError(t):t.method===e.C.INVITE&&491===t.status_code?this.reattempt?this.applicant.receiveResponse(t):(this.request.cseq.value=this.dialog.local_seqnum+=1,this.reattemptTimer=e.Timers.setTimeout((function(){n.applicant.owner.status!==e.Session.C.STATUS_TERMINATED&&(n.reattempt=!0,n.request_sender.send())}),this.getReattemptTimeout())):this.applicant.receiveResponse(t)}},t}},function(e,t,n){"use strict";e.exports=function(e){var t;(t=function(t,n){this.logger=n.getLogger("sip.requestsender"),this.ua=n,this.applicant=t,this.method=t.request.method,this.request=t.request,this.credentials=null,this.challenged=!1,this.staled=!1,n.status!==e.UA.C.STATUS_USER_CLOSED||this.method===e.C.BYE&&this.method===e.C.ACK||this.onTransportError()}).prototype={send:function(){switch(this.method){case"INVITE":this.clientTransaction=new e.Transactions.InviteClientTransaction(this,this.request,this.ua.transport);break;case"ACK":this.clientTransaction=new e.Transactions.AckClientTransaction(this,this.request,this.ua.transport);break;default:this.clientTransaction=new e.Transactions.NonInviteClientTransaction(this,this.request,this.ua.transport)}return this.clientTransaction.send(),this.clientTransaction},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(t){var n,r,i,o=t.status_code;if(401===o||407===o){if(401===t.status_code?(r=t.parseHeader("www-authenticate"),i="authorization"):(r=t.parseHeader("proxy-authenticate"),i="proxy-authorization"),!r)return this.logger.warn(t.status_code+" with wrong or missing challenge, cannot authenticate"),void this.applicant.receiveResponse(t);if(!this.challenged||!this.staled&&!0===r.stale){if(this.credentials||(this.credentials=this.ua.configuration.authenticationFactory(this.ua)),!this.credentials.authenticate(this.request,r))return void this.applicant.receiveResponse(t);this.challenged=!0,r.stale&&(this.staled=!0),t.method===e.C.REGISTER?n=this.applicant.cseq+=1:this.request.dialog?n=this.request.dialog.local_seqnum+=1:(n=this.request.cseq+1,this.request.cseq=n),this.request.setHeader("cseq",n+" "+this.method),this.request.setHeader(i,this.credentials.toString()),this.send()}else this.applicant.receiveResponse(t)}else this.applicant.receiveResponse(t)}},e.RequestSender=t}},function(e,t,n){"use strict";e.exports=function(e){var t;(t=function(t){var n={};this.registrar=t.configuration.registrarServer,this.expires=t.configuration.registerExpires,this.contact=t.contact.toString(),this.contact+=";reg-id=1",this.contact+=';+sip.instance="<urn:uuid:'+t.configuration.instanceId+'>"',this.call_id=e.Utils.createRandomToken(22),this.cseq=Math.floor(1e4*Math.random()),this.to_uri=t.configuration.uri,n.to_uri=this.to_uri,n.to_displayName=t.configuration.displayName,n.call_id=this.call_id,n.cseq=this.cseq,e.Utils.augment(this,e.ClientContext,[t,"REGISTER",this.registrar,{params:n}]),this.registrationTimer=null,this.registrationExpiredTimer=null,this.registered=!1,this.logger=t.getLogger("sip.registercontext"),t.on("transportCreated",function(e){e.on("disconnected",this.onTransportDisconnected.bind(this))}.bind(this))}).prototype=Object.create({},{register:{writable:!0,value:function(t){var n,r=this;this.options=t||{},(n=(this.options.extraHeaders||[]).slice()).push("Contact: "+this.contact+";expires="+this.expires),n.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.closeHeaders=this.options.closeWithHeaders?(this.options.extraHeaders||[]).slice():[],this.receiveResponse=function(t){var n,i,o,s=t.getHeaders("contact").length;if(t.cseq===this.cseq)switch(null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t);break;case/^2[0-9]{2}$/.test(t.status_code):if(this.emit("accepted",t),t.hasHeader("expires")&&(i=t.getHeader("expires")),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),!s){this.logger.warn("no Contact header in response to REGISTER, response ignored");break}for(;s--;){if((n=t.parseHeader("contact",s)).uri.user===this.ua.contact.uri.user){i=n.getParam("expires");break}n=null}if(!n){this.logger.warn("no Contact header pointing to us, response ignored");break}i||(i=this.expires),this.registrationTimer=e.Timers.setTimeout((function(){r.registrationTimer=null,r.register(r.options)}),1e3*i-3e3),this.registrationExpiredTimer=e.Timers.setTimeout((function(){r.logger.warn("registration expired"),r.registered&&r.unregistered(null,e.C.causes.EXPIRES)}),1e3*i),n.hasParam("temp-gruu")&&(this.ua.contact.temp_gruu=e.URI.parse(n.getParam("temp-gruu").replace(/"/g,""))),n.hasParam("pub-gruu")&&(this.ua.contact.pub_gruu=e.URI.parse(n.getParam("pub-gruu").replace(/"/g,""))),this.registered=!0,this.emit("registered",t||null);break;case/^423$/.test(t.status_code):t.hasHeader("min-expires")?(this.expires=t.getHeader("min-expires"),this.register(this.options)):(this.logger.warn("423 response received for REGISTER without Min-Expires"),this.registrationFailure(t,e.C.causes.SIP_FAILURE_CODE));break;default:o=e.Utils.sipErrorCause(t.status_code),this.registrationFailure(t,o)}},this.onRequestTimeout=function(){this.registrationFailure(null,e.C.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.registrationFailure(null,e.C.causes.CONNECTION_ERROR)},this.cseq++,this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=n,this.send()}},registrationFailure:{writable:!0,value:function(e,t){this.emit("failed",e||null,t||null)}},onTransportDisconnected:{writable:!0,value:function(){this.registered_before=this.registered,null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),this.registered&&this.unregistered(null,e.C.causes.CONNECTION_ERROR)}},onTransportConnected:{writable:!0,value:function(){this.register(this.options)}},close:{writable:!0,value:function(){var e={all:!1,extraHeaders:this.closeHeaders};this.registered_before=this.registered,this.registered&&this.unregister(e)}},unregister:{writable:!0,value:function(t){var n;t=t||{},this.registered||t.all||this.logger.warn("Already unregistered, but sending an unregister anyways."),n=(t.extraHeaders||[]).slice(),this.registered=!1,null!==this.registrationTimer&&(e.Timers.clearTimeout(this.registrationTimer),this.registrationTimer=null),t.all?(n.push("Contact: *"),n.push("Expires: 0")):n.push("Contact: "+this.contact+";expires=0"),this.receiveResponse=function(t){var n;switch(!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t);break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("accepted",t),null!==this.registrationExpiredTimer&&(e.Timers.clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=null),this.unregistered(t);break;default:n=e.Utils.sipErrorCause(t.status_code),this.unregistered(t,n)}},this.onRequestTimeout=function(){},this.cseq++,this.request.cseq=this.cseq,this.request.setHeader("cseq",this.cseq+" REGISTER"),this.request.extraHeaders=n,this.send()}},unregistered:{writable:!0,value:function(e,t){this.registered=!1,this.emit("unregistered",e||null,t||null)}}}),e.RegisterContext=t}},function(e,t,n){"use strict";e.exports=function(e){var t=function(){};return t.prototype=Object.create(e.prototype,{close:{value:function(){}},getDescription:{value:function(e,t){}},hasDescription:{value:function(e){}},holdModifier:{value:function(e){}},setDescription:{value:function(e,t,n){}},sendDtmf:{value:function(e,t){}},getDirection:{value:function(){}}}),t}},function(e,t,n){"use strict";e.exports=function(e){var t;((t=function(t,n,r,i){var o=r;if(void 0===r)throw new TypeError("Not enough arguments");if(this.ua=t,this.logger=t.getLogger("sip.clientcontext"),this.method=n,!(r=t.normalizeTarget(r)))throw new TypeError("Invalid target: "+o);(i=Object.create(i||Object.prototype)).extraHeaders=(i.extraHeaders||[]).slice(),this.request=new e.OutgoingRequest(this.method,r,this.ua,i.params,i.extraHeaders),i.body&&(this.body={},this.body.body=i.body,i.contentType&&(this.body.contentType=i.contentType),this.request.body=this.body),this.localIdentity=this.request.from,this.remoteIdentity=this.request.to,this.data={}}).prototype=Object.create(e.EventEmitter.prototype)).send=function(){return new e.RequestSender(this,this.ua).send(),this},t.prototype.cancel=function(t){(t=t||{}).extraHeaders=(t.extraHeaders||[]).slice();var n=e.Utils.getCancelReason(t.status_code,t.reason_phrase);this.request.cancel(n,t.extraHeaders),this.emit("cancel")},t.prototype.receiveResponse=function(t){var n=e.Utils.getReasonPhrase(t.status_code);switch(!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t,n);break;case/^2[0-9]{2}$/.test(t.status_code):this.ua.applicants[this]&&delete this.ua.applicants[this],this.emit("accepted",t,n);break;default:this.ua.applicants[this]&&delete this.ua.applicants[this],this.emit("rejected",t,n),this.emit("failed",t,n)}},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR)},e.ClientContext=t}},function(e,t,n){"use strict";e.exports=function(e){var t;((t=function(t,n){this.ua=t,this.logger=t.getLogger("sip.servercontext"),this.request=n,n.method===e.C.INVITE?this.transaction=new e.Transactions.InviteServerTransaction(n,t):this.transaction=new e.Transactions.NonInviteServerTransaction(n,t),n.body&&(this.body=n.body),n.hasHeader("Content-Type")&&(this.contentType=n.getHeader("Content-Type")),this.method=n.method,this.data={},this.localIdentity=n.to,this.remoteIdentity=n.from,n.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=new e.NameAddrHeader.parse(n.getHeader("P-Asserted-Identity")))}).prototype=Object.create(e.EventEmitter.prototype)).progress=function(e){return(e=Object.create(e||Object.prototype)).statusCode||(e.statusCode=180),e.minCode=100,e.maxCode=199,e.events=["progress"],this.reply(e)},t.prototype.accept=function(e){return(e=Object.create(e||Object.prototype)).statusCode||(e.statusCode=200),e.minCode=200,e.maxCode=299,e.events=["accepted"],this.reply(e)},t.prototype.reject=function(e){return(e=Object.create(e||Object.prototype)).statusCode||(e.statusCode=480),e.minCode=300,e.maxCode=699,e.events=["rejected","failed"],this.reply(e)},t.prototype.reply=function(t){var n,r=(t=t||{}).statusCode||100,i=t.minCode||100,o=t.maxCode||699,s=e.Utils.getReasonPhrase(r,t.reasonPhrase),a=t.extraHeaders||[],c=t.body,u=t.events||[];if(r<i||r>o)throw new TypeError("Invalid statusCode: "+r);return n=this.request.reply(r,s,a,c),u.forEach((function(e){this.emit(e,n,s)}),this),this},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR)},e.ServerContext=t}},function(e,t,n){"use strict";e.exports=function(e){var t,r,i,o,s,a=n(24)(e),c={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_PRACK:6,STATUS_WAITING_FOR_ACK:7,STATUS_CANCELED:8,STATUS_TERMINATED:9,STATUS_ANSWERED_WAITING_FOR_PRACK:10,STATUS_EARLY_MEDIA:11,STATUS_CONFIRMED:12};(t=function(t){if(this.status=c.STATUS_NULL,this.dialog=null,this.pendingReinvite=!1,this.earlyDialogs={},!t)throw new e.Exceptions.SessionDescriptionHandlerMissing("A session description handler is required for the session to function");this.sessionDescriptionHandlerFactory=t,this.hasOffer=!1,this.hasAnswer=!1,this.timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null,rel1xxTimer:null,prackTimer:null},this.startTime=null,this.endTime=null,this.tones=null,this.local_hold=!1,this.early_sdp=null,this.rel100=e.C.supported.UNSUPPORTED}).prototype={dtmf:function(t,n){var r=[],i=this,o=this.ua.configuration.dtmfType;if(n=n||{},void 0===t)throw new TypeError("Not enough arguments");if(this.status!==c.STATUS_CONFIRMED&&this.status!==c.STATUS_WAITING_FOR_ACK)throw new e.Exceptions.InvalidStateError(this.status);if("string"!=typeof t&&"number"!=typeof t||!t.toString().match(/^[0-9A-D#*,]+$/i))throw new TypeError("Invalid tones: "+t);var s=function t(){var r,o;if(i.status===c.STATUS_TERMINATED||!i.tones||0===i.tones.length)return i.tones=null,this;(r=i.tones.shift()).on("failed",(function(){i.tones=null})),r.send(n),o=r.duration+r.interToneGap,e.Timers.setTimeout(t,o)};if(t=t.toString(),o===e.C.dtmfType.RTP&&(this.sessionDescriptionHandler.sendDtmf(t,n)||(this.logger.warn("Attempt to use dtmfType 'RTP' has failed, falling back to INFO packet method"),o=e.C.dtmfType.INFO)),o===e.C.dtmfType.INFO){for(t=t.split("");t.length>0;)r.push(new a(this,t.shift(),n));if(this.tones)return this.tones=this.tones.concat(r),this;this.tones=r,s()}return this},bye:function(t){var n=(t=Object.create(t||Object.prototype)).statusCode;if(this.status===c.STATUS_TERMINATED)return this.logger.error("Error: Attempted to send BYE in a terminated session."),this;if(this.logger.log("terminating Session"),n&&(n<200||n>=700))throw new TypeError("Invalid statusCode: "+n);return t.receiveResponse=function(){},this.sendRequest(e.C.BYE,t).terminated()},refer:function(t,n){if(n=n||{},this.status!==c.STATUS_CONFIRMED)throw new e.Exceptions.InvalidStateError(this.status);this.referContext=new e.ReferClientContext(this.ua,this,t,n),this.emit("referRequested",this.referContext),this.referContext.refer(n)},sendRequest:function(t,n){n=n||{};var r=this,i=new e.OutgoingRequest(t,this.dialog.remote_target,this.ua,{cseq:n.cseq||(this.dialog.local_seqnum+=1),call_id:this.dialog.id.call_id,from_uri:this.dialog.local_uri,from_tag:this.dialog.id.local_tag,to_uri:this.dialog.remote_uri,to_tag:this.dialog.id.remote_tag,route_set:this.dialog.route_set,statusCode:n.statusCode,reasonPhrase:n.reasonPhrase},n.extraHeaders||[],n.body);return new e.RequestSender({request:i,onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},receiveResponse:n.receiveResponse||function(e){r.receiveNonInviteResponse(e)}},this.ua).send(),this.emit(t.toLowerCase(),i),this},close:function(){var t;if(this.status===c.STATUS_TERMINATED)return this;for(t in this.logger.log("closing INVITE session "+this.id),this.sessionDescriptionHandler&&this.sessionDescriptionHandler.close(),this.timers)e.Timers.clearTimeout(this.timers[t]);for(t in this.dialog&&(this.dialog.terminate(),delete this.dialog),this.earlyDialogs)this.earlyDialogs[t].terminate(),delete this.earlyDialogs[t];return this.status=c.STATUS_TERMINATED,this.ua.transport.removeListener("transportError",this.errorListener),delete this.ua.sessions[this.id],this},createDialog:function(t,n,r){var i,o,s=t["UAS"===n?"to_tag":"from_tag"],a=t["UAS"===n?"from_tag":"to_tag"],c=t.call_id+s+a;if(o=this.earlyDialogs[c],r)return!!o||((o=new e.Dialog(this,t,n,e.Dialog.C.STATUS_EARLY)).error?(this.logger.error(o.error),this.failed(t,e.C.causes.INTERNAL_ERROR),!1):(this.earlyDialogs[c]=o,!0));if(o){for(var u in o.update(t,n),this.dialog=o,delete this.earlyDialogs[c],this.earlyDialogs)this.earlyDialogs[u].terminate(),delete this.earlyDialogs[u];return!0}return(i=new e.Dialog(this,t,n)).error?(this.logger.error(i.error),this.failed(t,e.C.causes.INTERNAL_ERROR),!1):(this.to_tag=t.to_tag,this.dialog=i,!0)},hold:function(t,n){if(this.status!==c.STATUS_WAITING_FOR_ACK&&this.status!==c.STATUS_CONFIRMED)throw new e.Exceptions.InvalidStateError(this.status);this.local_hold?this.logger.log("Session is already on hold, cannot put it on hold again"):((t=t||{}).modifiers=n||[],t.modifiers.push(this.sessionDescriptionHandler.holdModifier),this.local_hold=!0,this.sendReinvite(t))},unhold:function(t,n){if(this.status!==c.STATUS_WAITING_FOR_ACK&&this.status!==c.STATUS_CONFIRMED)throw new e.Exceptions.InvalidStateError(this.status);this.local_hold?(t=t||{},n&&(t.modifiers=n),this.local_hold=!1,this.sendReinvite(t)):this.logger.log("Session is not on hold, cannot unhold it")},reinvite:function(e,t){return e=e||{},t&&(e.modifiers=t),this.sendReinvite(e)},receiveReinvite:function(t){var n,r=this;if(r.emit("reinvite",this),t.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=new e.NameAddrHeader.parse(t.getHeader("P-Asserted-Identity"))),"0"!==t.getHeader("Content-Length")||t.getHeader("Content-Type")){if(!this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type")))return t.reply(415),void this.emit("reinviteFailed",r);n=this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler,this.sessionDescriptionHandlerOptions,this.modifiers))}else n=this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions,this.modifiers);this.receiveRequest=function(t){t.method===e.C.ACK&&this.status===c.STATUS_WAITING_FOR_ACK?this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type"))?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){e.Timers.clearTimeout(this.timers.ackTimer),e.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=c.STATUS_CONFIRMED,this.emit("confirmed",t)}.bind(this))):(e.Timers.clearTimeout(this.timers.ackTimer),e.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=c.STATUS_CONFIRMED,this.emit("confirmed",t)):e.Session.prototype.receiveRequest.apply(this,[t])}.bind(this),n.catch((function(n){var i;throw n instanceof e.Exceptions.SessionDescriptionHandlerError?i=500:n instanceof e.Exceptions.RenegotiationError?(r.emit("renegotiationError",n),r.logger.warn(n),i=488):(r.logger.error(n),i=488),t.reply(i),r.emit("reinviteFailed",r),n})).then((function(e){var n=["Contact: "+r.contact];t.reply(200,null,n,e,(function(){r.status=c.STATUS_WAITING_FOR_ACK,r.setACKTimer(),r.emit("reinviteAccepted",r)}))}))},sendReinvite:function(t){if(this.pendingReinvite)this.logger.warn("Reinvite in progress. Please wait until complete, then try again.");else{this.pendingReinvite=!0,(t=t||{}).modifiers=t.modifiers||[];var n=this,r=(t.extraHeaders||[]).slice();r.push("Contact: "+this.contact),r.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers).then((function(t){n.sendRequest(e.C.INVITE,{extraHeaders:r,body:t,receiveResponse:n.receiveReinviteResponse.bind(n)})})).catch((function(t){if(t instanceof e.Exceptions.RenegotiationError)return n.pendingReinvite=!1,n.emit("renegotiationError",t),n.logger.warn("Renegotiation Error"),void n.logger.warn(t);n.logger.error("sessionDescriptionHandler error"),n.logger.error(t)}))}},receiveRequest:function(t){switch(t.method){case e.C.BYE:t.reply(200),this.status===c.STATUS_CONFIRMED&&(this.emit("bye",t),this.terminated(t,e.C.causes.BYE));break;case e.C.INVITE:this.status===c.STATUS_CONFIRMED&&(this.logger.log("re-INVITE received"),this.receiveReinvite(t));break;case e.C.INFO:if(this.status===c.STATUS_CONFIRMED||this.status===c.STATUS_WAITING_FOR_ACK){if(this.onInfo)return this.onInfo(t);var n,r,i,o=t.getHeader("content-type"),s=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,u=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;o&&(o.match(/^application\/dtmf-relay/i)?(t.body&&2===(n=t.body.split("\r\n",2)).length&&(s.test(n[0])&&(r=n[0].replace(s,"$2")),u.test(n[1])&&(i=parseInt(n[1].replace(u,"$2"),10))),new a(this,r,{duration:i}).init_incoming(t)):t.reply(415,null,["Accept: application/dtmf-relay"]))}break;case e.C.REFER:if(this.status===c.STATUS_CONFIRMED)if(this.logger.log("REFER received"),this.referContext=new e.ReferServerContext(this.ua,t),this.listeners("referRequested").length)this.emit("referRequested",this.referContext);else{this.logger.log("No referRequested listeners, automatically accepting and following the refer");var l={followRefer:!0};this.passedOptions&&(l.inviteOptions=this.passedOptions),this.referContext.accept(l,this.modifiers)}break;case e.C.NOTIFY:if(this.referContext&&this.referContext instanceof e.ReferClientContext&&t.hasHeader("event")&&/^refer(;.*)?$/.test(t.getHeader("event")))return void this.referContext.receiveNotify(t);t.reply(200,"OK"),this.emit("notify",t)}},receiveReinviteResponse:function(t){var n=this;if(this.status!==c.STATUS_TERMINATED)if(this.pendingReinvite)switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):if(this.status=c.STATUS_CONFIRMED,this.emit("ack",t.transaction.sendACK()),this.pendingReinvite=!1,e.Timers.clearTimeout(n.timers.invite2xxTimer),!this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type"))){this.logger.error("2XX response received to re-invite but did not have a description"),this.emit("reinviteFailed",n),this.emit("renegotiationError",new e.Exceptions.RenegotiationError("2XX response received to re-invite but did not have a description"));break}this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).catch((function(t){n.logger.error("Could not set the description in 2XX response"),n.logger.error(t),n.emit("reinviteFailed",n),n.emit("renegotiationError",t),n.sendRequest(e.C.BYE,{extraHeaders:["Reason: "+e.Utils.getReasonHeaderValue(488,"Not Acceptable Here")]}),n.terminated(null,e.C.causes.INCOMPATIBLE_SDP)})).then((function(){n.emit("reinviteAccepted",n)}));break;default:this.pendingReinvite=!1,this.logger.log("Received a non 1XX or 2XX response to a re-invite"),this.emit("reinviteFailed",n),this.emit("renegotiationError",new e.Exceptions.RenegotiationError("Invalid response to a re-invite"))}else this.logger.error("Received reinvite response, but have no pending reinvite");else this.logger.error("Received reinvite response, but in STATUS_TERMINATED")},acceptAndTerminate:function(t,n,r){var i=[];return n&&i.push("Reason: "+e.Utils.getReasonHeaderValue(n,r)),(this.dialog||this.createDialog(t,"UAC"))&&(this.emit("ack",t.transaction.sendACK()),this.sendRequest(e.C.BYE,{extraHeaders:i})),this},setInvite2xxTimer:function(t,n){var r=this,i=e.Timers.T1;this.timers.invite2xxTimer=e.Timers.setTimeout((function o(){if(r.status===c.STATUS_WAITING_FOR_ACK){r.logger.log("no ACK received, attempting to retransmit OK");var s=["Contact: "+r.contact];t.reply(200,null,s,n),i=Math.min(2*i,e.Timers.T2),r.timers.invite2xxTimer=e.Timers.setTimeout(o,i)}}),i)},setACKTimer:function(){var t=this;this.timers.ackTimer=e.Timers.setTimeout((function(){t.status===c.STATUS_WAITING_FOR_ACK&&(t.logger.log("no ACK received for an extended period of time, terminating the call"),e.Timers.clearTimeout(t.timers.invite2xxTimer),t.sendRequest(e.C.BYE),t.terminated(null,e.C.causes.NO_ACK))}),e.Timers.TIMER_H)},onTransportError:function(){this.status!==c.STATUS_CONFIRMED&&this.status!==c.STATUS_TERMINATED&&this.failed(null,e.C.causes.CONNECTION_ERROR)},onRequestTimeout:function(){this.status===c.STATUS_CONFIRMED?this.terminated(null,e.C.causes.REQUEST_TIMEOUT):this.status!==c.STATUS_TERMINATED&&(this.failed(null,e.C.causes.REQUEST_TIMEOUT),this.terminated(null,e.C.causes.REQUEST_TIMEOUT))},onDialogError:function(t){this.status===c.STATUS_CONFIRMED?this.terminated(t,e.C.causes.DIALOG_ERROR):this.status!==c.STATUS_TERMINATED&&(this.failed(t,e.C.causes.DIALOG_ERROR),this.terminated(t,e.C.causes.DIALOG_ERROR))},failed:function(e,t){return this.status===c.STATUS_TERMINATED||this.emit("failed",e||null,t||null),this},rejected:function(e,t){return this.emit("rejected",e||null,t||null),this},canceled:function(){return this.sessionDescriptionHandler&&this.sessionDescriptionHandler.close(),this.emit("cancel"),this},accepted:function(t,n){return n=e.Utils.getReasonPhrase(t&&t.status_code,n),this.startTime=new Date,this.replacee&&(this.replacee.emit("replaced",this),this.replacee.terminate()),this.emit("accepted",t,n),this},terminated:function(e,t){return this.status===c.STATUS_TERMINATED||(this.endTime=new Date,this.close(),this.emit("terminated",e||null,t||null)),this},connecting:function(e){return this.emit("connecting",{request:e}),this}},t.C=c,e.Session=t,(r=function(t,n){var r,i=this,o=n.getHeader("Content-Type"),s=n.parseHeader("Content-Disposition");function a(e,t){n.hasHeader(e)&&n.getHeader(e).toLowerCase().indexOf("100rel")>=0&&(i.rel100=t)}if(e.Utils.augment(this,e.ServerContext,[t,n]),e.Utils.augment(this,e.Session,[t.configuration.sessionDescriptionHandlerFactory]),s&&"render"===s.type&&(this.renderbody=n.body,this.rendertype=o),this.status=c.STATUS_INVITE_RECEIVED,this.from_tag=n.from_tag,this.id=n.call_id+this.from_tag,this.request=n,this.contact=this.ua.contact.toString(),this.receiveNonInviteResponse=function(){},this.logger=t.getLogger("sip.inviteservercontext",this.id),this.ua.sessions[this.id]=this,n.hasHeader("expires")&&(r=1e3*n.getHeader("expires")),a("require",e.C.supported.REQUIRED),a("supported",e.C.supported.SUPPORTED),n.to_tag=e.Utils.newTag(),this.createDialog(n,"UAS",!0)){var u={extraHeaders:["Contact: "+i.contact]};i.rel100!==e.C.supported.REQUIRED&&i.progress(u),i.status=c.STATUS_WAITING_FOR_ANSWER,i.timers.userNoAnswerTimer=e.Timers.setTimeout((function(){n.reply(408),i.failed(n,e.C.causes.NO_ANSWER),i.terminated(n,e.C.causes.NO_ANSWER)}),i.ua.configuration.noAnswerTimeout),r&&(i.timers.expiresTimer=e.Timers.setTimeout((function(){i.status===c.STATUS_WAITING_FOR_ANSWER&&(n.reply(487),i.failed(n,e.C.causes.EXPIRES),i.terminated(n,e.C.causes.EXPIRES))}),r)),this.errorListener=this.onTransportError.bind(this),t.transport.on("transportError",this.errorListener)}else n.reply(500,"Missing Contact header field")}).prototype=Object.create({},{reject:{writable:!0,value:function(t){if(this.status===c.STATUS_TERMINATED)throw new e.Exceptions.InvalidStateError(this.status);return this.logger.log("rejecting RTCSession"),e.ServerContext.prototype.reject.call(this,t),this.terminated()}},terminate:{writable:!0,value:function(t){var n,r=((t=t||{}).extraHeaders||[]).slice(),i=t.body,o=this;return this.status===c.STATUS_WAITING_FOR_ACK&&this.request.server_transaction.state!==e.Transactions.C.STATUS_TERMINATED?(n=this.dialog,this.receiveRequest=function(t){t.method===e.C.ACK&&(this.sendRequest(e.C.BYE,{extraHeaders:r,body:i}),n.terminate())},this.request.server_transaction.on("stateChanged",(function(){this.state===e.Transactions.C.STATUS_TERMINATED&&this.dialog&&(this.request=new e.OutgoingRequest(e.C.BYE,this.dialog.remote_target,this.ua,{cseq:this.dialog.local_seqnum+=1,call_id:this.dialog.id.call_id,from_uri:this.dialog.local_uri,from_tag:this.dialog.id.local_tag,to_uri:this.dialog.remote_uri,to_tag:this.dialog.id.remote_tag,route_set:this.dialog.route_set},r,i),new e.RequestSender({request:this.request,onRequestTimeout:function(){o.onRequestTimeout()},onTransportError:function(){o.onTransportError()},receiveResponse:function(){}},this.ua).send(),n.terminate())})),this.emit("bye",this.request),this.terminated(),this.dialog=n,this.ua.dialogs[n.id.toString()]=n):this.status===c.STATUS_CONFIRMED?this.bye(t):this.reject(t),this}},progress:{writable:!0,value:function(t){var n,r=(t=t||{}).statusCode||180,i=t.reasonPhrase,o=(t.extraHeaders||[]).slice(),s=t.body;if(r<100||r>199)throw new TypeError("Invalid statusCode: "+r);if(this.isCanceled||this.status===c.STATUS_TERMINATED)return this;function a(){r=t.statusCode||183,this.status=c.STATUS_WAITING_FOR_PRACK,o.push("Contact: "+this.contact),o.push("Require: 100rel"),o.push("RSeq: "+Math.floor(1e4*Math.random())),this.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers).then(function(t){if(!this.isCanceled&&this.status!==c.STATUS_TERMINATED){this.early_sdp=t.body,this[this.hasOffer?"hasAnswer":"hasOffer"]=!0;var s=e.Timers.T1;this.timers.rel1xxTimer=e.Timers.setTimeout(function n(){this.request.reply(r,null,o,t),s*=2,this.timers.rel1xxTimer=e.Timers.setTimeout(n.bind(this),s)}.bind(this),s),this.timers.prackTimer=e.Timers.setTimeout(function(){this.status===c.STATUS_WAITING_FOR_PRACK&&(this.logger.log("no PRACK received, rejecting the call"),e.Timers.clearTimeout(this.timers.rel1xxTimer),this.request.reply(504),this.terminated(null,e.C.causes.NO_PRACK))}.bind(this),64*e.Timers.T1),n=this.request.reply(r,i,o,t),this.emit("progress",n,i)}}.bind(this),function(){this.request.reply(480),this.failed(null,e.C.causes.WEBRTC_ERROR),this.terminated(null,e.C.causes.WEBRTC_ERROR)}.bind(this))}return 100!==t.statusCode&&(this.rel100===e.C.supported.REQUIRED||this.rel100===e.C.supported.SUPPORTED&&t.rel100||this.rel100===e.C.supported.SUPPORTED&&this.ua.configuration.rel100===e.C.supported.REQUIRED)?(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(this.request.getHeader("Content-Type"))?(this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(this.request.body,t.sessionDescriptionHandlerOptions,t.modifiers).then(a.apply(this)).catch(function(t){this.logger.warn("invalid description"),this.logger.warn(t),this.failed(null,e.C.causes.WEBRTC_ERROR),this.terminated(null,e.C.causes.WEBRTC_ERROR)}.bind(this))):a.apply(this)):function(){n=this.request.reply(r,i,o,s),this.emit("progress",n,i)}.apply(this),this}},accept:{writable:!0,value:function(t){t=t||{},this.onInfo=t.onInfo;var n=this,r=this.request,i=(t.extraHeaders||[]).slice(),o=function(t){var o;i.push("Contact: "+n.contact),i.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),n.hasOffer?n.hasAnswer=!0:n.hasOffer=!0,o=r.reply(200,null,i,t,(function(){n.status=c.STATUS_WAITING_FOR_ACK,n.setInvite2xxTimer(r,t),n.setACKTimer()}),(function(){n.failed(null,e.C.causes.CONNECTION_ERROR),n.terminated(null,e.C.causes.CONNECTION_ERROR)})),n.status!==c.STATUS_TERMINATED&&n.accepted(o,e.Utils.getReasonPhrase(200))},s=function(t){t instanceof e.Exceptions.SessionDescriptionHandlerError&&(n.logger.log(t.message),n.logger.log(t.error)),n.status!==c.STATUS_TERMINATED&&(n.request.reply(480),n.failed(null,e.C.causes.WEBRTC_ERROR),n.terminated(null,e.C.causes.WEBRTC_ERROR))};if(this.status===c.STATUS_WAITING_FOR_PRACK)return this.status=c.STATUS_ANSWERED_WAITING_FOR_PRACK,this;if(this.status===c.STATUS_WAITING_FOR_ANSWER)this.status=c.STATUS_ANSWERED;else if(this.status!==c.STATUS_EARLY_MEDIA)throw new e.Exceptions.InvalidStateError(this.status);if(!this.createDialog(r,"UAS"))return r.reply(500,"Missing Contact header field"),this;if(e.Timers.clearTimeout(this.timers.userNoAnswerTimer),this.status===c.STATUS_EARLY_MEDIA)o({});else if(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),"0"!==this.request.getHeader("Content-Length")||this.request.getHeader("Content-Type")){if(!this.sessionDescriptionHandler.hasDescription(this.request.getHeader("Content-Type")))return void this.request.reply(415);this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(this.request.body,t.sessionDescriptionHandlerOptions,t.modifiers).then(function(){return this.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers)}.bind(this)).catch(s).then(o)}else this.sessionDescriptionHandler.getDescription(t.sessionDescriptionHandlerOptions,t.modifiers).catch(s).then(o);return this}},receiveRequest:{writable:!0,value:function(n){function r(){var t,r;e.Timers.clearTimeout(this.timers.ackTimer),e.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=c.STATUS_CONFIRMED,t=n.getHeader("Content-Type"),(r=n.getHeader("Content-Disposition"))&&"render"===r.type&&(this.renderbody=n.body,this.rendertype=t),this.emit("confirmed",n)}switch(n.method){case e.C.CANCEL:this.status!==c.STATUS_WAITING_FOR_ANSWER&&this.status!==c.STATUS_WAITING_FOR_PRACK&&this.status!==c.STATUS_ANSWERED_WAITING_FOR_PRACK&&this.status!==c.STATUS_EARLY_MEDIA&&this.status!==c.STATUS_ANSWERED||(this.status=c.STATUS_CANCELED,this.request.reply(487),this.canceled(n),this.rejected(n,e.C.causes.CANCELED),this.failed(n,e.C.causes.CANCELED),this.terminated(n,e.C.causes.CANCELED));break;case e.C.ACK:this.status===c.STATUS_WAITING_FOR_ACK&&(this.sessionDescriptionHandler.hasDescription(n.getHeader("Content-Type"))?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(n.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(r.bind(this),function(t){this.logger.warn(t),this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(n,e.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(n,e.C.causes.BAD_MEDIA_DESCRIPTION)}.bind(this))):r.apply(this));break;case e.C.PRACK:this.status===c.STATUS_WAITING_FOR_PRACK||this.status===c.STATUS_ANSWERED_WAITING_FOR_PRACK?this.hasAnswer?(e.Timers.clearTimeout(this.timers.rel1xxTimer),e.Timers.clearTimeout(this.timers.prackTimer),n.reply(200),this.status===c.STATUS_ANSWERED_WAITING_FOR_PRACK&&(this.status=c.STATUS_EARLY_MEDIA,this.accept()),this.status=c.STATUS_EARLY_MEDIA):(this.sessionDescriptionHandler=this.setupSessionDescriptionHandler(),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(n.getHeader("Content-Type"))?(this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(n.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(function(){e.Timers.clearTimeout(this.timers.rel1xxTimer),e.Timers.clearTimeout(this.timers.prackTimer),n.reply(200),this.status===c.STATUS_ANSWERED_WAITING_FOR_PRACK&&(this.status=c.STATUS_EARLY_MEDIA,this.accept()),this.status=c.STATUS_EARLY_MEDIA}.bind(this),function(t){this.logger.warn(t),this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(n,e.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(n,e.C.causes.BAD_MEDIA_DESCRIPTION)}.bind(this))):(this.terminate({statusCode:"488",reasonPhrase:"Bad Media Description"}),this.failed(n,e.C.causes.BAD_MEDIA_DESCRIPTION),this.terminated(n,e.C.causes.BAD_MEDIA_DESCRIPTION))):this.status===c.STATUS_EARLY_MEDIA&&n.reply(200);break;default:t.prototype.receiveRequest.apply(this,[n])}}},setupSessionDescriptionHandler:{writable:!0,value:function(){return this.sessionDescriptionHandler?this.sessionDescriptionHandler:this.sessionDescriptionHandlerFactory(this,this.ua.configuration.sessionDescriptionHandlerFactoryOptions)}},onTransportError:{writable:!0,value:function(){this.status!==c.STATUS_CONFIRMED&&this.status!==c.STATUS_TERMINATED&&this.failed(null,e.C.causes.CONNECTION_ERROR)}},onRequestTimeout:{writable:!0,value:function(){this.status===c.STATUS_CONFIRMED?this.terminated(null,e.C.causes.REQUEST_TIMEOUT):this.status!==c.STATUS_TERMINATED&&(this.failed(null,e.C.causes.REQUEST_TIMEOUT),this.terminated(null,e.C.causes.REQUEST_TIMEOUT))}}}),e.InviteServerContext=r,(i=function(t,n,r,i){r=r||{},this.passedOptions=r,r.params=Object.create(r.params||Object.prototype);var o=(r.extraHeaders||[]).slice(),s=t.configuration.sessionDescriptionHandlerFactory;if(this.sessionDescriptionHandlerFactoryOptions=t.configuration.sessionDescriptionHandlerFactoryOptions||{},this.sessionDescriptionHandlerOptions=r.sessionDescriptionHandlerOptions||{},this.modifiers=i,this.inviteWithoutSdp=r.inviteWithoutSdp||!1,this.anonymous=r.anonymous||!1,this.renderbody=r.renderbody||null,this.rendertype=r.rendertype||"text/plain",this.from_tag=e.Utils.newTag(),r.params.from_tag=this.from_tag,this.contact=t.contact.toString({anonymous:this.anonymous,outbound:this.anonymous?!t.contact.temp_gruu:!t.contact.pub_gruu}),this.anonymous&&(r.params.from_displayName="Anonymous",r.params.from_uri="sip:anonymous@anonymous.invalid",o.push("P-Preferred-Identity: "+t.configuration.uri.toString()),o.push("Privacy: id")),o.push("Contact: "+this.contact),o.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.inviteWithoutSdp&&this.renderbody&&(o.push("Content-Type: "+this.rendertype),o.push("Content-Disposition: render;handling=optional")),t.configuration.rel100===e.C.supported.REQUIRED&&o.push("Require: 100rel"),t.configuration.replaces===e.C.supported.REQUIRED&&o.push("Require: replaces"),r.extraHeaders=o,e.Utils.augment(this,e.ClientContext,[t,e.C.INVITE,n,r]),e.Utils.augment(this,e.Session,[s]),this.status!==c.STATUS_NULL)throw new e.Exceptions.InvalidStateError(this.status);this.isCanceled=!1,this.received_100=!1,this.method=e.C.INVITE,this.receiveNonInviteResponse=this.receiveResponse,this.receiveResponse=this.receiveInviteResponse,this.logger=t.getLogger("sip.inviteclientcontext"),t.applicants[this]=this,this.id=this.request.call_id+this.from_tag,this.onInfo=r.onInfo,this.errorListener=this.onTransportError.bind(this),t.transport.on("transportError",this.errorListener)}).prototype=Object.create({},{invite:{writable:!0,value:function(){var t=this;return this.ua.sessions[this.id]=this,e.Utils.Promise.resolve().then(function(){this.inviteWithoutSdp?(this.request.body=t.renderbody,this.status=c.STATUS_INVITE_SENT,this.send()):(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.sessionDescriptionHandlerFactoryOptions),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.getDescription(this.sessionDescriptionHandlerOptions,this.modifiers).then((function(e){t.isCanceled||t.status===c.STATUS_TERMINATED||(t.hasOffer=!0,t.request.body=e,t.status=c.STATUS_INVITE_SENT,t.send())}),(function(n){n instanceof e.Exceptions.SessionDescriptionHandlerError&&(t.logger.log(n.message),t.logger.log(n.error)),t.status!==c.STATUS_TERMINATED&&(t.failed(null,e.C.causes.WEBRTC_ERROR),t.terminated(null,e.C.causes.WEBRTC_ERROR))})))}.bind(this)),this}},receiveInviteResponse:{writable:!0,value:function(t){var n,r=this,i=t.call_id+t.from_tag+t.to_tag,o=[],s={};if(this.status!==c.STATUS_TERMINATED&&t.method===e.C.INVITE){if(this.dialog&&t.status_code>=200&&t.status_code<=299){if(i!==this.dialog.id.toString()){if(!this.createDialog(t,"UAC",!0))return;return this.emit("ack",t.transaction.sendACK({body:e.Utils.generateFakeSDP(t.body)})),this.earlyDialogs[i].sendRequest(this,e.C.BYE),void(this.status!==c.STATUS_CONFIRMED&&(this.failed(t,e.C.causes.WEBRTC_ERROR),this.terminated(t,e.C.causes.WEBRTC_ERROR)))}if(this.status===c.STATUS_CONFIRMED)return void this.emit("ack",t.transaction.sendACK());if(!this.hasAnswer)return}if(this.dialog&&t.status_code<200){if(-1!==this.dialog.pracked.indexOf(t.getHeader("rseq"))||this.dialog.pracked[this.dialog.pracked.length-1]>=t.getHeader("rseq")&&this.dialog.pracked.length>0)return;if(!this.earlyDialogs[i]&&!this.createDialog(t,"UAC",!0))return;if(-1!==this.earlyDialogs[i].pracked.indexOf(t.getHeader("rseq"))||this.earlyDialogs[i].pracked[this.earlyDialogs[i].pracked.length-1]>=t.getHeader("rseq")&&this.earlyDialogs[i].pracked.length>0)return;return o.push("RAck: "+t.getHeader("rseq")+" "+t.getHeader("cseq")),this.earlyDialogs[i].pracked.push(t.getHeader("rseq")),void this.earlyDialogs[i].sendRequest(this,e.C.PRACK,{extraHeaders:o,body:e.Utils.generateFakeSDP(t.body)})}if(this.isCanceled)t.status_code>=100&&t.status_code<200?(this.request.cancel(this.cancelReason,o),this.canceled(null)):t.status_code>=200&&t.status_code<299?(this.acceptAndTerminate(t),this.emit("bye",this.request)):t.status_code>=300&&(n=e.C.REASON_PHRASE[t.status_code]||e.C.causes.CANCELED,this.rejected(t,n),this.failed(t,n),this.terminated(t,n));else switch(!0){case/^100$/.test(t.status_code):this.received_100=!0,this.emit("progress",t);break;case/^1[0-9]{2}$/.test(t.status_code):if(!t.to_tag){this.logger.warn("1xx response received without to tag");break}if(t.hasHeader("contact")&&!this.createDialog(t,"UAC",!0))break;if(this.status=c.STATUS_1XX_RECEIVED,t.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=new e.NameAddrHeader.parse(t.getHeader("P-Asserted-Identity"))),t.hasHeader("require")&&-1!==t.getHeader("require").indexOf("100rel")){if(this.dialog||!this.earlyDialogs[i])break;if(-1!==this.earlyDialogs[i].pracked.indexOf(t.getHeader("rseq"))||this.earlyDialogs[i].pracked[this.earlyDialogs[i].pracked.length-1]>=t.getHeader("rseq")&&this.earlyDialogs[i].pracked.length>0)return;if(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.sessionDescriptionHandlerFactoryOptions),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type")))if(this.hasOffer){if(!this.createDialog(t,"UAC"))break;this.hasAnswer=!0,this.dialog.pracked.push(t.getHeader("rseq")),this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then((function(){o.push("RAck: "+t.getHeader("rseq")+" "+t.getHeader("cseq")),r.sendRequest(e.C.PRACK,{extraHeaders:o,receiveResponse:function(){}}),r.status=c.STATUS_EARLY_MEDIA,r.emit("progress",t)}),(function(n){r.logger.warn(n),r.acceptAndTerminate(t,488,"Not Acceptable Here"),r.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION)}))}else{var a=this.earlyDialogs[i],u=a.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.sessionDescriptionHandlerFactoryOptions);this.emit("SessionDescriptionHandler-created",u),a.pracked.push(t.getHeader("rseq")),u.setDescription(t.body,r.sessionDescriptionHandlerOptions,r.modifers).then(u.getDescription.bind(u,r.sessionDescriptionHandlerOptions,r.modifiers)).then((function(n){o.push("RAck: "+t.getHeader("rseq")+" "+t.getHeader("cseq")),a.sendRequest(r,e.C.PRACK,{extraHeaders:o,body:n}),r.status=c.STATUS_EARLY_MEDIA,r.emit("progress",t)})).catch((function(n){if(n instanceof e.Exceptions.SessionDescriptionHandlerError){if(a.pracked.push(t.getHeader("rseq")),r.status===c.STATUS_TERMINATED)return;r.failed(null,e.C.causes.WEBRTC_ERROR),r.terminated(null,e.C.causes.WEBRTC_ERROR)}else a.pracked.splice(a.pracked.indexOf(t.getHeader("rseq")),1),r.logger.warn("invalid description"),r.logger.warn(n)}))}else o.push("RAck: "+t.getHeader("rseq")+" "+t.getHeader("cseq")),this.earlyDialogs[i].pracked.push(t.getHeader("rseq")),this.earlyDialogs[i].sendRequest(this,e.C.PRACK,{extraHeaders:o}),this.emit("progress",t)}else this.emit("progress",t);break;case/^2[0-9]{2}$/.test(t.status_code):if(this.request.cseq+" "+this.request.method!==t.getHeader("cseq"))break;if(t.hasHeader("P-Asserted-Identity")&&(this.assertedIdentity=new e.NameAddrHeader.parse(t.getHeader("P-Asserted-Identity"))),this.status===c.STATUS_EARLY_MEDIA&&this.dialog){this.status=c.STATUS_CONFIRMED,s={},this.renderbody&&(o.push("Content-Type: "+this.rendertype),s.extraHeaders=o,s.body=this.renderbody),this.emit("ack",t.transaction.sendACK(s)),this.accepted(t);break}if(this.dialog)break;if(this.hasOffer)if(this.hasAnswer)this.renderbody&&(o.push("Content-Type: "+r.rendertype),s.extraHeaders=o,s.body=this.renderbody),this.emit("ack",t.transaction.sendACK(s));else{if(!this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type"))){this.acceptAndTerminate(t,400,"Missing session description"),this.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(t,"UAC"))break;this.hasAnswer=!0,this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then((function(){var e={};r.status=c.STATUS_CONFIRMED,r.renderbody&&(o.push("Content-Type: "+r.rendertype),e.extraHeaders=o,e.body=r.renderbody),r.emit("ack",t.transaction.sendACK(e)),r.accepted(t)}),(function(n){r.logger.warn(n),r.acceptAndTerminate(t,488,"Not Acceptable Here"),r.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION)}))}else if(this.earlyDialogs[i]&&this.earlyDialogs[i].sessionDescriptionHandler){if(this.hasOffer=!0,this.hasAnswer=!0,this.sessionDescriptionHandler=this.earlyDialogs[i].sessionDescriptionHandler,!this.createDialog(t,"UAC"))break;this.status=c.STATUS_CONFIRMED,this.emit("ack",t.transaction.sendACK()),this.accepted(t)}else{if(this.sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.sessionDescriptionHandlerFactoryOptions),this.emit("SessionDescriptionHandler-created",this.sessionDescriptionHandler),!this.sessionDescriptionHandler.hasDescription(t.getHeader("Content-Type"))){this.acceptAndTerminate(t,400,"Missing session description"),this.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION);break}if(!this.createDialog(t,"UAC"))break;this.hasOffer=!0,this.sessionDescriptionHandler.setDescription(t.body,this.sessionDescriptionHandlerOptions,this.modifiers).then(this.sessionDescriptionHandler.getDescription.bind(this.sessionDescriptionHandler,this.sessionDescriptionHandlerOptions,this.modifiers)).then((function(e){r.isCanceled||r.status===c.STATUS_TERMINATED||(r.status=c.STATUS_CONFIRMED,r.hasAnswer=!0,r.emit("ack",t.transaction.sendACK({body:e})),r.accepted(t))})).catch((function(n){n instanceof e.Exceptions.SessionDescriptionHandlerError&&(r.logger.warn("invalid description"),r.logger.warn(n),r.acceptAndTerminate(t,488,"Invalid session description"),r.failed(t,e.C.causes.BAD_MEDIA_DESCRIPTION))}))}break;default:n=e.Utils.sipErrorCause(t.status_code),this.rejected(t,n),this.failed(t,n),this.terminated(t,n)}}}},cancel:{writable:!0,value:function(t){if((t=t||{}).extraHeaders=(t.extraHeaders||[]).slice(),this.isCanceled)throw new e.Exceptions.InvalidStateError("CANCELED");if(this.status===c.STATUS_TERMINATED||this.status===c.STATUS_CONFIRMED)throw new e.Exceptions.InvalidStateError(this.status);this.logger.log("canceling RTCSession"),this.isCanceled=!0;var n=e.Utils.getCancelReason(t.status_code,t.reason_phrase);return this.status===c.STATUS_NULL||this.status===c.STATUS_INVITE_SENT&&!this.received_100?this.cancelReason=n:this.status!==c.STATUS_INVITE_SENT&&this.status!==c.STATUS_1XX_RECEIVED&&this.status!==c.STATUS_EARLY_MEDIA||this.request.cancel(n,t.extraHeaders),this.canceled()}},terminate:{writable:!0,value:function(e){return this.status===c.STATUS_TERMINATED||(this.status===c.STATUS_WAITING_FOR_ACK||this.status===c.STATUS_CONFIRMED?this.bye(e):this.cancel(e)),this}},receiveRequest:{writable:!0,value:function(n){return n.method,e.C.CANCEL,n.method===e.C.ACK&&this.status===c.STATUS_WAITING_FOR_ACK&&(e.Timers.clearTimeout(this.timers.ackTimer),e.Timers.clearTimeout(this.timers.invite2xxTimer),this.status=c.STATUS_CONFIRMED,this.accepted()),t.prototype.receiveRequest.apply(this,[n])}},onTransportError:{writable:!0,value:function(){this.status!==c.STATUS_CONFIRMED&&this.status!==c.STATUS_TERMINATED&&this.failed(null,e.C.causes.CONNECTION_ERROR)}},onRequestTimeout:{writable:!0,value:function(){this.status===c.STATUS_CONFIRMED?this.terminated(null,e.C.causes.REQUEST_TIMEOUT):this.status!==c.STATUS_TERMINATED&&(this.failed(null,e.C.causes.REQUEST_TIMEOUT),this.terminated(null,e.C.causes.REQUEST_TIMEOUT))}}}),e.InviteClientContext=i,(s=function(t,n,r,i){if(this.options=i||{},this.extraHeaders=(this.options.extraHeaders||[]).slice(),void 0===t||void 0===n||void 0===r)throw new TypeError("Not enough arguments");if(e.Utils.augment(this,e.ClientContext,[t,e.C.REFER,n.remoteIdentity.uri.toString(),i]),this.applicant=n,r instanceof e.InviteServerContext||r instanceof e.InviteClientContext)this.target='"'+r.remoteIdentity.friendlyName+'" <'+r.dialog.remote_target.toString()+"?Replaces="+r.dialog.id.call_id+"%3Bto-tag%3D"+r.dialog.id.remote_tag+"%3Bfrom-tag%3D"+r.dialog.id.local_tag+">";else{try{this.target=e.Grammar.parse(r,"Refer_To").uri||r}catch(e){this.logger.debug(".refer() cannot parse Refer_To from",r),this.logger.debug("...falling through to normalizeTarget()")}if(this.target=this.ua.normalizeTarget(this.target),!this.target)throw new TypeError("Invalid target: "+r)}this.ua&&this.extraHeaders.push("Referred-By: <"+this.ua.configuration.uri+">"),this.extraHeaders.push("Contact: "+n.contact),this.extraHeaders.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.extraHeaders.push("Refer-To: "+this.target),this.errorListener=this.onTransportError.bind(this),t.transport.on("transportError",this.errorListener)}).prototype=Object.create({},{refer:{writable:!0,value:function(t){t=t||{};var n=(this.extraHeaders||[]).slice();return t.extraHeaders&&n.concat(t.extraHeaders),this.applicant.sendRequest(e.C.REFER,{extraHeaders:this.extraHeaders,receiveResponse:function(e){/^1[0-9]{2}$/.test(e.status_code)?this.emit("referRequestProgress",this):/^2[0-9]{2}$/.test(e.status_code)?this.emit("referRequestAccepted",this):/^[4-6][0-9]{2}$/.test(e.status_code)&&this.emit("referRequestRejected",this),t.receiveResponse&&t.receiveResponse(e)}.bind(this)}),this}},receiveNotify:{writable:!0,value:function(t){if(t.hasHeader("Content-Type")&&-1!==t.getHeader("Content-Type").search(/^message\/sipfrag/)){var n=e.Grammar.parse(t.body,"sipfrag");if(-1===n)return void t.reply(489,"Bad Event");switch(!0){case/^1[0-9]{2}$/.test(n.status_code):this.emit("referProgress",this);break;case/^2[0-9]{2}$/.test(n.status_code):this.emit("referAccepted",this),!this.options.activeAfterTransfer&&this.applicant.terminate&&this.applicant.terminate();break;default:this.emit("referRejected",this)}return t.reply(200),void this.emit("notify",t)}t.reply(489,"Bad Event")}}}),e.ReferClientContext=s,(o=function(t,n){if(e.Utils.augment(this,e.ServerContext,[t,n]),this.ua=t,this.status=c.STATUS_INVITE_RECEIVED,this.from_tag=n.from_tag,this.id=n.call_id+this.from_tag,this.request=n,this.contact=this.ua.contact.toString(),this.logger=t.getLogger("sip.referservercontext",this.id),!this.request.hasHeader("refer-to"))return this.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting refer."),void this.reject();this.referTo=this.request.parseHeader("refer-to"),this.referredSession=this.ua.findSession(n),this.cseq=Math.floor(1e4*Math.random()),this.call_id=this.request.call_id,this.from_uri=this.request.to.uri,this.from_tag=this.request.to.parameters.tag,this.remote_target=this.request.headers.Contact[0].parsed.uri,this.to_uri=this.request.from.uri,this.to_tag=this.request.from_tag,this.route_set=this.request.getHeaders("record-route"),this.receiveNonInviteResponse=function(){},this.request.hasHeader("referred-by")&&(this.referredBy=this.request.getHeader("referred-by")),this.referTo.uri.hasHeader("replaces")&&(this.replaces=this.referTo.uri.getHeader("replaces")),this.errorListener=this.onTransportError.bind(this),t.transport.on("transportError",this.errorListener),this.status=c.STATUS_WAITING_FOR_ANSWER}).prototype=Object.create({},{progress:{writable:!0,value:function(){if(this.status!==c.STATUS_WAITING_FOR_ANSWER)throw new e.Exceptions.InvalidStateError(this.status);this.request.reply(100)}},reject:{writable:!0,value:function(t){if(this.status===c.STATUS_TERMINATED)throw new e.Exceptions.InvalidStateError(this.status);this.logger.log("Rejecting refer"),this.status=c.STATUS_TERMINATED,e.ServerContext.prototype.reject.call(this,t),this.emit("referRequestRejected",this)}},accept:{writable:!0,value:function(t,n){if(t=t||{},this.status!==c.STATUS_WAITING_FOR_ANSWER)throw new e.Exceptions.InvalidStateError(this.status);if(this.status=c.STATUS_ANSWERED,this.request.reply(202,"Accepted"),this.emit("referRequestAccepted",this),t.followRefer){this.logger.log("Accepted refer, attempting to automatically follow it");var r=this.referTo.uri;if(!r.scheme.match("^sips?$"))return this.logger.error("SIP.js can only automatically follow SIP refer target"),void this.reject();var i=t.inviteOptions||{},o=(i.extraHeaders||[]).slice();this.replaces&&o.push("Replaces: "+decodeURIComponent(this.replaces)),this.referredBy&&o.push("Referred-By: "+this.referredBy),i.extraHeaders=o,r.clearHeaders(),this.targetSession=this.ua.invite(r,i,n),this.emit("referInviteSent",this),this.targetSession.once("progress",function(){this.sendNotify("SIP/2.0 100 Trying"),this.emit("referProgress",this),this.referredSession&&this.referredSession.emit("referProgress",this)}.bind(this)),this.targetSession.once("accepted",function(){this.logger.log("Successfully followed the refer"),this.sendNotify("SIP/2.0 200 OK"),this.emit("referAccepted",this),this.referredSession&&this.referredSession.emit("referAccepted",this)}.bind(this));var s=function(e){if(this.status!==c.STATUS_TERMINATED){if(this.logger.log("Refer was not successful. Resuming session"),e&&429===e.status_code)return this.logger.log("Alerting referrer that identity is required."),void this.sendNotify("SIP/2.0 429 Provide Referrer Identity");this.sendNotify("SIP/2.0 603 Declined"),this.status=c.STATUS_TERMINATED,this.emit("referRejected",this),this.referredSession&&this.referredSession.emit("referRejected")}};this.targetSession.once("rejected",s.bind(this)),this.targetSession.once("failed",s.bind(this))}else this.logger.log("Accepted refer, but did not automatically follow it"),this.sendNotify("SIP/2.0 200 OK"),this.emit("referAccepted",this),this.referredSession&&this.referredSession.emit("referAccepted",this)}},sendNotify:{writable:!0,value:function(t){if(this.status!==c.STATUS_ANSWERED)throw new e.Exceptions.InvalidStateError(this.status);if(-1===e.Grammar.parse(t,"sipfrag"))throw new Error("sipfrag body is required to send notify for refer");var n=new e.OutgoingRequest(e.C.NOTIFY,this.remote_target,this.ua,{cseq:this.cseq+=1,call_id:this.call_id,from_uri:this.from_uri,from_tag:this.from_tag,to_uri:this.to_uri,to_tag:this.to_tag,route_set:this.route_set},["Event: refer","Subscription-State: terminated","Content-Type: message/sipfrag"],t);new e.RequestSender({request:n,onRequestTimeout:function(){},onTransportError:function(){},receiveResponse:function(){}},this.ua).send()}}}),e.ReferServerContext=o}},function(e,t,n){"use strict";e.exports=function(e){var t;return(t=function(n,r,i){var o,s;if(void 0===r)throw new TypeError("Not enough arguments");if(this.logger=n.ua.getLogger("sip.invitecontext.dtmf",n.id),this.owner=n,this.direction=null,o=(i=i||{}).duration||null,s=i.interToneGap||null,"string"==typeof r)r=r.toUpperCase();else{if("number"!=typeof r)throw new TypeError("Invalid tone: "+r);r=r.toString()}if(!r.match(/^[0-9A-D#*]$/))throw new TypeError("Invalid tone: "+r);if(this.tone=r,o&&!e.Utils.isDecimal(o))throw new TypeError("Invalid tone duration: "+o);if(o?o<t.C.MIN_DURATION?(this.logger.warn('"duration" value is lower than the minimum allowed, setting it to '+t.C.MIN_DURATION+" milliseconds"),o=t.C.MIN_DURATION):o>t.C.MAX_DURATION?(this.logger.warn('"duration" value is greater than the maximum allowed, setting it to '+t.C.MAX_DURATION+" milliseconds"),o=t.C.MAX_DURATION):o=Math.abs(o):o=t.C.DEFAULT_DURATION,this.duration=o,s&&!e.Utils.isDecimal(s))throw new TypeError("Invalid interToneGap: "+s);s?s<t.C.MIN_INTER_TONE_GAP?(this.logger.warn('"interToneGap" value is lower than the minimum allowed, setting it to '+t.C.MIN_INTER_TONE_GAP+" milliseconds"),s=t.C.MIN_INTER_TONE_GAP):s=Math.abs(s):s=t.C.DEFAULT_INTER_TONE_GAP,this.interToneGap=s}).prototype=Object.create(e.EventEmitter.prototype),t.prototype.send=function(t){var n,r={};if(this.direction="outgoing",this.owner.status!==e.Session.C.STATUS_CONFIRMED&&this.owner.status!==e.Session.C.STATUS_WAITING_FOR_ACK)throw new e.Exceptions.InvalidStateError(this.owner.status);n=(t=t||{}).extraHeaders?t.extraHeaders.slice():[],r.contentType="application/dtmf-relay",r.body="Signal= "+this.tone+"\r\n",r.body+="Duration= "+this.duration,this.request=this.owner.dialog.sendRequest(this,e.C.INFO,{extraHeaders:n,body:r}),this.owner.emit("dtmf",this.request,this)},t.prototype.receiveResponse=function(t){var n;switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):this.emit("succeeded",{originator:"remote",response:t});break;default:n=e.Utils.sipErrorCause(t.status_code),this.emit("failed",t,n)}},t.prototype.onRequestTimeout=function(){this.emit("failed",null,e.C.causes.REQUEST_TIMEOUT),this.owner.onRequestTimeout()},t.prototype.onTransportError=function(){this.emit("failed",null,e.C.causes.CONNECTION_ERROR),this.owner.onTransportError()},t.prototype.onDialogError=function(t){this.emit("failed",t,e.C.causes.DIALOG_ERROR),this.owner.onDialogError(t)},t.prototype.init_incoming=function(e){this.direction="incoming",this.request=e,e.reply(200),this.tone&&this.duration?this.owner.emit("dtmf",e,this):this.logger.warn("invalid INFO DTMF received, discarded")},t.C={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500},t}},function(e,t,n){"use strict";e.exports=function(e){e.Subscription=function(t,n,r,i){if(i=Object.create(i||Object.prototype),this.extraHeaders=i.extraHeaders=(i.extraHeaders||[]).slice(),this.id=null,this.state="init",!r)throw new TypeError("Event necessary to create a subscription.");this.event=r,"number"!=typeof i.expires?(t.logger.warn("expires must be a number. Using default of 3600."),this.expires=3600):this.expires=i.expires,this.requestedExpires=this.expires,i.extraHeaders.push("Event: "+this.event),i.extraHeaders.push("Expires: "+this.expires),i.body&&(this.body=i.body),this.contact=t.contact.toString(),i.extraHeaders.push("Contact: "+this.contact),i.extraHeaders.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),e.Utils.augment(this,e.ClientContext,[t,e.C.SUBSCRIBE,n,i]),this.logger=t.getLogger("sip.subscription"),this.dialog=null,this.timers={N:null,sub_duration:null},this.errorCodes=[404,405,410,416,480,481,482,483,484,485,489,501,604]},e.Subscription.prototype={subscribe:function(){return"active"===this.state?(this.refresh(),this):("notify_wait"===this.state||(e.Timers.clearTimeout(this.timers.sub_duration),e.Timers.clearTimeout(this.timers.N),this.timers.N=e.Timers.setTimeout(this.timer_fire.bind(this),e.Timers.TIMER_N),this.ua.earlySubscriptions[this.request.call_id+this.request.from.parameters.tag+this.event]=this,this.send(),this.state="notify_wait"),this)},refresh:function(){"terminated"!==this.state&&"pending"!==this.state&&"notify_wait"!==this.state&&this.dialog.sendRequest(this,e.C.SUBSCRIBE,{extraHeaders:this.extraHeaders,body:this.body})},receiveResponse:function(t){var n,r=e.Utils.getReasonPhrase(t.status_code);"notify_wait"===this.state&&t.status_code>=300||"notify_wait"!==this.state&&-1!==this.errorCodes.indexOf(t.status_code)?this.failed(t,null):/^2[0-9]{2}$/.test(t.status_code)?(this.emit("accepted",t,r),(n=t.getHeader("Expires"))&&n<=this.requestedExpires?(this.expires=n,this.timers.sub_duration=e.Timers.setTimeout(this.refresh.bind(this),900*n)):n?(this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),this.failed(t,e.C.INVALID_EXPIRES_HEADER)):(this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE"),this.failed(t,e.C.EXPIRES_HEADER_MISSING))):t.statusCode>300&&(this.emit("failed",t,r),this.emit("rejected",t,r))},unsubscribe:function(){var t=[];this.state="terminated",t.push("Event: "+this.event),t.push("Expires: 0"),t.push("Contact: "+this.contact),t.push("Allow: "+e.UA.C.ALLOWED_METHODS.toString()),this.receiveResponse=function(){},this.dialog.sendRequest(this,this.method,{extraHeaders:t,body:this.body}),e.Timers.clearTimeout(this.timers.sub_duration),e.Timers.clearTimeout(this.timers.N),this.timers.N=e.Timers.setTimeout(this.timer_fire.bind(this),e.Timers.TIMER_N)},timer_fire:function(){"terminated"===this.state?(this.terminateDialog(),e.Timers.clearTimeout(this.timers.N),e.Timers.clearTimeout(this.timers.sub_duration),delete this.ua.subscriptions[this.id]):"notify_wait"===this.state||"pending"===this.state?this.close():this.refresh()},close:function(){"notify_wait"===this.state?(this.state="terminated",e.Timers.clearTimeout(this.timers.N),e.Timers.clearTimeout(this.timers.sub_duration),this.receiveResponse=function(){},delete this.ua.earlySubscriptions[this.request.call_id+this.request.from.parameters.tag+this.event]):"terminated"!==this.state&&this.unsubscribe()},createConfirmedDialog:function(t,n){var r;return this.terminateDialog(),(r=new e.Dialog(this,t,n)).invite_seqnum=this.request.cseq,r.local_seqnum=this.request.cseq,!r.error&&(this.dialog=r,!0)},terminateDialog:function(){this.dialog&&(delete this.ua.subscriptions[this.id],this.dialog.terminate(),delete this.dialog)},receiveRequest:function(t){var n,r=this;function i(){n.expires&&(e.Timers.clearTimeout(r.timers.sub_duration),n.expires=Math.min(r.expires,Math.max(n.expires,0)),r.timers.sub_duration=e.Timers.setTimeout(r.refresh.bind(r),900*n.expires))}if(this.matchEvent(t))if(this.dialog||this.createConfirmedDialog(t,"UAS")&&(this.id=this.dialog.id.toString(),delete this.ua.earlySubscriptions[this.request.call_id+this.request.from.parameters.tag+this.event],this.ua.subscriptions[this.id]=this),n=t.parseHeader("Subscription-State"),t.reply(200,e.C.REASON_200),e.Timers.clearTimeout(this.timers.N),this.emit("notify",{request:t}),"terminated"!==this.state)switch(n.state){case"active":this.state="active",i();break;case"pending":"notify_wait"===this.state&&i(),this.state="pending";break;case"terminated":if(e.Timers.clearTimeout(this.timers.sub_duration),n.reason)switch(this.logger.log("terminating subscription with reason "+n.reason),n.reason){case"deactivated":case"timeout":return void this.subscribe();case"probation":case"giveup":return void(n.params&&n.params["retry-after"]?this.timers.sub_duration=e.Timers.setTimeout(r.subscribe.bind(r),n.params["retry-after"]):this.subscribe())}this.close()}else"terminated"===n.state&&(this.terminateDialog(),e.Timers.clearTimeout(this.timers.N),e.Timers.clearTimeout(this.timers.sub_duration),delete this.ua.subscriptions[this.id]);else t.reply(489)},failed:function(e,t){return this.close(),this.emit("failed",e,t),this.emit("rejected",e,t),this},onDialogError:function(t){this.failed(t,e.C.causes.DIALOG_ERROR)},matchEvent:function(e){var t;return e.hasHeader("Event")?e.hasHeader("Subscription-State")?(t=e.parseHeader("event").event,this.event===t||(this.logger.warn("event match failed"),e.reply(481,"Event Match Failed"),!1)):(this.logger.warn("missing Subscription-State header"),!1):(this.logger.warn("missing Event header"),!1)}}}},function(e,t,n){"use strict";e.exports=function(e){var t;((t=function(t,n,r,i){if(this.options=i=i||{},this.options.extraHeaders=(i.extraHeaders||[]).slice(),this.options.contentType=i.contentType||"text/plain","number"!=typeof i.expires||i.expires%1!=0?this.options.expires=3600:this.options.expires=Number(i.expires),"boolean"!=typeof i.unpublishOnClose?this.options.unpublishOnClose=!0:this.options.unpublishOnClose=i.unpublishOnClose,null==n||""===n)throw new e.Exceptions.MethodParameterError("Publish","Target",n);if(this.target=t.normalizeTarget(n),null==r||""===r)throw new e.Exceptions.MethodParameterError("Publish","Event",r);this.event=r,e.ClientContext.call(this,t,e.C.PUBLISH,this.target,this.options),this.logger=this.ua.getLogger("sip.publish"),this.pubRequestBody=null,this.pubRequestExpires=this.options.expires,this.pubRequestEtag=null,this.publish_refresh_timer=null,t.on("transportCreated",function(e){e.on("transportError",this.onTransportError.bind(this))}.bind(this))}).prototype=Object.create(e.ClientContext.prototype)).constructor=t,t.prototype.publish=function(t){if(this.request=null,e.Timers.clearTimeout(this.publish_refresh_timer),null!=t&&""!==t)this.options.body=t,this.pubRequestBody=this.options.body,0===this.pubRequestExpires&&(this.pubRequestExpires=this.options.expires,this.pubRequestEtag=null),this.ua.publishers[this.target.toString()+":"+this.event]||(this.ua.publishers[this.target.toString()+":"+this.event]=this);else{if(this.pubRequestBody=null,null===this.pubRequestEtag)throw new e.Exceptions.MethodParameterError("Publish","Body",t);if(0===this.pubRequestExpires)throw new e.Exceptions.MethodParameterError("Publish","Expire",this.pubRequestExpires)}this.sendPublishRequest()},t.prototype.unpublish=function(){this.request=null,e.Timers.clearTimeout(this.publish_refresh_timer),this.pubRequestBody=null,this.pubRequestExpires=0,null!==this.pubRequestEtag&&this.sendPublishRequest()},t.prototype.close=function(){this.options.unpublishOnClose?this.unpublish():(this.request=null,e.Timers.clearTimeout(this.publish_refresh_timer),this.pubRequestBody=null,this.pubRequestExpires=0,this.pubRequestEtag=null),this.ua.publishers[this.target.toString()+":"+this.event]&&delete this.ua.publishers[this.target.toString()+":"+this.event]},t.prototype.sendPublishRequest=function(){var t;(t=Object.create(this.options||Object.prototype)).extraHeaders=(this.options.extraHeaders||[]).slice(),t.extraHeaders.push("Event: "+this.event),t.extraHeaders.push("Expires: "+this.pubRequestExpires),null!==this.pubRequestEtag&&t.extraHeaders.push("SIP-If-Match: "+this.pubRequestEtag),this.request=new e.OutgoingRequest(e.C.PUBLISH,this.target,this.ua,this.options.params,t.extraHeaders),null!==this.pubRequestBody&&(this.request.body={},this.request.body.body=this.pubRequestBody,this.request.body.contentType=this.options.contentType),this.send()},t.prototype.receiveResponse=function(t){var n,r,i=e.Utils.getReasonPhrase(t.status_code);switch(!0){case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",t,i);break;case/^2[0-9]{2}$/.test(t.status_code):t.hasHeader("SIP-ETag")?this.pubRequestEtag=t.getHeader("SIP-ETag"):this.logger.warn("SIP-ETag header missing in a 200-class response to PUBLISH"),t.hasHeader("Expires")?"number"==typeof(n=Number(t.getHeader("Expires")))&&n>=0&&n<=this.pubRequestExpires?this.pubRequestExpires=n:this.logger.warn("Bad Expires header in a 200-class response to PUBLISH"):this.logger.warn("Expires header missing in a 200-class response to PUBLISH"),0!==this.pubRequestExpires?(this.publish_refresh_timer=e.Timers.setTimeout(this.publish.bind(this),900*this.pubRequestExpires),this.emit("published",t,i)):this.emit("unpublished",t,i);break;case/^412$/.test(t.status_code):null!==this.pubRequestEtag&&0!==this.pubRequestExpires?(this.logger.warn("412 response to PUBLISH, recovering"),this.pubRequestEtag=null,this.emit("progress",t,i),this.publish(this.options.body)):(this.logger.warn("412 response to PUBLISH, recovery failed"),this.pubRequestExpires=0,this.emit("failed",t,i),this.emit("unpublished",t,i));break;case/^423$/.test(t.status_code):0!==this.pubRequestExpires&&t.hasHeader("Min-Expires")?"number"==typeof(r=Number(t.getHeader("Min-Expires")))||r>this.pubRequestExpires?(this.logger.warn("423 code in response to PUBLISH, adjusting the Expires value and trying to recover"),this.pubRequestExpires=r,this.emit("progress",t,i),this.publish(this.options.body)):(this.logger.warn("Bad 423 response Min-Expires header received for PUBLISH"),this.pubRequestExpires=0,this.emit("failed",t,i),this.emit("unpublished",t,i)):(this.logger.warn("423 response to PUBLISH, recovery failed"),this.pubRequestExpires=0,this.emit("failed",t,i),this.emit("unpublished",t,i));break;default:this.pubRequestExpires=0,this.emit("failed",t,i),this.emit("unpublished",t,i)}0===this.pubRequestExpires&&(e.Timers.clearTimeout(this.publish_refresh_timer),this.pubRequestBody=null,this.pubRequestEtag=null)},t.prototype.onRequestTimeout=function(){e.ClientContext.prototype.onRequestTimeout.call(this),this.emit("unpublished",null,e.C.causes.REQUEST_TIMEOUT)},t.prototype.onTransportError=function(){e.ClientContext.prototype.onTransportError.call(this),this.emit("unpublished",null,e.C.causes.CONNECTION_ERROR)},e.PublishContext=t}},function(e,t,n){"use strict";(function(t){e.exports=function(e,r){var i,o={STATUS_INIT:0,STATUS_STARTING:1,STATUS_READY:2,STATUS_USER_CLOSED:3,STATUS_NOT_READY:4,CONFIGURATION_ERROR:1,NETWORK_ERROR:2,ALLOWED_METHODS:["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"],ACCEPTED_BODY_TYPES:["application/sdp","application/dtmf-relay"],MAX_FORWARDS:70,TAG_LENGTH:10};function s(t){if(t instanceof Function)return t.initialize||(t.initialize=function(){return e.Utils.Promise.resolve()}),t}((i=function(t){var n=this;function r(e){return n.emit.bind(n,e)}o.ACCEPTED_BODY_TYPES=o.ACCEPTED_BODY_TYPES.toString(),this.log=new e.LoggerFactory,this.logger=this.getLogger("sip.ua"),this.cache={credentials:{}},this.configuration={},this.dialogs={},this.applicants={},this.data={},this.sessions={},this.subscriptions={},this.earlySubscriptions={},this.publishers={},this.transport=null,this.contact=null,this.status=o.STATUS_INIT,this.error=null,this.transactions={nist:{},nict:{},ist:{},ict:{}},Object.defineProperties(this,{transactionsCount:{get:function(){var e,t=["nist","nict","ist","ict"],n=0;for(e in t)n+=Object.keys(this.transactions[t[e]]).length;return n}},nictTransactionsCount:{get:function(){return Object.keys(this.transactions.nict).length}},nistTransactionsCount:{get:function(){return Object.keys(this.transactions.nist).length}},ictTransactionsCount:{get:function(){return Object.keys(this.transactions.ict).length}},istTransactionsCount:{get:function(){return Object.keys(this.transactions.ist).length}}}),void 0===t?t={}:("string"==typeof t||t instanceof String)&&(t={uri:t}),t.log&&(t.log.hasOwnProperty("builtinEnabled")&&(this.log.builtinEnabled=t.log.builtinEnabled),t.log.hasOwnProperty("level")&&(this.log.level=t.log.level),t.log.hasOwnProperty("connector")&&(this.log.connector=t.log.connector));try{this.loadConfig(t)}catch(e){throw this.status=o.STATUS_NOT_READY,this.error=o.CONFIGURATION_ERROR,e}this.registerContext=new e.RegisterContext(this),this.registerContext.on("failed",r("registrationFailed")),this.registerContext.on("registered",r("registered")),this.registerContext.on("unregistered",r("unregistered")),this.configuration.autostart&&this.start()}).prototype=Object.create(e.EventEmitter.prototype)).register=function(e){return this.configuration.register=!0,this.registerContext.register(e),this},i.prototype.unregister=function(e){this.configuration.register=!1;var t=this.registerContext;return this.transport.afterConnected(t.unregister.bind(t,e)),this},i.prototype.isRegistered=function(){return this.registerContext.registered},i.prototype.invite=function(t,n,r){var i=new e.InviteClientContext(this,t,n,r);return this.transport.afterConnected(function(){i.invite(),this.emit("inviteSent",i)}.bind(this)),i},i.prototype.subscribe=function(t,n,r){var i=new e.Subscription(this,t,n,r);return this.transport.afterConnected(i.subscribe.bind(i)),i},i.prototype.publish=function(t,n,r,i){var o=new e.PublishContext(this,t,n,i);return this.transport.afterConnected(o.publish.bind(o,r)),o},i.prototype.message=function(t,n,r){if(void 0===n)throw new TypeError("Not enough arguments");return(r=Object.create(r||Object.prototype)).contentType||(r.contentType="text/plain"),r.body=n,this.request(e.C.MESSAGE,t,r)},i.prototype.request=function(t,n,r){var i=new e.ClientContext(this,t,n,r);return this.transport.afterConnected(i.send.bind(i)),i},i.prototype.stop=function(){var e,n,i,s,a=this;if(this.logger.log("user requested closure..."),this.status===o.STATUS_USER_CLOSED)return this.logger.warn("UA already closed"),this;for(e in this.logger.log("closing registerContext"),this.registerContext.close(),this.sessions)this.logger.log("closing session "+e),this.sessions[e].terminate();for(n in this.subscriptions)this.logger.log("unsubscribing from subscription "+n),this.subscriptions[n].close();for(n in this.earlySubscriptions)this.logger.log("unsubscribing from early subscription "+n),this.earlySubscriptions[n].close();for(s in this.publishers)this.logger.log("unpublish "+s),this.publishers[s].close();for(i in this.applicants)this.applicants[i].close();return this.status=o.STATUS_USER_CLOSED,0===this.nistTransactionsCount&&0===this.nictTransactionsCount?this.transport.disconnect():this.on("transactionDestroyed",(function e(){0===a.nistTransactionsCount&&0===a.nictTransactionsCount&&(a.removeListener("transactionDestroyed",e),a.transport.disconnect())})),"function"==typeof r.removeEventListener&&(t.chrome&&t.chrome.app&&t.chrome.app.runtime||r.removeEventListener("unload",this.environListener)),this},i.prototype.start=function(){if(this.logger.log("user requested startup..."),this.status===o.STATUS_INIT){if(this.status=o.STATUS_STARTING,!this.configuration.transportConstructor)throw new e.Exceptions.TransportError("Transport constructor not set");this.transport=new this.configuration.transportConstructor(this.getLogger("sip.transport"),this.configuration.transportOptions),this.setTransportListeners(),this.emit("transportCreated",this.transport),this.transport.connect()}else this.status===o.STATUS_USER_CLOSED?(this.logger.log("resuming"),this.status=o.STATUS_READY,this.transport.connect()):this.status===o.STATUS_STARTING?this.logger.log("UA is in STARTING status, not opening new connection"):this.status===o.STATUS_READY?this.logger.log("UA is in READY status, not resuming"):this.logger.error("Connection is down. Auto-Recovery system is trying to connect");return this.configuration.autostop&&"function"==typeof r.addEventListener&&(t.chrome&&t.chrome.app&&t.chrome.app.runtime||(this.environListener=this.stop.bind(this),r.addEventListener("unload",this.environListener))),this},i.prototype.normalizeTarget=function(t){return e.Utils.normalizeTarget(t,this.configuration.hostportParams)},i.prototype.saveCredentials=function(e){return this.cache.credentials[e.realm]=this.cache.credentials[e.realm]||{},this.cache.credentials[e.realm][e.uri]=e,this},i.prototype.getCredentials=function(e){var t,n;return t=e.ruri.host,this.cache.credentials[t]&&this.cache.credentials[t][e.ruri]&&((n=this.cache.credentials[t][e.ruri]).method=e.method),n},i.prototype.getLogger=function(e,t){return this.log.getLogger(e,t)},i.prototype.onTransportError=function(){this.status!==o.STATUS_USER_CLOSED&&(this.error&&this.error===o.NETWORK_ERROR||(this.status=o.STATUS_NOT_READY,this.error=o.NETWORK_ERROR))},i.prototype.setTransportListeners=function(){this.transport.on("connected",this.onTransportConnected.bind(this)),this.transport.on("message",this.onTransportReceiveMsg.bind(this)),this.transport.on("transportError",this.onTransportError.bind(this))},i.prototype.onTransportConnected=function(){this.configuration.register&&this.configuration.authenticationFactory.initialize().then(function(){this.registerContext.onTransportConnected()}.bind(this))},i.prototype.onTransportReceiveMsg=function(t){var n;if(t=e.Parser.parseMessage(t,this),this.status===e.UA.C.STATUS_USER_CLOSED&&t instanceof e.IncomingRequest)this.logger.warn("UA received message when status = USER_CLOSED - aborting");else if(e.sanityCheck(t,this,this.transport))if(t instanceof e.IncomingRequest)t.transport=this.transport,this.receiveRequest(t);else if(t instanceof e.IncomingResponse)switch(t.method){case e.C.INVITE:(n=this.transactions.ict[t.via_branch])&&n.receiveResponse(t);break;case e.C.ACK:break;default:(n=this.transactions.nict[t.via_branch])&&n.receiveResponse(t)}},i.prototype.newTransaction=function(e){this.transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})},i.prototype.destroyTransaction=function(e){delete this.transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})},i.prototype.receiveRequest=function(t){var n,r,i,s,a,c,u=t.method;function l(e){return e&&e.user===t.ruri.user}if(!(l(this.configuration.uri)||l(this.contact.uri)||l(this.contact.pub_gruu)||l(this.contact.temp_gruu)))return this.logger.warn("Request-URI does not point to us"),void(t.method!==e.C.ACK&&t.reply_sl(404));if(t.ruri.scheme!==e.C.SIPS){if(!e.Transactions.checkTransaction(this,t))if(u===e.C.OPTIONS?(new e.Transactions.NonInviteServerTransaction(t,this),t.reply(200,null,["Allow: "+e.UA.C.ALLOWED_METHODS.toString(),"Accept: "+o.ACCEPTED_BODY_TYPES])):u===e.C.MESSAGE?((i=new e.ServerContext(this,t)).body=t.body,i.content_type=t.getHeader("Content-Type")||"text/plain",t.reply(200,null),this.emit("message",i)):u!==e.C.INVITE&&u!==e.C.ACK&&new e.ServerContext(this,t),t.to_tag)(n=this.findDialog(t))?(u===e.C.INVITE&&new e.Transactions.InviteServerTransaction(t,this),n.receiveRequest(t)):u===e.C.NOTIFY?(r=this.findSession(t),s=this.findEarlySubscription(t),r?r.receiveRequest(t):s?s.receiveRequest(t):(this.logger.warn("received NOTIFY request for a non existent session or subscription"),t.reply(481,"Subscription does not exist"))):u!==e.C.ACK&&t.reply(481);else switch(u){case e.C.INVITE:if(a=this.configuration.replaces!==e.C.supported.UNSUPPORTED&&t.parseHeader("replaces")){if(!(c=this.dialogs[a.call_id+a.replaces_to_tag+a.replaces_from_tag]))return void t.reply_sl(481,null);if(c.owner.status===e.Session.C.STATUS_TERMINATED)return void t.reply_sl(603,null);if(c.state===e.Dialog.C.STATUS_CONFIRMED&&a.early_only)return void t.reply_sl(486,null)}(r=new e.InviteServerContext(this,t)).replacee=c&&c.owner,this.emit("invite",r);break;case e.C.BYE:t.reply(481);break;case e.C.CANCEL:(r=this.findSession(t))?r.receiveRequest(t):this.logger.warn("received CANCEL request for a non existent session");break;case e.C.ACK:break;case e.C.NOTIFY:this.configuration.allowLegacyNotifications&&this.listeners("notify").length>0?(t.reply(200,null),this.emit("notify",{request:t})):t.reply(481,"Subscription does not exist");break;case e.C.REFER:if(this.logger.log("Received an out of dialog refer"),this.configuration.allowOutOfDialogRefers){this.logger.log("Allow out of dialog refers is enabled on the UA");var d=new e.ReferServerContext(this,t);this.listeners("outOfDialogReferRequested").length?this.emit("outOfDialogReferRequested",d):(this.logger.log("No outOfDialogReferRequest listeners, automatically accepting and following the out of dialog refer"),d.accept({followRefer:!0}));break}t.reply(405);break;default:t.reply(405)}}else t.reply_sl(416)},i.prototype.findSession=function(e){return this.sessions[e.call_id+e.from_tag]||this.sessions[e.call_id+e.to_tag]||null},i.prototype.findDialog=function(e){return this.dialogs[e.call_id+e.from_tag+e.to_tag]||this.dialogs[e.call_id+e.to_tag+e.from_tag]||null},i.prototype.findEarlySubscription=function(e){return this.earlySubscriptions[e.call_id+e.to_tag+e.getHeader("event")]||null},i.prototype.loadConfig=function(t){var r,i,o,a,c,u={viaHost:e.Utils.createRandomToken(12)+".invalid",uri:new e.URI("sip","anonymous."+e.Utils.createRandomToken(6),"anonymous.invalid",null,null),custom:{},displayName:"",password:null,registerExpires:600,register:!0,registrarServer:null,transportConstructor:n(29)(e),transportOptions:{},userAgentString:e.C.USER_AGENT,noAnswerTimeout:60,hackViaTcp:!1,hackIpInContact:!1,hackWssInTransport:!1,hackAllowUnregisteredOptionTags:!1,sessionDescriptionHandlerFactoryOptions:{constraints:{},peerConnectionOptions:{}},contactName:e.Utils.createRandomToken(8),contactTransport:"ws",forceRport:!1,autostart:!0,autostop:!0,rel100:e.C.supported.UNSUPPORTED,dtmfType:e.C.dtmfType.INFO,replaces:e.C.supported.UNSUPPORTED,sessionDescriptionHandlerFactory:n(30)(e).defaultFactory,authenticationFactory:s((function(t){return new e.DigestAuthentication(t)})),allowLegacyNotifications:!1,allowOutOfDialogRefers:!1};function l(e,n){var r=e.replace(/([a-z][A-Z])/g,(function(e){return e[0]+"_"+e[1].toLowerCase()}));if(e!==r){var i=t.hasOwnProperty(e);t.hasOwnProperty(r)&&(n.warn(r+" is deprecated, please use "+e),i&&n.warn(e+" overriding "+r)),t[e]=i?t[e]:t[r]}}var d=this.getConfigurationCheck();for(r in d.mandatory){if(l(r,this.logger),!t.hasOwnProperty(r))throw new e.Exceptions.ConfigurationError(r);if(i=t[r],void 0===(o=d.mandatory[r](i)))throw new e.Exceptions.ConfigurationError(r,i);u[r]=o}for(r in d.optional)if(l(r,this.logger),t.hasOwnProperty(r)){if((i=t[r])instanceof Array&&0===i.length)continue;if(null===i||""===i||void 0===i)continue;if("number"==typeof i&&isNaN(i))continue;if(void 0===(o=d.optional[r](i)))throw new e.Exceptions.ConfigurationError(r,i);u[r]=o}0===u.displayName&&(u.displayName="0"),u.instanceId||(u.instanceId=e.Utils.newUUID()),u.sipjsId=e.Utils.createRandomToken(5),(a=u.uri.clone()).user=null,u.hostportParams=a.toRaw().replace(/^sip:/i,""),u.authorizationUser||(u.authorizationUser=u.uri.user),u.registrarServer||((c=u.uri.clone()).user=null,u.registrarServer=c),u.noAnswerTimeout=1e3*u.noAnswerTimeout,u.hackIpInContact&&("boolean"==typeof u.hackIpInContact?u.viaHost=e.Utils.getRandomTestNetIP():"string"==typeof u.hackIpInContact&&(u.viaHost=u.hackIpInContact)),u.hackWssInTransport&&(u.contactTransport="wss"),this.contact={pub_gruu:null,temp_gruu:null,uri:new e.URI("sip",u.contactName,u.viaHost,null,{transport:u.contactTransport}),toString:function(e){var t=(e=e||{}).anonymous||null,n=e.outbound||null,r="<";return r+=t?(this.temp_gruu||"sip:anonymous@anonymous.invalid;transport="+u.contactTransport).toString():(this.pub_gruu||this.uri).toString(),n&&(r+=";ob"),r+">"}};var h={};for(r in u)h[r]=u[r];for(r in Object.assign(this.configuration,h),this.logger.log("configuration parameters after validation:"),u)switch(r){case"uri":case"registrarServer":case"sessionDescriptionHandlerFactory":this.logger.log("\xb7 "+r+": "+u[r]);break;case"password":this.logger.log("\xb7 "+r+": NOT SHOWN");break;case"transportConstructor":this.logger.log("\xb7 "+r+": "+u[r].name);break;default:this.logger.log("\xb7 "+r+": "+JSON.stringify(u[r]))}},i.prototype.getConfigurationCheck=function(){return{mandatory:{},optional:{uri:function(t){var n;return/^sip:/i.test(t)||(t=e.C.SIP+":"+t),(n=e.URI.parse(t))&&n.user?n:void 0},transportConstructor:function(e){if(e instanceof Function)return e},transportOptions:function(e){if("object"==typeof e)return e},authorizationUser:function(t){return-1===e.Grammar.parse('"'+t+'"',"quoted_string")?void 0:t},displayName:function(t){return-1===e.Grammar.parse('"'+t+'"',"displayName")?void 0:t},dtmfType:function(t){switch(t){case e.C.dtmfType.RTP:return e.C.dtmfType.RTP;case e.C.dtmfType.INFO:default:return e.C.dtmfType.INFO}},hackViaTcp:function(e){if("boolean"==typeof e)return e},hackIpInContact:function(t){return"boolean"==typeof t||"string"==typeof t&&-1!==e.Grammar.parse(t,"host")?t:void 0},hackWssInTransport:function(e){if("boolean"==typeof e)return e},hackAllowUnregisteredOptionTags:function(e){if("boolean"==typeof e)return e},contactTransport:function(e){if("string"==typeof e)return e},forceRport:function(e){if("boolean"==typeof e)return e},instanceId:function(t){if("string"==typeof t)return/^uuid:/i.test(t)&&(t=t.substr(5)),-1===e.Grammar.parse(t,"uuid")?void 0:t},noAnswerTimeout:function(t){var n;if(e.Utils.isDecimal(t)&&(n=Number(t))>0)return n},password:function(e){return String(e)},rel100:function(t){return t===e.C.supported.REQUIRED?e.C.supported.REQUIRED:t===e.C.supported.SUPPORTED?e.C.supported.SUPPORTED:e.C.supported.UNSUPPORTED},replaces:function(t){return t===e.C.supported.REQUIRED?e.C.supported.REQUIRED:t===e.C.supported.SUPPORTED?e.C.supported.SUPPORTED:e.C.supported.UNSUPPORTED},register:function(e){if("boolean"==typeof e)return e},registerExpires:function(t){var n;if(e.Utils.isDecimal(t)&&(n=Number(t))>0)return n},registrarServer:function(t){var n;if("string"==typeof t)return/^sip:/i.test(t)||(t=e.C.SIP+":"+t),(n=e.URI.parse(t))?n.user?void 0:n:void 0},userAgentString:function(e){if("string"==typeof e)return e},autostart:function(e){if("boolean"==typeof e)return e},autostop:function(e){if("boolean"==typeof e)return e},sessionDescriptionHandlerFactory:function(e){if(e instanceof Function)return e},sessionDescriptionHandlerFactoryOptions:function(e){if("object"==typeof e)return e},authenticationFactory:s,allowLegacyNotifications:function(e){if("boolean"==typeof e)return e},custom:function(e){if("object"==typeof e)return e},contactName:function(e){if("string"==typeof e)return e}}}},i.C=o,e.UA=i}}).call(this,n(28))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(t){e.exports=function(e){var n,r={STATUS_CONNECTING:0,STATUS_OPEN:1,STATUS_CLOSING:2,STATUS_CLOSED:3},i=(t.window||t).WebSocket;return(n=function(t,n){n=e.Utils.defaultOptions({},n),this.logger=t,this.ws=null,this.server=null,this.connectionPromise=null,this.connectDeferredResolve=null,this.connectionTimeout=null,this.disconnectionPromise=null,this.disconnectDeferredResolve=null,this.boundOnOpen=null,this.boundOnMessage=null,this.boundOnClose=null,this.boundOnError=null,this.reconnectionAttempts=0,this.reconnectTimer=null,this.keepAliveInterval=null,this.keepAliveDebounceTimeout=null,this.status=r.STATUS_CONNECTING,this.configuration={},this.loadConfig(n)}).prototype=Object.create(e.Transport.prototype,{isConnected:{writable:!0,value:function(){return this.status===r.STATUS_OPEN}},sendPromise:{writable:!0,value:function(t,n){if(n=n||{},!this.statusAssert(r.STATUS_OPEN,n.force))return this.onError("unable to send message - WebSocket not open"),e.Utils.Promise.reject();var i=t.toString();return this.ws?(!0===this.configuration.traceSip&&this.logger.log("sending WebSocket message:\n\n"+i+"\n"),this.ws.send(i),e.Utils.Promise.resolve({msg:i})):(this.onError("unable to send message - WebSocket does not exist"),e.Utils.Promise.reject())}},disconnectPromise:{writable:!0,value:function(t){return this.disconnectionPromise?this.disconnectionPromise:(t=t||{},this.statusTransition(r.STATUS_CLOSING,t.force)?(this.disconnectionPromise=new e.Utils.Promise(function(n,r){this.disconnectDeferredResolve=n,this.reconnectTimer&&(e.Timers.clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws?(this.stopSendingKeepAlives(),this.logger.log("closing WebSocket "+this.server.ws_uri),this.ws.close(t.code,t.reason)):r("Attempted to disconnect but the websocket doesn't exist")}.bind(this)),this.disconnectionPromise):e.Utils.Promise.reject("Failed status transition - attempted to disconnect a socket that was not open"))}},connectPromise:{writable:!0,value:function(t){return this.connectionPromise||(t=t||{},this.server=this.server||this.getNextWsServer(t.force),this.connectionPromise=new e.Utils.Promise(function(n,o){if((this.status===r.STATUS_OPEN||this.status===r.STATUS_CLOSING)&&!t.force)return this.logger.warn("WebSocket "+this.server.ws_uri+" is already connected"),void o("Failed status check - attempted to open a connection but already open/closing");this.connectDeferredResolve=n,this.status=r.STATUS_CONNECTING,this.logger.log("connecting to WebSocket "+this.server.ws_uri),this.disposeWs();try{this.ws=new i(this.server.ws_uri,"sip")}catch(e){return this.ws=null,this.status=r.STATUS_CLOSED,this.onError("error connecting to WebSocket "+this.server.ws_uri+":"+e),void o("Failed to create a websocket")}this.ws?(this.connectionTimeout=e.Timers.setTimeout(function(){this.onError("took too long to connect - exceeded time set in configuration.connectionTimeout: "+this.configuration.connectionTimeout+"s")}.bind(this),1e3*this.configuration.connectionTimeout),this.boundOnOpen=this.onOpen.bind(this),this.boundOnMessage=this.onMessage.bind(this),this.boundOnClose=this.onClose.bind(this),this.boundOnError=this.onError.bind(this),this.ws.addEventListener("open",this.boundOnOpen),this.ws.addEventListener("message",this.boundOnMessage),this.ws.addEventListener("close",this.boundOnClose),this.ws.addEventListener("error",this.boundOnError)):o("Unexpected instance websocket not set")}.bind(this))),this.connectionPromise}},onOpen:{writable:!0,value:function(){this.status=r.STATUS_OPEN,this.emit("connected"),e.Timers.clearTimeout(this.connectionTimeout),this.logger.log("WebSocket "+this.server.ws_uri+" connected"),null!==this.reconnectTimer&&(e.Timers.clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectionAttempts=0,this.disconnectionPromise=null,this.disconnectDeferredResolve=null,this.startSendingKeepAlives(),this.connectDeferredResolve?this.connectDeferredResolve({overrideEvent:!0}):this.logger.warn("Unexpected websocket.onOpen with no connectDeferredResolve")}},onClose:{writable:!0,value:function(t){if(this.logger.log("WebSocket disconnected (code: "+t.code+(t.reason?"| reason: "+t.reason:"")+")"),this.emit("disconnected",{code:t.code,reason:t.reason}),this.status!==r.STATUS_CLOSING&&(this.logger.warn("WebSocket abrupt disconnection"),this.emit("transportError")),this.stopSendingKeepAlives(),e.Timers.clearTimeout(this.connectionTimeout),this.connectionTimeout=null,this.connectionPromise=null,this.connectDeferredResolve=null,this.disconnectDeferredResolve)return this.disconnectDeferredResolve({overrideEvent:!0}),this.statusTransition(r.STATUS_CLOSED),void(this.disconnectDeferredResolve=null);this.status=r.STATUS_CLOSED,this.reconnect()}},disposeWs:{writable:!0,value:function(){this.ws&&(this.ws.removeEventListener("open",this.boundOnOpen),this.ws.removeEventListener("message",this.boundOnMessage),this.ws.removeEventListener("close",this.boundOnClose),this.ws.removeEventListener("error",this.boundOnError),this.boundOnOpen=null,this.boundOnMessage=null,this.boundOnClose=null,this.boundOnError=null,this.ws=null)}},onMessage:{writable:!0,value:function(e){var t=e.data;if(/^(\r\n)+$/.test(t))return this.clearKeepAliveTimeout(),void(!0===this.configuration.traceSip&&this.logger.log("received WebSocket message with CRLF Keep Alive response"));if(t){if("string"!=typeof t){try{t=String.fromCharCode.apply(null,new Uint8Array(t))}catch(e){return void this.logger.warn("received WebSocket binary message failed to be converted into string, message discarded")}!0===this.configuration.traceSip&&this.logger.log("received WebSocket binary message:\n\n"+t+"\n")}else!0===this.configuration.traceSip&&this.logger.log("received WebSocket text message:\n\n"+t+"\n");this.emit("message",t)}else this.logger.warn("received empty message, message discarded")}},onError:{writable:!0,value:function(e){this.logger.warn("Transport error: "+e),this.emit("transportError")}},reconnect:{writable:!0,value:function(){if(this.reconnectionAttempts>0&&this.logger.log("Reconnection attempt "+this.reconnectionAttempts+" failed"),this.noAvailableServers())return this.logger.warn("no available ws servers left - going to closed state"),this.status=r.STATUS_CLOSED,this.emit("closed"),void this.resetServerErrorStatus();this.isConnected()&&(this.logger.warn("attempted to reconnect while connected - forcing disconnect"),this.disconnect({force:!0})),this.reconnectionAttempts+=1,this.reconnectionAttempts>this.configuration.maxReconnectionAttempts?(this.logger.warn("maximum reconnection attempts for WebSocket "+this.server.ws_uri),this.logger.log("transport "+this.server.ws_uri+" failed | connection state set to 'error'"),this.server.isError=!0,this.emit("transportError"),this.server=this.getNextWsServer(),this.reconnectionAttempts=0,this.reconnect()):(this.logger.log("trying to reconnect to WebSocket "+this.server.ws_uri+" (reconnection attempt "+this.reconnectionAttempts+")"),this.reconnectTimer=e.Timers.setTimeout(function(){this.connect(),this.reconnectTimer=null}.bind(this),1===this.reconnectionAttempts?0:1e3*this.configuration.reconnectionTimeout))}},resetServerErrorStatus:{writable:!0,value:function(){var e,t=this.configuration.wsServers.length;for(e=0;e<t;e++)this.configuration.wsServers[e].isError=!1}},getNextWsServer:{writable:!0,value:function(e){if(!this.noAvailableServers()){var t,n,r,i=[];for(n=this.configuration.wsServers.length,t=0;t<n;t++)(r=this.configuration.wsServers[t]).isError&&!e||(0===i.length?i.push(r):r.weight>i[0].weight?i=[r]:r.weight===i[0].weight&&i.push(r));return i[t=Math.floor(Math.random()*i.length)]}this.logger.warn("attempted to get next ws server but there are no available ws servers left")}},noAvailableServers:{writable:!0,value:function(){var e;for(e in this.configuration.wsServers)if(!this.configuration.wsServers[e].isError)return!1;return!0}},sendKeepAlive:{writable:!0,value:function(){if(!this.keepAliveDebounceTimeout)return this.keepAliveDebounceTimeout=e.Timers.setTimeout(function(){this.emit("keepAliveDebounceTimeout"),this.clearKeepAliveTimeout()}.bind(this),1e3*this.configuration.keepAliveDebounce),this.send("\r\n\r\n")}},clearKeepAliveTimeout:{writable:!0,value:function(){e.Timers.clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveDebounceTimeout=null}},startSendingKeepAlives:{writable:!0,value:function(){var t,n;this.configuration.keepAliveInterval&&!this.keepAliveInterval&&(this.keepAliveInterval=e.Timers.setInterval(function(){this.sendKeepAlive(),this.startSendingKeepAlives()}.bind(this),(n=.8*(t=this.configuration.keepAliveInterval),1e3*(Math.random()*(t-n)+n))))}},stopSendingKeepAlives:{writable:!0,value:function(){e.Timers.clearInterval(this.keepAliveInterval),e.Timers.clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveInterval=null,this.keepAliveDebounceTimeout=null}},statusAssert:{writable:!0,value:function(e,t){return e===this.status||(t?(this.logger.warn("Attempted to assert "+Object.keys(r)[this.status]+" as "+Object.keys(r)[e]+"- continuing with option: 'force'"),!0):(this.logger.warn("Tried to assert "+Object.keys(r)[e]+" but is currently "+Object.keys(r)[this.status]),!1))}},statusTransition:{writable:!0,value:function(e,t){return this.logger.log("Attempting to transition status from "+Object.keys(r)[this.status]+" to "+Object.keys(r)[e]),e===r.STATUS_OPEN&&this.statusAssert(r.STATUS_CONNECTING,t)||e===r.STATUS_CLOSING&&this.statusAssert(r.STATUS_OPEN,t)||e===r.STATUS_CLOSED&&this.statusAssert(r.STATUS_CLOSING,t)?(this.status=e,!0):(this.logger.warn("Status transition failed - result: no-op - reason: either gave an nonexistent status or attempted illegal transition"),!1)}},loadConfig:{writable:!0,value:function(t){var n,r,i,o={wsServers:[{scheme:"WSS",sip_uri:"<sip:edge.sip.onsip.com;transport=ws;lr>",weight:0,ws_uri:"wss://edge.sip.onsip.com",isError:!1}],connectionTimeout:5,maxReconnectionAttempts:3,reconnectionTimeout:4,keepAliveInterval:0,keepAliveDebounce:10,traceSip:!1};function s(e,n){var r=e.replace(/([a-z][A-Z])/g,(function(e){return e[0]+"_"+e[1].toLowerCase()}));if(e!==r){var i=t.hasOwnProperty(e);t.hasOwnProperty(r)&&(n.warn(r+" is deprecated, please use "+e),i&&n.warn(e+" overriding "+r)),t[e]=i?t[e]:t[r]}}var a=this.getConfigurationCheck();for(n in a.mandatory){if(s(n,this.logger),!t.hasOwnProperty(n))throw new e.Exceptions.ConfigurationError(n);if(r=t[n],void 0===(i=a.mandatory[n](r)))throw new e.Exceptions.ConfigurationError(n,r);o[n]=i}for(n in a.optional)if(s(n,this.logger),t.hasOwnProperty(n)){if((r=t[n])instanceof Array&&0===r.length)continue;if(null===r||""===r||void 0===r)continue;if("number"==typeof r&&isNaN(r))continue;if(void 0===(i=a.optional[n](r)))throw new e.Exceptions.ConfigurationError(n,r);o[n]=i}var c={};for(n in o)c[n]={value:o[n]};for(n in Object.defineProperties(this.configuration,c),this.logger.log("configuration parameters after validation:"),o)this.logger.log("\xb7 "+n+": "+JSON.stringify(o[n]))}},getConfigurationCheck:{writable:!0,value:function(){return{mandatory:{},optional:{wsServers:function(t){var n,r,i;if("string"==typeof t)t=[{ws_uri:t}];else{if(!(t instanceof Array))return;for(r=t.length,n=0;n<r;n++)"string"==typeof t[n]&&(t[n]={ws_uri:t[n]})}if(0===t.length)return!1;for(r=t.length,n=0;n<r;n++){if(!t[n].ws_uri)return;if(t[n].weight&&!Number(t[n].weight))return;if(-1===(i=e.Grammar.parse(t[n].ws_uri,"absoluteURI")))return;if(["wss","ws","udp"].indexOf(i.scheme)<0)return;t[n].sip_uri="<sip:"+i.host+(i.port?":"+i.port:"")+";transport="+i.scheme.replace(/^wss$/i,"ws")+";lr>",t[n].weight||(t[n].weight=0),t[n].isError=!1,t[n].scheme=i.scheme.toUpperCase()}return t},keepAliveInterval:function(t){var n;if(e.Utils.isDecimal(t)&&(n=Number(t))>0)return n},keepAliveDebounce:function(t){var n;if(e.Utils.isDecimal(t)&&(n=Number(t))>0)return n},traceSip:function(e){if("boolean"==typeof e)return e},connectionTimeout:function(t){var n;if(e.Utils.isDecimal(t)&&(n=Number(t))>0)return n},maxReconnectionAttempts:function(t){var n;if(e.Utils.isDecimal(t)&&(n=Number(t))>=0)return n},reconnectionTimeout:function(t){var n;if(e.Utils.isDecimal(t)&&(n=Number(t))>0)return n}}}}}}),n.C=r,e.Web.Transport=n,n}}).call(this,n(28))},function(e,t,n){"use strict";(function(t){e.exports=function(e){var r=function(e,n,r){this.options=r||{},this.logger=e,this.observer=n,this.dtmfSender=null,this.shouldAcquireMedia=!0,this.CONTENT_TYPE="application/sdp",this.C={},this.C.DIRECTION={NULL:null,SENDRECV:"sendrecv",SENDONLY:"sendonly",RECVONLY:"recvonly",INACTIVE:"inactive"},this.logger.log("SessionDescriptionHandlerOptions: "+JSON.stringify(this.options)),this.direction=this.C.DIRECTION.NULL,this.modifiers=this.options.modifiers||[],Array.isArray(this.modifiers)||(this.modifiers=[this.modifiers]);var i=t.window||t;this.WebRTC={MediaStream:i.MediaStream,getUserMedia:i.navigator.mediaDevices.getUserMedia.bind(i.navigator.mediaDevices),RTCPeerConnection:i.RTCPeerConnection},this.iceGatheringDeferred=null,this.iceGatheringTimeout=!1,this.iceGatheringTimer=null,this.initPeerConnection(this.options.peerConnectionOptions),this.constraints=this.checkAndDefaultConstraints(this.options.constraints)};return r.defaultFactory=function(e,t){var i=e.ua.getLogger("sip.invitecontext.sessionDescriptionHandler",e.id),o=new(n(31))(e,t);return new r(i,o,t)},r.prototype=Object.create(e.SessionDescriptionHandler.prototype,{close:{writable:!0,value:function(){this.logger.log("closing PeerConnection"),this.peerConnection&&"closed"!==this.peerConnection.signalingState&&(this.peerConnection.getSenders?this.peerConnection.getSenders().forEach((function(e){e.track&&e.track.stop()})):(this.logger.warn("Using getLocalStreams which is deprecated"),this.peerConnection.getLocalStreams().forEach((function(e){e.getTracks().forEach((function(e){e.stop()}))}))),this.peerConnection.getReceivers?this.peerConnection.getReceivers().forEach((function(e){e.track&&e.track.stop()})):(this.logger.warn("Using getRemoteStreams which is deprecated"),this.peerConnection.getRemoteStreams().forEach((function(e){e.getTracks().forEach((function(e){e.stop()}))}))),this.resetIceGatheringComplete(),this.peerConnection.close())}},getDescription:{writable:!0,value:function(t,n){(t=t||{}).peerConnectionOptions&&this.initPeerConnection(t.peerConnectionOptions);var r=Object.assign({},this.constraints,t.constraints);return r=this.checkAndDefaultConstraints(r),JSON.stringify(r)!==JSON.stringify(this.constraints)&&(this.constraints=r,this.shouldAcquireMedia=!0),n=n||[],Array.isArray(n)||(n=[n]),n=n.concat(this.modifiers),e.Utils.Promise.resolve().then(function(){if(this.shouldAcquireMedia)return this.acquire(this.constraints).then(function(){this.shouldAcquireMedia=!1}.bind(this))}.bind(this)).then(function(){return this.createOfferOrAnswer(t.RTCOfferOptions,n)}.bind(this)).then(function(e){return this.emit("getDescription",e),{body:e.sdp,contentType:this.CONTENT_TYPE}}.bind(this))}},hasDescription:{writable:!0,value:function(e){return e===this.CONTENT_TYPE}},holdModifier:{writable:!0,value:function(t){return/a=(sendrecv|sendonly|recvonly|inactive)/.test(t.sdp)?(t.sdp=t.sdp.replace(/a=sendrecv\r\n/g,"a=sendonly\r\n"),t.sdp=t.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")):t.sdp=t.sdp.replace(/(m=[^\r]*\r\n)/g,"$1a=sendonly\r\n"),e.Utils.Promise.resolve(t)}},setDescription:{writable:!0,value:function(t,n,r){var i=this,o=this;(n=n||{}).peerConnectionOptions&&this.initPeerConnection(n.peerConnectionOptions),r=r||[],Array.isArray(r)||(r=[r]),r=r.concat(this.modifiers);var s={type:this.hasOffer("local")?"answer":"offer",sdp:t};return e.Utils.Promise.resolve().then(function(){if(this.shouldAcquireMedia&&this.options.alwaysAcquireMediaFirst)return this.acquire(this.constraints).then(function(){this.shouldAcquireMedia=!1}.bind(this))}.bind(this)).then((function(){return e.Utils.reducePromises(r,s)})).catch((function(t){if(t instanceof e.Exceptions.SessionDescriptionHandlerError)throw t;var n=new e.Exceptions.SessionDescriptionHandlerError("setDescription",t,"The modifiers did not resolve successfully");throw i.logger.error(n.message),o.emit("peerConnection-setRemoteDescriptionFailed",n),n})).then((function(e){return o.emit("setDescription",e),o.peerConnection.setRemoteDescription(e)})).catch((function(o){if(o instanceof e.Exceptions.SessionDescriptionHandlerError)throw o;if(/^m=video.+$/gm.test(t)&&!n.disableAudioFallback)return n.disableAudioFallback=!0,i.setDescription(t,n,[e.Web.Modifiers.stripVideo].concat(r));var s=new e.Exceptions.SessionDescriptionHandlerError("setDescription",o);throw i.logger.error(s.error),i.emit("peerConnection-setRemoteDescriptionFailed",s),s})).then((function(){o.peerConnection.getReceivers?o.emit("setRemoteDescription",o.peerConnection.getReceivers()):o.emit("setRemoteDescription",o.peerConnection.getRemoteStreams()),o.emit("confirmed",o)}))}},sendDtmf:{writable:!0,value:function(e,t){if(!this.dtmfSender&&this.hasBrowserGetSenderSupport()){var n=this.peerConnection.getSenders();n.length>0&&(this.dtmfSender=n[0].dtmf)}if(!this.dtmfSender&&this.hasBrowserTrackSupport()){var r=this.peerConnection.getLocalStreams();if(r.length>0){var i=r[0].getAudioTracks();i.length>0&&(this.dtmfSender=this.peerConnection.createDTMFSender(i[0]))}}if(!this.dtmfSender)return!1;try{this.dtmfSender.insertDTMF(e,t.duration,t.interToneGap)}catch(e){if("InvalidStateError"===e.type||"InvalidCharacterError"===e.type)return this.logger.error(e),!1;throw e}return this.logger.log("DTMF sent via RTP: "+e.toString()),!0}},getDirection:{writable:!0,value:function(){return this.direction}},createOfferOrAnswer:{writable:!0,value:function(t,n){var r,i=this,o=this,s=this.peerConnection;return t=t||{},r=o.hasOffer("remote")?"createAnswer":"createOffer",s[r](t).catch((function(t){if(t instanceof e.Exceptions.SessionDescriptionHandlerError)throw t;var n=new e.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",t,"peerConnection-"+r+"Failed");throw i.emit("peerConnection-"+r+"Failed",n),n})).then((function(t){return e.Utils.reducePromises(n,o.createRTCSessionDescriptionInit(t))})).then((function(e){return o.resetIceGatheringComplete(),s.setLocalDescription(e)})).catch((function(t){if(t instanceof e.Exceptions.SessionDescriptionHandlerError)throw t;var n=new e.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",t,"peerConnection-SetLocalDescriptionFailed");throw i.emit("peerConnection-SetLocalDescriptionFailed",n),n})).then((function(){return o.waitForIceGatheringComplete()})).then((function(){var t=o.createRTCSessionDescriptionInit(o.peerConnection.localDescription);return e.Utils.reducePromises(n,t)})).then((function(e){return o.setDirection(e.sdp),e})).catch((function(t){if(t instanceof e.Exceptions.SessionDescriptionHandlerError)throw t;var n=new e.Exceptions.SessionDescriptionHandlerError("createOfferOrAnswer",t);throw i.logger.error(n),n}))}},createRTCSessionDescriptionInit:{writable:!0,value:function(e){return{type:e.type,sdp:e.sdp}}},addDefaultIceCheckingTimeout:{writable:!0,value:function(e){return void 0===e.iceCheckingTimeout&&(e.iceCheckingTimeout=5e3),e}},addDefaultIceServers:{writable:!0,value:function(e){return e.iceServers||(e.iceServers=[{urls:"stun:stun.l.google.com:19302"}]),e}},checkAndDefaultConstraints:{writable:!0,value:function(e){var t={audio:!0,video:!this.options.alwaysAcquireMediaFirst};return e=e||t,0===Object.keys(e).length&&e.constructor===Object?t:e}},hasBrowserTrackSupport:{writable:!0,value:function(){return Boolean(this.peerConnection.addTrack)}},hasBrowserGetSenderSupport:{writable:!0,value:function(){return Boolean(this.peerConnection.getSenders)}},initPeerConnection:{writable:!0,value:function(t){var n=this;t=t||{},(t=this.addDefaultIceCheckingTimeout(t)).rtcConfiguration=t.rtcConfiguration||{},t.rtcConfiguration=this.addDefaultIceServers(t.rtcConfiguration),this.logger.log("initPeerConnection"),this.peerConnection&&(this.logger.log("Already have a peer connection for this session. Tearing down."),this.resetIceGatheringComplete(),this.peerConnection.close()),this.peerConnection=new this.WebRTC.RTCPeerConnection(t.rtcConfiguration),this.logger.log("New peer connection created"),"ontrack"in this.peerConnection?this.peerConnection.addEventListener("track",(function(e){n.logger.log("track added"),n.observer.trackAdded(),n.emit("addTrack",e)})):(this.logger.warn("Using onaddstream which is deprecated"),this.peerConnection.onaddstream=function(e){n.logger.log("stream added"),n.emit("addStream",e)}),this.peerConnection.onicecandidate=function(e){n.emit("iceCandidate",e),e.candidate?n.logger.log("ICE candidate received: "+(null===e.candidate.candidate?null:e.candidate.candidate.trim())):null===e.candidate&&(n.logger.log("ICE candidate gathering complete"),n.triggerIceGatheringComplete())},this.peerConnection.onicegatheringstatechange=function(){switch(n.logger.log("RTCIceGatheringState changed: "+this.iceGatheringState),this.iceGatheringState){case"gathering":n.emit("iceGathering",this),!n.iceGatheringTimer&&t.iceCheckingTimeout&&(n.iceGatheringTimeout=!1,n.iceGatheringTimer=e.Timers.setTimeout((function(){n.logger.log("RTCIceChecking Timeout Triggered after "+t.iceCheckingTimeout+" milliseconds"),n.iceGatheringTimeout=!0,n.triggerIceGatheringComplete()}),t.iceCheckingTimeout));break;case"complete":n.triggerIceGatheringComplete()}},this.peerConnection.oniceconnectionstatechange=function(){var e;switch(this.iceConnectionState){case"new":e="iceConnection";break;case"checking":e="iceConnectionChecking";break;case"connected":e="iceConnectionConnected";break;case"completed":e="iceConnectionCompleted";break;case"failed":e="iceConnectionFailed";break;case"disconnected":e="iceConnectionDisconnected";break;case"closed":e="iceConnectionClosed";break;default:return void n.logger.warn("Unknown iceConnection state:",this.iceConnectionState)}n.emit(e,this)}}},acquire:{writable:!0,value:function(t){var n=this;return t=this.checkAndDefaultConstraints(t),new e.Utils.Promise(function(e,n){this.logger.log("acquiring local media"),this.emit("userMediaRequest",t),t.audio||t.video?this.WebRTC.getUserMedia(t).then(function(t){this.observer.trackAdded(),this.emit("userMedia",t),e(t)}.bind(this)).catch(function(e){this.emit("userMediaFailed",e),n(e)}.bind(this)):e([])}.bind(this)).catch((function(t){if(t instanceof e.Exceptions.SessionDescriptionHandlerError)throw t;var r=new e.Exceptions.SessionDescriptionHandlerError("acquire",t,"unable to acquire streams");throw n.logger.error(r.message),n.logger.error(r.error),r})).then(function(t){this.logger.log("acquired local media streams");try{return this.peerConnection.removeTrack&&this.peerConnection.getSenders().forEach((function(e){this.peerConnection.removeTrack(e)}),this),t}catch(t){return e.Utils.Promise.reject(t)}}.bind(this)).catch((function(t){if(t instanceof e.Exceptions.SessionDescriptionHandlerError)throw t;var r=new e.Exceptions.SessionDescriptionHandlerError("acquire",t,"error removing streams");throw n.logger.error(r.message),n.logger.error(r.error),r})).then(function(t){try{(t=[].concat(t)).forEach((function(e){this.peerConnection.addTrack?e.getTracks().forEach((function(t){this.peerConnection.addTrack(t,e)}),this):this.peerConnection.addStream(e)}),this)}catch(t){return e.Utils.Promise.reject(t)}return e.Utils.Promise.resolve()}.bind(this)).catch((function(t){if(t instanceof e.Exceptions.SessionDescriptionHandlerError)throw t;var r=new e.Exceptions.SessionDescriptionHandlerError("acquire",t,"error adding stream");throw n.logger.error(r.message),n.logger.error(r.error),r}))}},hasOffer:{writable:!0,value:function(e){var t="have-"+e+"-offer";return this.peerConnection.signalingState===t}},isIceGatheringComplete:{writable:!0,value:function(){return"complete"===this.peerConnection.iceGatheringState||this.iceGatheringTimeout}},resetIceGatheringComplete:{writable:!0,value:function(){this.iceGatheringTimeout=!1,this.iceGatheringTimer&&(e.Timers.clearTimeout(this.iceGatheringTimer),this.iceGatheringTimer=null),this.iceGatheringDeferred&&(this.iceGatheringDeferred.reject(),this.iceGatheringDeferred=null)}},setDirection:{writable:!0,value:function(e){var t=e.match(/a=(sendrecv|sendonly|recvonly|inactive)/);if(null===t)return this.direction=this.C.DIRECTION.NULL,void this.observer.directionChanged();var n=t[1];switch(n){case this.C.DIRECTION.SENDRECV:case this.C.DIRECTION.SENDONLY:case this.C.DIRECTION.RECVONLY:case this.C.DIRECTION.INACTIVE:this.direction=n;break;default:this.direction=this.C.DIRECTION.NULL}this.observer.directionChanged()}},triggerIceGatheringComplete:{writable:!0,value:function(){this.isIceGatheringComplete()&&(this.emit("iceGatheringComplete",this),this.iceGatheringTimer&&(e.Timers.clearTimeout(this.iceGatheringTimer),this.iceGatheringTimer=null),this.iceGatheringDeferred&&(this.iceGatheringDeferred.resolve(),this.iceGatheringDeferred=null))}},waitForIceGatheringComplete:{writable:!0,value:function(){return this.isIceGatheringComplete()?e.Utils.Promise.resolve():(this.isIceGatheringDeferred||(this.iceGatheringDeferred=e.Utils.defer()),this.iceGatheringDeferred.promise)}}}),r}}).call(this,n(28))},function(e,t,n){"use strict";var r=function(e,t){this.session=e||{},this.options=t||{}};r.prototype={trackAdded:function(){this.session.emit("trackAdded")},directionChanged:function(){this.session.emit("directionChanged")}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){var t,n=[],r=[],i=[];function o(t,n,r){for(var i,o=e.Utils.buildStatusLine(t),s=n.getHeaders("via"),a=s.length,c=0;c<a;c++)o+="Via: "+s[c]+"\r\n";i=n.getHeader("To"),n.to_tag||(i+=";tag="+e.Utils.newTag()),o+="To: "+i+"\r\n",o+="From: "+n.getHeader("From")+"\r\n",o+="Call-ID: "+n.call_id+"\r\n",o+="CSeq: "+n.cseq+" "+n.method+"\r\n",o+="\r\n",r.send(o)}n.push((function(e,t,n){if(!e.ruri||"sip"!==e.ruri.scheme)return o(416,e,n),!1})),n.push((function(e,t,n){if(!e.to_tag&&e.call_id.substr(0,5)===t.configuration.sipjsId)return o(482,e,n),!1})),n.push((function(t,n,r){if(e.Utils.str_utf8_length(t.body)<t.getHeader("content-length"))return o(400,t,r),!1})),n.push((function(t,n,r){var i,s,a=t.from_tag,c=t.call_id,u=t.cseq;if(!t.to_tag)if(t.method===e.C.INVITE){if(i=n.transactions.ist[t.via_branch])return;for(s in n.transactions.ist)if((i=n.transactions.ist[s]).request.from_tag===a&&i.request.call_id===c&&i.request.cseq===u)return o(482,t,r),!1}else{if(i=n.transactions.nist[t.via_branch])return;for(s in n.transactions.nist)if((i=n.transactions.nist[s]).request.from_tag===a&&i.request.call_id===c&&i.request.cseq===u)return o(482,t,r),!1}})),r.push((function(e,t){if(e.getHeaders("via").length>1)return t.getLogger("sip.sanitycheck").warn("More than one Via header field present in the response. Dropping the response"),!1})),r.push((function(e,t){var n=t.configuration.viaHost;if(e.via.host!==n||void 0!==e.via.port)return t.getLogger("sip.sanitycheck").warn("Via sent-by in the response does not match UA Via host value. Dropping the response"),!1})),r.push((function(t,n){if(e.Utils.str_utf8_length(t.body)<t.getHeader("content-length"))return n.getLogger("sip.sanitycheck").warn("Message body length is lower than the value in Content-Length header field. Dropping the response"),!1})),i.push((function(e,t){for(var n=["from","to","call_id","cseq","via"],r=n.length;r--;)if(!e.hasHeader(n[r]))return t.getLogger("sip.sanitycheck").warn("Missing mandatory header field : "+n[r]+". Dropping the response"),!1})),t=function(t,o,s){var a;for(a=i.length;a--;)if(!1===i[a](t,o,s))return!1;if(t instanceof e.IncomingRequest){for(a=n.length;a--;)if(!1===n[a](t,o,s))return!1}else if(t instanceof e.IncomingResponse)for(a=r.length;a--;)if(!1===r[a](t,o,s))return!1;return!0},e.sanityCheck=t}},function(e,t,n){"use strict";var r=n(34);e.exports=function(e){var t;return(t=function(e){this.logger=e.getLogger("sipjs.digestauthentication"),this.username=e.configuration.authorizationUser,this.password=e.configuration.password,this.cnonce=null,this.nc=0,this.ncHex="00000000",this.response=null}).prototype.authenticate=function(t,n){if(this.algorithm=n.algorithm,this.realm=n.realm,this.nonce=n.nonce,this.opaque=n.opaque,this.stale=n.stale,this.algorithm){if("MD5"!==this.algorithm)return this.logger.warn('challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(n.qop)if(n.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(n.qop.indexOf("auth-int")>-1))return this.logger.warn('challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this.qop="auth-int"}else this.qop=null;return this.method=t.method,this.uri=t.ruri,this.cnonce=e.createRandomToken(12),this.nc+=1,this.updateNcHex(),4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(),!0},t.prototype.calculateResponse=function(){var e,t;e=r(this.username+":"+this.realm+":"+this.password),"auth"===this.qop?(t=r(this.method+":"+this.uri),this.response=r(e+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+t)):"auth-int"===this.qop?(t=r(this.method+":"+this.uri+":"+r(this.body?this.body:"")),this.response=r(e+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+t)):null===this.qop&&(t=r(this.method+":"+this.uri),this.response=r(e+":"+this.nonce+":"+t))},t.prototype.toString=function(){var e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")},t.prototype.updateNcHex=function(){var e=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-e.length)+e},t}},function(e,t,n){var r;e.exports=(r=n(35),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],m=e[t+4],g=e[t+5],v=e[t+6],y=e[t+7],b=e[t+8],S=e[t+9],T=e[t+10],_=e[t+11],E=e[t+12],C=e[t+13],w=e[t+14],R=e[t+15],k=o[0],A=o[1],O=o[2],I=o[3];k=u(k,A,O,I,s,7,a[0]),I=u(I,k,A,O,c,12,a[1]),O=u(O,I,k,A,f,17,a[2]),A=u(A,O,I,k,p,22,a[3]),k=u(k,A,O,I,m,7,a[4]),I=u(I,k,A,O,g,12,a[5]),O=u(O,I,k,A,v,17,a[6]),A=u(A,O,I,k,y,22,a[7]),k=u(k,A,O,I,b,7,a[8]),I=u(I,k,A,O,S,12,a[9]),O=u(O,I,k,A,T,17,a[10]),A=u(A,O,I,k,_,22,a[11]),k=u(k,A,O,I,E,7,a[12]),I=u(I,k,A,O,C,12,a[13]),O=u(O,I,k,A,w,17,a[14]),k=l(k,A=u(A,O,I,k,R,22,a[15]),O,I,c,5,a[16]),I=l(I,k,A,O,v,9,a[17]),O=l(O,I,k,A,_,14,a[18]),A=l(A,O,I,k,s,20,a[19]),k=l(k,A,O,I,g,5,a[20]),I=l(I,k,A,O,T,9,a[21]),O=l(O,I,k,A,R,14,a[22]),A=l(A,O,I,k,m,20,a[23]),k=l(k,A,O,I,S,5,a[24]),I=l(I,k,A,O,w,9,a[25]),O=l(O,I,k,A,p,14,a[26]),A=l(A,O,I,k,b,20,a[27]),k=l(k,A,O,I,C,5,a[28]),I=l(I,k,A,O,f,9,a[29]),O=l(O,I,k,A,y,14,a[30]),k=d(k,A=l(A,O,I,k,E,20,a[31]),O,I,g,4,a[32]),I=d(I,k,A,O,b,11,a[33]),O=d(O,I,k,A,_,16,a[34]),A=d(A,O,I,k,w,23,a[35]),k=d(k,A,O,I,c,4,a[36]),I=d(I,k,A,O,m,11,a[37]),O=d(O,I,k,A,y,16,a[38]),A=d(A,O,I,k,T,23,a[39]),k=d(k,A,O,I,C,4,a[40]),I=d(I,k,A,O,s,11,a[41]),O=d(O,I,k,A,p,16,a[42]),A=d(A,O,I,k,v,23,a[43]),k=d(k,A,O,I,S,4,a[44]),I=d(I,k,A,O,E,11,a[45]),O=d(O,I,k,A,R,16,a[46]),k=h(k,A=d(A,O,I,k,f,23,a[47]),O,I,s,6,a[48]),I=h(I,k,A,O,y,10,a[49]),O=h(O,I,k,A,w,15,a[50]),A=h(A,O,I,k,g,21,a[51]),k=h(k,A,O,I,E,6,a[52]),I=h(I,k,A,O,p,10,a[53]),O=h(O,I,k,A,T,15,a[54]),A=h(A,O,I,k,c,21,a[55]),k=h(k,A,O,I,b,6,a[56]),I=h(I,k,A,O,R,10,a[57]),O=h(O,I,k,A,v,15,a[58]),A=h(A,O,I,k,C,21,a[59]),k=h(k,A,O,I,m,6,a[60]),I=h(I,k,A,O,_,10,a[61]),O=h(O,I,k,A,f,15,a[62]),A=h(A,O,I,k,S,21,a[63]),o[0]=o[0]+k|0,o[1]=o[1]+A|0,o[2]=o[2]+O|0,o[3]=o[3]+I|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),s=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+i+s;return(a<<o|a>>>32-o)+t}function l(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,r,i,o,s){var a=e+(t^n^r)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+i+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),r.MD5)},function(e,t,n){var r;e.exports=r=r||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){t=t;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,u=e.min(4*c,i);if(c){for(var l=0;l<c;l+=o)this._doProcessBlock(r,l);var d=r.splice(0,c);n.sigBytes-=u}return new s.init(d,u)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(i.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math)},function(e,t,n){"use strict";var r=n(37);e.exports=function(e){return{parse:function(t,n){var i={startRule:n,SIP:e};try{r.parse(t,i)}catch(e){i.data=-1}return i.data}}}},function(e,t,n){"use strict";function r(e,t,n,i){this.message=e,this.expected=t,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}return"Expected "+function(e){var t,r,i,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(i=e[t],n[i.type](i));if(o.sort(),o.length>0){for(t=1,r=1;t<o.length;t++)o[t-1]!==o[t]&&(o[r]=o[t],r++);o.length=r}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){t=void 0!==t?t:{};var n,i={},o={Contact:119,Name_Addr_Header:156,Record_Route:176,Request_Response:81,SIP_URI:45,Subscription_State:186,Supported:191,Require:182,Via:194,absoluteURI:84,Call_ID:118,Content_Disposition:130,Content_Length:135,Content_Type:136,CSeq:146,displayName:122,Event:149,From:151,host:52,Max_Forwards:154,Min_SE:213,Proxy_Authenticate:157,quoted_string:40,Refer_To:178,Replaces:179,Session_Expires:210,stun_URI:217,To:192,turn_URI:223,uuid:226,WWW_Authenticate:209,challenge:158,sipfrag:230,Referred_By:231},s=119,a=["\r\n",v("\r\n",!1),/^[0-9]/,y([["0","9"]],!1,!1),/^[a-zA-Z]/,y([["a","z"],["A","Z"]],!1,!1),/^[0-9a-fA-F]/,y([["0","9"],["a","f"],["A","F"]],!1,!1),/^[\0-\xFF]/,y([["\0","\xff"]],!1,!1),/^["]/,y(['"'],!1,!1)," ",v(" ",!1),"\t",v("\t",!1),/^[a-zA-Z0-9]/,y([["a","z"],["A","Z"],["0","9"]],!1,!1),";",v(";",!1),"/",v("/",!1),"?",v("?",!1),":",v(":",!1),"@",v("@",!1),"&",v("&",!1),"=",v("=",!1),"+",v("+",!1),"$",v("$",!1),",",v(",",!1),"-",v("-",!1),"_",v("_",!1),".",v(".",!1),"!",v("!",!1),"~",v("~",!1),"*",v("*",!1),"'",v("'",!1),"(",v("(",!1),")",v(")",!1),"%",v("%",!1),function(){return" "},function(){return":"},/^[!-~]/,y([["!","~"]],!1,!1),/^[\x80-\uFFFF]/,y([["\x80","\uffff"]],!1,!1),/^[\x80-\xBF]/,y([["\x80","\xbf"]],!1,!1),/^[a-f]/,y([["a","f"]],!1,!1),"`",v("`",!1),"<",v("<",!1),">",v(">",!1),"\\",v("\\",!1),"[",v("[",!1),"]",v("]",!1),"{",v("{",!1),"}",v("}",!1),function(){return"*"},function(){return"/"},function(){return"="},function(){return"("},function(){return")"},function(){return">"},function(){return"<"},function(){return","},function(){return";"},function(){return":"},function(){return'"'},/^[!-']/,y([["!","'"]],!1,!1),/^[*-[]/,y([["*","["]],!1,!1),/^[\]-~]/,y([["]","~"]],!1,!1),function(e){return e},/^[#-[]/,y([["#","["]],!1,!1),/^[\0-\t]/,y([["\0","\t"]],!1,!1),/^[\x0B-\f]/,y([["\v","\f"]],!1,!1),/^[\x0E-\x7F]/,y([["\x0e","\x7f"]],!1,!1),function(){t.data.uri=new t.SIP.URI(t.data.scheme,t.data.user,t.data.host,t.data.port),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port},function(){t.data.uri=new t.SIP.URI(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params,"SIP_URI"===t.startRule&&(t.data=t.data.uri)},"sips",v("sips",!0),"sip",v("sip",!0),function(e){t.data.scheme=e},function(){t.data.user=decodeURIComponent(m().slice(0,-1))},function(){t.data.password=m()},function(){return t.data.host=m(),t.data.host},function(){return t.data.host_type="domain",m()},/^[a-zA-Z0-9_\-]/,y([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),/^[a-zA-Z0-9\-]/,y([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),function(){return t.data.host_type="IPv6",m()},"::",v("::",!1),function(){return t.data.host_type="IPv6",m()},function(){return t.data.host_type="IPv4",m()},"25",v("25",!1),/^[0-5]/,y([["0","5"]],!1,!1),"2",v("2",!1),/^[0-4]/,y([["0","4"]],!1,!1),"1",v("1",!1),/^[1-9]/,y([["1","9"]],!1,!1),function(e){return e=parseInt(e.join("")),t.data.port=e,e},"transport=",v("transport=",!0),"udp",v("udp",!0),"tcp",v("tcp",!0),"sctp",v("sctp",!0),"tls",v("tls",!0),function(e){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.transport=e.toLowerCase()},"user=",v("user=",!0),"phone",v("phone",!0),"ip",v("ip",!0),function(e){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.user=e.toLowerCase()},"method=",v("method=",!0),function(e){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.method=e},"ttl=",v("ttl=",!0),function(e){t.data.params||(t.data.params={}),t.data.params.ttl=e},"maddr=",v("maddr=",!0),function(e){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.maddr=e},"lr",v("lr",!0),function(){t.data.uri_params||(t.data.uri_params={}),t.data.uri_params.lr=void 0},function(e,n){t.data.uri_params||(t.data.uri_params={}),n=null===n?void 0:n[1],t.data.uri_params[e.toLowerCase()]=n},function(e,n){e=e.join("").toLowerCase(),n=n.join(""),t.data.uri_headers||(t.data.uri_headers={}),t.data.uri_headers[e]?t.data.uri_headers[e].push(n):t.data.uri_headers[e]=[n]},function(){"Refer_To"===t.startRule&&(t.data.uri=new t.SIP.URI(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params)},"//",v("//",!1),function(){t.data.scheme=m()},v("SIP",!0),function(){t.data.sip_version=m()},"INVITE",v("INVITE",!1),"ACK",v("ACK",!1),"VXACH",v("VXACH",!1),"OPTIONS",v("OPTIONS",!1),"BYE",v("BYE",!1),"CANCEL",v("CANCEL",!1),"REGISTER",v("REGISTER",!1),"SUBSCRIBE",v("SUBSCRIBE",!1),"NOTIFY",v("NOTIFY",!1),"REFER",v("REFER",!1),"PUBLISH",v("PUBLISH",!1),function(){return t.data.method=m(),t.data.method},function(e){t.data.status_code=parseInt(e.join(""))},function(){t.data.reason_phrase=m()},function(){t.data=m()},function(){var e,n;for(n=t.data.multi_header.length,e=0;e<n;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},function(){var e;t.data.multi_header||(t.data.multi_header=[]);try{e=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:u,offset:g().start.offset,parsed:e})},function(e){'"'===(e=m().trim())[0]&&(e=e.substring(1,e.length-1)),t.data.displayName=e},"q",v("q",!0),function(e){t.data.params||(t.data.params={}),t.data.params.q=e},"expires",v("expires",!0),function(e){t.data.params||(t.data.params={}),t.data.params.expires=e},function(e){return parseInt(e.join(""))},"0",v("0",!1),function(){return parseFloat(m())},function(e,n){t.data.params||(t.data.params={}),n=null===n?void 0:n[1],t.data.params[e.toLowerCase()]=n},"render",v("render",!0),"session",v("session",!0),"icon",v("icon",!0),"alert",v("alert",!0),function(){"Content_Disposition"===t.startRule&&(t.data.type=m().toLowerCase())},"handling",v("handling",!0),"optional",v("optional",!0),"required",v("required",!0),function(e){t.data=parseInt(e.join(""))},function(){t.data=m()},"text",v("text",!0),"image",v("image",!0),"audio",v("audio",!0),"video",v("video",!0),"application",v("application",!0),"message",v("message",!0),"multipart",v("multipart",!0),"x-",v("x-",!0),function(e){t.data.value=parseInt(e.join(""))},function(e){t.data=e},function(e){t.data.event=e.toLowerCase()},function(){var e=t.data.tag;t.data=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},"tag",v("tag",!0),function(e){t.data.tag=e},function(e){t.data=parseInt(e.join(""))},function(e){t.data=e},function(){t.data=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params)},"digest",v("Digest",!0),"realm",v("realm",!0),function(e){t.data.realm=e},"domain",v("domain",!0),"nonce",v("nonce",!0),function(e){t.data.nonce=e},"opaque",v("opaque",!0),function(e){t.data.opaque=e},"stale",v("stale",!0),"true",v("true",!0),function(){t.data.stale=!0},"false",v("false",!0),function(){t.data.stale=!1},"algorithm",v("algorithm",!0),"md5",v("MD5",!0),"md5-sess",v("MD5-sess",!0),function(e){t.data.algorithm=e.toUpperCase()},"qop",v("qop",!0),"auth-int",v("auth-int",!0),"auth",v("auth",!0),function(e){t.data.qop||(t.data.qop=[]),t.data.qop.push(e.toLowerCase())},function(e){t.data.value=parseInt(e.join(""))},function(){var e,n;for(n=t.data.multi_header.length,e=0;e<n;e++)if(null===t.data.multi_header[e].parsed){t.data=null;break}null!==t.data?t.data=t.data.multi_header:t.data=-1},function(){var e;t.data.multi_header||(t.data.multi_header=[]);try{e=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch(t){e=null}t.data.multi_header.push({position:u,offset:g().start.offset,parsed:e})},function(){t.data=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params)},function(){t.data.replaces_from_tag&&t.data.replaces_to_tag||(t.data=-1)},function(){t.data={call_id:t.data}},"from-tag",v("from-tag",!0),function(e){t.data.replaces_from_tag=e},"to-tag",v("to-tag",!0),function(e){t.data.replaces_to_tag=e},"early-only",v("early-only",!0),function(){t.data.early_only=!0},function(e,t){return t},function(e,t){return function(e,t){return[e].concat(t)}(e,t)},function(e){"Require"===t.startRule&&(t.data=e||[])},function(e){t.data.value=parseInt(e.join(""))},"active",v("active",!0),"pending",v("pending",!0),"terminated",v("terminated",!0),function(){t.data.state=m()},"reason",v("reason",!0),function(e){void 0!==e&&(t.data.reason=e)},function(e){void 0!==e&&(t.data.expires=e)},"retry_after",v("retry_after",!0),function(e){void 0!==e&&(t.data.retry_after=e)},"deactivated",v("deactivated",!0),"probation",v("probation",!0),"rejected",v("rejected",!0),"timeout",v("timeout",!0),"giveup",v("giveup",!0),"noresource",v("noresource",!0),"invariant",v("invariant",!0),function(e){"Supported"===t.startRule&&(t.data=e||[])},function(){var e=t.data.tag;t.data=new t.SIP.NameAddrHeader(t.data.uri,t.data.displayName,t.data.params),e&&t.data.setParam("tag",e)},"ttl",v("ttl",!0),function(e){t.data.ttl=e},"maddr",v("maddr",!0),function(e){t.data.maddr=e},"received",v("received",!0),function(e){t.data.received=e},"branch",v("branch",!0),function(e){t.data.branch=e},"rport",v("rport",!0),function(){"undefined"!=typeof response_port&&(t.data.rport=response_port.join(""))},function(e){t.data.protocol=e},v("UDP",!0),v("TCP",!0),v("TLS",!0),v("SCTP",!0),function(e){t.data.transport=e},function(){t.data.host=m()},function(e){t.data.port=parseInt(e.join(""))},function(e){return parseInt(e.join(""))},function(e){"Session_Expires"===t.startRule&&(t.data.deltaSeconds=e)},"refresher",v("refresher",!1),"uas",v("uas",!1),"uac",v("uac",!1),function(e){"Session_Expires"===t.startRule&&(t.data.refresher=e)},function(e){"Min_SE"===t.startRule&&(t.data=e)},"stuns",v("stuns",!0),"stun",v("stun",!0),function(e){t.data.scheme=e},function(e){t.data.host=e},"?transport=",v("?transport=",!1),"turns",v("turns",!0),"turn",v("turn",!0),function(){t.data.transport=transport},function(){t.data=m()},"Referred-By",v("Referred-By",!1),"b",v("b",!1),"cid",v("cid",!1)],c=[E('2 ""6 7!'),E('4"""5!7#'),E('4$""5!7%'),E('4&""5!7\''),E(";'.# &;("),E('4(""5!7)'),E('4*""5!7+'),E('2,""6,7-'),E('2.""6.7/'),E('40""5!71'),E('22""6273.\x89 &24""6475.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),E(";).# &;,"),E('2F""6F7G.} &2H""6H7I.q &2J""6J7K.e &2L""6L7M.Y &2N""6N7O.M &2P""6P7Q.A &2R""6R7S.5 &2T""6T7U.) &2V""6V7W'),E('%%2X""6X7Y/5#;#/,$;#/#$+#)(#\'#("\'#&\'#/"!&,)'),E('%%$;$0#*;$&/,#; /#$+")("\'#&\'#." &"/=#$;$/&#0#*;$&&&#/\'$8":Z" )("\'#&\'#'),E(';.." &"'),E("%$;'.# &;(0)*;'.# &;(&/?#28\"\"6879/0$;//'$8#:[# )(#'#(\"'#&'#"),E('%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+")("\'#&\'#0=*%$;.0#*;.&/,#;2/#$+")("\'#&\'#&/#$+")("\'#&\'#/"!&,)'),E('4\\""5!7].# &;3'),E('4^""5!7_'),E('4`""5!7a'),E(';!.) &4b""5!7c'),E('%$;).\x95 &2F""6F7G.\x89 &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/\x9e#0\x9b*;).\x95 &2F""6F7G.\x89 &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),E('%$;).\x89 &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/\x92#0\x8f*;).\x89 &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),E('2T""6T7U.\xe3 &2V""6V7W.\xd7 &2f""6f7g.\xcb &2h""6h7i.\xbf &2:""6:7;.\xb3 &2D""6D7E.\xa7 &22""6273.\x9b &28""6879.\x8f &2j""6j7k.\x83 &;&.} &24""6475.q &2l""6l7m.e &2n""6n7o.Y &26""6677.M &2>""6>7?.A &2p""6p7q.5 &2r""6r7s.) &;\'.# &;('),E('%$;).\u012b &2F""6F7G.\u011f &2J""6J7K.\u0113 &2L""6L7M.\u0107 &2X""6X7Y.\xfb &2P""6P7Q.\xef &2H""6H7I.\xe3 &2@""6@7A.\xd7 &2d""6d7e.\xcb &2R""6R7S.\xbf &2N""6N7O.\xb3 &2T""6T7U.\xa7 &2V""6V7W.\x9b &2f""6f7g.\x8f &2h""6h7i.\x83 &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s/\u0134#0\u0131*;).\u012b &2F""6F7G.\u011f &2J""6J7K.\u0113 &2L""6L7M.\u0107 &2X""6X7Y.\xfb &2P""6P7Q.\xef &2H""6H7I.\xe3 &2@""6@7A.\xd7 &2d""6d7e.\xcb &2R""6R7S.\xbf &2N""6N7O.\xb3 &2T""6T7U.\xa7 &2V""6V7W.\x9b &2f""6f7g.\x8f &2h""6h7i.\x83 &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s&&&#/"!&,)'),E("%;//?#2P\"\"6P7Q/0$;//'$8#:t# )(#'#(\"'#&'#"),E("%;//?#24\"\"6475/0$;//'$8#:u# )(#'#(\"'#&'#"),E("%;//?#2>\"\"6>7?/0$;//'$8#:v# )(#'#(\"'#&'#"),E("%;//?#2T\"\"6T7U/0$;//'$8#:w# )(#'#(\"'#&'#"),E("%;//?#2V\"\"6V7W/0$;//'$8#:x# )(#'#(\"'#&'#"),E('%2h""6h7i/0#;//\'$8":y" )("\'#&\'#'),E('%;//6#2f""6f7g/\'$8":z" )("\'#&\'#'),E("%;//?#2D\"\"6D7E/0$;//'$8#:{# )(#'#(\"'#&'#"),E("%;//?#22\"\"6273/0$;//'$8#:|# )(#'#(\"'#&'#"),E("%;//?#28\"\"6879/0$;//'$8#:}# )(#'#(\"'#&'#"),E("%;//0#;&/'$8\":~\" )(\"'#&'#"),E("%;&/0#;//'$8\":~\" )(\"'#&'#"),E("%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#(\"'#&'#"),E('4\x7f""5!7\x80.A &4\x81""5!7\x82.5 &4\x83""5!7\x84.) &;3.# &;.'),E("%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#(\"'#&'#/\"!&,)"),E("%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/\"!&,)/1$;&/($8$:\x85$!!)($'#(#'#(\"'#&'#"),E(';..G &2L""6L7M.; &4\x86""5!7\x87./ &4\x83""5!7\x84.# &;3'),E('%2j""6j7k/J#4\x88""5!7\x89.5 &4\x8a""5!7\x8b.) &4\x8c""5!7\x8d/#$+")("\'#&\'#'),E("%;N/M#28\"\"6879/>$;O.\" &\"/0$;S/'$8$:\x8e$ )($'#(#'#(\"'#&'#"),E("%;N/d#28\"\"6879/U$;O.\" &\"/G$;S/>$;_/5$;l.\" &\"/'$8&:\x8f& )(&'#(%'#($'#(#'#(\"'#&'#"),E('%3\x90""5$7\x91.) &3\x92""5#7\x93/\' 8!:\x94!! )'),E('%;P/]#%28""6879/,#;R/#$+")("\'#&\'#." &"/6$2:""6:7;/\'$8#:\x95# )(#\'#("\'#&\'#'),E("$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#"),E('2<""6<7=.q &2>""6>7?.e &2@""6@7A.Y &2B""6B7C.M &2D""6D7E.A &22""6273.5 &26""6677.) &24""6475'),E('%$;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E0e*;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E&/& 8!:\x96! )'),E('%;T/J#%28""6879/,#;^/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),E("%;U.) &;\\.# &;X/& 8!:\x97! )"),E('%$%;V/2#2J""6J7K/#$+")("\'#&\'#0<*%;V/2#2J""6J7K/#$+")("\'#&\'#&/D#;W/;$2J""6J7K." &"/\'$8#:\x98# )(#\'#("\'#&\'#'),E('$4\x99""5!7\x9a/,#0)*4\x99""5!7\x9a&&&#'),E('%4$""5!7%/?#$4\x9b""5!7\x9c0)*4\x9b""5!7\x9c&/#$+")("\'#&\'#'),E('%2l""6l7m/?#;Y/6$2n""6n7o/\'$8#:\x9d# )(#\'#("\'#&\'#'),E('%%;Z/\xb3#28""6879/\xa4$;Z/\x9b$28""6879/\x8c$;Z/\x83$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+-)(-\'#(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0790 &%2\x9e""6\x9e7\x9f/\xa4#;Z/\x9b$28""6879/\x8c$;Z/\x83$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+,)(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u06f9 &%2\x9e""6\x9e7\x9f/\x8c#;Z/\x83$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u067a &%2\x9e""6\x9e7\x9f/t#;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0613 &%2\x9e""6\x9e7\x9f/\\#;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+&)(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u05c4 &%2\x9e""6\x9e7\x9f/D#;Z/;$28""6879/,$;[/#$+$)($\'#(#\'#("\'#&\'#.\u058d &%2\x9e""6\x9e7\x9f/,#;[/#$+")("\'#&\'#.\u056e &%2\x9e""6\x9e7\x9f/,#;Z/#$+")("\'#&\'#.\u054f &%;Z/\x9b#2\x9e""6\x9e7\x9f/\x8c$;Z/\x83$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$++)(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u04c7 &%;Z/\xaa#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x83$2\x9e""6\x9e7\x9f/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0430 &%;Z/\xb9#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x92$%28""6879/,#;Z/#$+")("\'#&\'#." &"/k$2\x9e""6\x9e7\x9f/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+))()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u038a &%;Z/\xc8#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xa1$%28""6879/,#;Z/#$+")("\'#&\'#." &"/z$%28""6879/,#;Z/#$+")("\'#&\'#." &"/S$2\x9e""6\x9e7\x9f/D$;Z/;$28""6879/,$;[/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u02d5 &%;Z/\xd7#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xb0$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x89$%28""6879/,#;Z/#$+")("\'#&\'#." &"/b$%28""6879/,#;Z/#$+")("\'#&\'#." &"/;$2\x9e""6\x9e7\x9f/,$;[/#$+\')(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0211 &%;Z/\xfe#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xd7$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xb0$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x89$%28""6879/,#;Z/#$+")("\'#&\'#." &"/b$%28""6879/,#;Z/#$+")("\'#&\'#." &"/;$2\x9e""6\x9e7\x9f/,$;Z/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#.\u0126 &%;Z/\u011c#%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xf5$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xce$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\xa7$%28""6879/,#;Z/#$+")("\'#&\'#." &"/\x80$%28""6879/,#;Z/#$+")("\'#&\'#." &"/Y$%28""6879/,#;Z/#$+")("\'#&\'#." &"/2$2\x9e""6\x9e7\x9f/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#/& 8!:\xa0! )'),E('%;#/M#;#." &"/?$;#." &"/1$;#." &"/#$+$)($\'#(#\'#("\'#&\'#'),E("%;Z/;#28\"\"6879/,$;Z/#$+#)(#'#(\"'#&'#.# &;\\"),E("%;]/o#2J\"\"6J7K/`$;]/W$2J\"\"6J7K/H$;]/?$2J\"\"6J7K/0$;]/'$8':\xa1' )(''#(&'#(%'#($'#(#'#(\"'#&'#"),E('%2\xa2""6\xa27\xa3/2#4\xa4""5!7\xa5/#$+")("\'#&\'#.\x98 &%2\xa6""6\xa67\xa7/;#4\xa8""5!7\xa9/,$;!/#$+#)(#\'#("\'#&\'#.j &%2\xaa""6\xaa7\xab/5#;!/,$;!/#$+#)(#\'#("\'#&\'#.B &%4\xac""5!7\xad/,#;!/#$+")("\'#&\'#.# &;!'),E('%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%\'#($\'#(#\'#("\'#&\'#/\' 8!:\xae!! )'),E('$%22""6273/,#;`/#$+")("\'#&\'#0<*%22""6273/,#;`/#$+")("\'#&\'#&'),E(";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g"),E('%3\xaf""5*7\xb0/a#3\xb1""5#7\xb2.G &3\xb3""5#7\xb4.; &3\xb5""5$7\xb6./ &3\xb7""5#7\xb8.# &;6/($8":\xb9"! )("\'#&\'#'),E('%3\xba""5%7\xbb/I#3\xbc""5%7\xbd./ &3\xbe""5"7\xbf.# &;6/($8":\xc0"! )("\'#&\'#'),E('%3\xc1""5\'7\xc2/1#;\x90/($8":\xc3"! )("\'#&\'#'),E('%3\xc4""5$7\xc5/1#;\xf0/($8":\xc6"! )("\'#&\'#'),E('%3\xc7""5&7\xc8/1#;T/($8":\xc9"! )("\'#&\'#'),E('%3\xca""5"7\xcb/N#%2>""6>7?/,#;6/#$+")("\'#&\'#." &"/\'$8":\xcc" )("\'#&\'#'),E('%;h/P#%2>""6>7?/,#;i/#$+")("\'#&\'#." &"/)$8":\xcd""! )("\'#&\'#'),E('%$;j/&#0#*;j&&&#/"!&,)'),E('%$;j/&#0#*;j&&&#/"!&,)'),E(";k.) &;+.# &;-"),E('2l""6l7m.e &2n""6n7o.Y &24""6475.M &28""6879.A &2<""6<7=.5 &2@""6@7A.) &2B""6B7C'),E('%26""6677/n#;m/e$$%2<""6<7=/,#;m/#$+")("\'#&\'#0<*%2<""6<7=/,#;m/#$+")("\'#&\'#&/#$+#)(#\'#("\'#&\'#'),E('%;n/A#2>""6>7?/2$;o/)$8#:\xce#"" )(#\'#("\'#&\'#'),E("$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#"),E("$;p.) &;+.# &;-0/*;p.) &;+.# &;-&"),E('2l""6l7m.e &2n""6n7o.Y &24""6475.M &26""6677.A &28""6879.5 &2@""6@7A.) &2B""6B7C'),E(";\x91.# &;r"),E("%;\x90/G#;'/>$;s/5$;'/,$;\x84/#$+%)(%'#($'#(#'#(\"'#&'#"),E(";M.# &;t"),E("%;\x7f/E#28\"\"6879/6$;u.# &;x/'$8#:\xcf# )(#'#(\"'#&'#"),E('%;v.# &;w/J#%26""6677/,#;\x83/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),E('%2\xd0""6\xd07\xd1/:#;\x80/1$;w." &"/#$+#)(#\'#("\'#&\'#'),E('%24""6475/,#;{/#$+")("\'#&\'#'),E("%;z/3#$;y0#*;y&/#$+\")(\"'#&'#"),E(";*.) &;+.# &;-"),E(';+.\x8f &;-.\x89 &22""6273.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),E('%;|/e#$%24""6475/,#;|/#$+")("\'#&\'#0<*%24""6475/,#;|/#$+")("\'#&\'#&/#$+")("\'#&\'#'),E('%$;~0#*;~&/e#$%22""6273/,#;}/#$+")("\'#&\'#0<*%22""6273/,#;}/#$+")("\'#&\'#&/#$+")("\'#&\'#'),E("$;~0#*;~&"),E(';+.w &;-.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),E('%%;"/\x87#$;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K0M*;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K&/#$+")("\'#&\'#/& 8!:\xd2! )'),E(";\x81.# &;\x82"),E('%%;O/2#2:""6:7;/#$+")("\'#&\'#." &"/,#;S/#$+")("\'#&\'#." &"'),E('$;+.\x83 &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A/\x8c#0\x89*;+.\x83 &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A&&&#'),E("$;y0#*;y&"),E('%3\x92""5#7\xd3/q#24""6475/b$$;!/&#0#*;!&&&#/L$2J""6J7K/=$$;!/&#0#*;!&&&#/\'$8%:\xd4% )(%\'#($\'#(#\'#("\'#&\'#'),E('2\xd5""6\xd57\xd6'),E('2\xd7""6\xd77\xd8'),E('2\xd9""6\xd97\xda'),E('2\xdb""6\xdb7\xdc'),E('2\xdd""6\xdd7\xde'),E('2\xdf""6\xdf7\xe0'),E('2\xe1""6\xe17\xe2'),E('2\xe3""6\xe37\xe4'),E('2\xe5""6\xe57\xe6'),E('2\xe7""6\xe77\xe8'),E('2\xe9""6\xe97\xea'),E("%;\x85.Y &;\x86.S &;\x88.M &;\x89.G &;\x8a.A &;\x8b.; &;\x8c.5 &;\x8f./ &;\x8d.) &;\x8e.# &;6/& 8!:\xeb! )"),E("%;\x84/G#;'/>$;\x92/5$;'/,$;\x94/#$+%)(%'#($'#(#'#(\"'#&'#"),E("%;\x93/' 8!:\xec!! )"),E("%;!/5#;!/,$;!/#$+#)(#'#(\"'#&'#"),E("%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:\xed! )"),E("%;\xb6/Y#$%;A/,#;\xb6/#$+\")(\"'#&'#06*%;A/,#;\xb6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),E('%;9/N#%2:""6:7;/,#;9/#$+")("\'#&\'#." &"/\'$8":\xee" )("\'#&\'#'),E("%;:.c &%;\x98/Y#$%;A/,#;\x98/#$+\")(\"'#&'#06*%;A/,#;\x98/#$+\")(\"'#&'#&/#$+\")(\"'#&'#/& 8!:\xef! )"),E("%;L.# &;\x99/]#$%;B/,#;\x9b/#$+\")(\"'#&'#06*%;B/,#;\x9b/#$+\")(\"'#&'#&/'$8\":\xf0\" )(\"'#&'#"),E("%;\x9a.\" &\"/>#;@/5$;M/,$;?/#$+$)($'#(#'#(\"'#&'#"),E("%%;6/Y#$%;./,#;6/#$+\")(\"'#&'#06*%;./,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#.# &;H/' 8!:\xf1!! )"),E(";\x9c.) &;\x9d.# &;\xa0"),E("%3\xf2\"\"5!7\xf3/:#;</1$;\x9f/($8#:\xf4#! )(#'#(\"'#&'#"),E("%3\xf5\"\"5'7\xf6/:#;</1$;\x9e/($8#:\xf7#! )(#'#(\"'#&'#"),E("%$;!/&#0#*;!&&&#/' 8!:\xf8!! )"),E('%2\xf9""6\xf97\xfa/o#%2J""6J7K/M#;!." &"/?$;!." &"/1$;!." &"/#$+$)($\'#(#\'#("\'#&\'#." &"/\'$8":\xfb" )("\'#&\'#'),E('%;6/J#%;</,#;\xa1/#$+")("\'#&\'#." &"/)$8":\xfc""! )("\'#&\'#'),E(";6.) &;T.# &;H"),E("%;\xa3/Y#$%;B/,#;\xa4/#$+\")(\"'#&'#06*%;B/,#;\xa4/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),E('%3\xfd""5&7\xfe.G &3\xff""5\'7\u0100.; &3\u0101""5$7\u0102./ &3\u0103""5%7\u0104.# &;6/& 8!:\u0105! )'),E(";\xa5.# &;\xa0"),E('%3\u0106""5(7\u0107/M#;</D$3\u0108""5(7\u0109./ &3\u010a""5(7\u010b.# &;6/#$+#)(#\'#("\'#&\'#'),E("%;6/Y#$%;A/,#;6/#$+\")(\"'#&'#06*%;A/,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),E("%$;!/&#0#*;!&&&#/' 8!:\u010c!! )"),E("%;\xa9/& 8!:\u010d! )"),E("%;\xaa/k#;;/b$;\xaf/Y$$%;B/,#;\xb0/#$+\")(\"'#&'#06*%;B/,#;\xb0/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),E(";\xab.# &;\xac"),E('3\u010e""5$7\u010f.S &3\u0110""5%7\u0111.G &3\u0112""5%7\u0113.; &3\u0114""5%7\u0115./ &3\u0116""5+7\u0117.# &;\xad'),E('3\u0118""5\'7\u0119./ &3\u011a""5)7\u011b.# &;\xad'),E(";6.# &;\xae"),E('%3\u011c""5"7\u011d/,#;6/#$+")("\'#&\'#'),E(";\xad.# &;6"),E("%;6/5#;</,$;\xb1/#$+#)(#'#(\"'#&'#"),E(";6.# &;H"),E("%;\xb3/5#;./,$;\x90/#$+#)(#'#(\"'#&'#"),E("%$;!/&#0#*;!&&&#/' 8!:\u011e!! )"),E("%;\x9e/' 8!:\u011f!! )"),E('%;\xb6/^#$%;B/,#;\xa0/#$+")("\'#&\'#06*%;B/,#;\xa0/#$+")("\'#&\'#&/($8":\u0120"!!)("\'#&\'#'),E('%%;7/e#$%2J""6J7K/,#;7/#$+")("\'#&\'#0<*%2J""6J7K/,#;7/#$+")("\'#&\'#&/#$+")("\'#&\'#/"!&,)'),E("%;L.# &;\x99/]#$%;B/,#;\xb8/#$+\")(\"'#&'#06*%;B/,#;\xb8/#$+\")(\"'#&'#&/'$8\":\u0121\" )(\"'#&'#"),E(";\xb9.# &;\xa0"),E("%3\u0122\"\"5#7\u0123/:#;</1$;6/($8#:\u0124#! )(#'#(\"'#&'#"),E("%$;!/&#0#*;!&&&#/' 8!:\u0125!! )"),E("%;\x9e/' 8!:\u0126!! )"),E("%$;\x9a0#*;\x9a&/x#;@/o$;M/f$;?/]$$%;B/,#;\xa0/#$+\")(\"'#&'#06*%;B/,#;\xa0/#$+\")(\"'#&'#&/'$8%:\u0127% )(%'#($'#(#'#(\"'#&'#"),E(";\xbe"),E("%3\u0128\"\"5&7\u0129/k#;./b$;\xc1/Y$$%;A/,#;\xc1/#$+\")(\"'#&'#06*%;A/,#;\xc1/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#.# &;\xbf"),E("%;6/k#;./b$;\xc0/Y$$%;A/,#;\xc0/#$+\")(\"'#&'#06*%;A/,#;\xc0/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),E("%;6/;#;</2$;6.# &;H/#$+#)(#'#(\"'#&'#"),E(";\xc2.G &;\xc4.A &;\xc6.; &;\xc8.5 &;\xc9./ &;\xca.) &;\xcb.# &;\xc0"),E("%3\u012a\"\"5%7\u012b/5#;</,$;\xc3/#$+#)(#'#(\"'#&'#"),E("%;I/' 8!:\u012c!! )"),E("%3\u012d\"\"5&7\u012e/\x97#;</\x8e$;D/\x85$;\xc5/|$$%$;'/&#0#*;'&&&#/,#;\xc5/#$+\")(\"'#&'#0C*%$;'/&#0#*;'&&&#/,#;\xc5/#$+\")(\"'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#(\"'#&'#"),E(";t.# &;w"),E("%3\u012f\"\"5%7\u0130/5#;</,$;\xc7/#$+#)(#'#(\"'#&'#"),E("%;I/' 8!:\u0131!! )"),E("%3\u0132\"\"5&7\u0133/:#;</1$;I/($8#:\u0134#! )(#'#(\"'#&'#"),E('%3\u0135""5%7\u0136/]#;</T$%3\u0137""5$7\u0138/& 8!:\u0139! ).4 &%3\u013a""5%7\u013b/& 8!:\u013c! )/#$+#)(#\'#("\'#&\'#'),E('%3\u013d""5)7\u013e/R#;</I$3\u013f""5#7\u0140./ &3\u0141""5(7\u0142.# &;6/($8#:\u0143#! )(#\'#("\'#&\'#'),E('%3\u0144""5#7\u0145/\x93#;</\x8a$;D/\x81$%;\xcc/e#$%2D""6D7E/,#;\xcc/#$+")("\'#&\'#0<*%2D""6D7E/,#;\xcc/#$+")("\'#&\'#&/#$+")("\'#&\'#/,$;E/#$+%)(%\'#($\'#(#\'#("\'#&\'#'),E('%3\u0146""5(7\u0147./ &3\u0148""5$7\u0149.# &;6/\' 8!:\u014a!! )'),E("%;6/Y#$%;A/,#;6/#$+\")(\"'#&'#06*%;A/,#;6/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),E("%;\xcf/G#;./>$;\xcf/5$;./,$;\x90/#$+%)(%'#($'#(#'#(\"'#&'#"),E("%$;!/&#0#*;!&&&#/' 8!:\u014b!! )"),E("%;\xd1/]#$%;A/,#;\xd1/#$+\")(\"'#&'#06*%;A/,#;\xd1/#$+\")(\"'#&'#&/'$8\":\u014c\" )(\"'#&'#"),E("%;\x99/]#$%;B/,#;\xa0/#$+\")(\"'#&'#06*%;B/,#;\xa0/#$+\")(\"'#&'#&/'$8\":\u014d\" )(\"'#&'#"),E('%;L.O &;\x99.I &%;@." &"/:#;t/1$;?." &"/#$+#)(#\'#("\'#&\'#/]#$%;B/,#;\xa0/#$+")("\'#&\'#06*%;B/,#;\xa0/#$+")("\'#&\'#&/\'$8":\u014e" )("\'#&\'#'),E("%;\xd4/]#$%;B/,#;\xd5/#$+\")(\"'#&'#06*%;B/,#;\xd5/#$+\")(\"'#&'#&/'$8\":\u014f\" )(\"'#&'#"),E("%;\x96/& 8!:\u0150! )"),E('%3\u0151""5(7\u0152/:#;</1$;6/($8#:\u0153#! )(#\'#("\'#&\'#.g &%3\u0154""5&7\u0155/:#;</1$;6/($8#:\u0156#! )(#\'#("\'#&\'#.: &%3\u0157""5*7\u0158/& 8!:\u0159! ).# &;\xa0'),E('%%;6/k#$%;A/2#;6/)$8":\u015a""$ )("\'#&\'#0<*%;A/2#;6/)$8":\u015a""$ )("\'#&\'#&/)$8":\u015b""! )("\'#&\'#." &"/\' 8!:\u015c!! )'),E("%;\xd8/Y#$%;A/,#;\xd8/#$+\")(\"'#&'#06*%;A/,#;\xd8/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),E("%;\x99/Y#$%;B/,#;\xa0/#$+\")(\"'#&'#06*%;B/,#;\xa0/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),E("%$;!/&#0#*;!&&&#/' 8!:\u015d!! )"),E("%;\xdb/Y#$%;B/,#;\xdc/#$+\")(\"'#&'#06*%;B/,#;\xdc/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),E('%3\u015e""5&7\u015f.; &3\u0160""5\'7\u0161./ &3\u0162""5*7\u0163.# &;6/& 8!:\u0164! )'),E("%3\u0165\"\"5&7\u0166/:#;</1$;\xdd/($8#:\u0167#! )(#'#(\"'#&'#.} &%3\xf5\"\"5'7\xf6/:#;</1$;\x9e/($8#:\u0168#! )(#'#(\"'#&'#.P &%3\u0169\"\"5+7\u016a/:#;</1$;\x9e/($8#:\u016b#! )(#'#(\"'#&'#.# &;\xa0"),E('3\u016c""5+7\u016d.k &3\u016e""5)7\u016f._ &3\u0170""5(7\u0171.S &3\u0172""5\'7\u0173.G &3\u0174""5&7\u0175.; &3\u0176""5*7\u0177./ &3\u0178""5)7\u0179.# &;6'),E(';1." &"'),E('%%;6/k#$%;A/2#;6/)$8":\u015a""$ )("\'#&\'#0<*%;A/2#;6/)$8":\u015a""$ )("\'#&\'#&/)$8":\u015b""! )("\'#&\'#." &"/\' 8!:\u017a!! )'),E("%;L.# &;\x99/]#$%;B/,#;\xe1/#$+\")(\"'#&'#06*%;B/,#;\xe1/#$+\")(\"'#&'#&/'$8\":\u017b\" )(\"'#&'#"),E(";\xb9.# &;\xa0"),E("%;\xe3/Y#$%;A/,#;\xe3/#$+\")(\"'#&'#06*%;A/,#;\xe3/#$+\")(\"'#&'#&/#$+\")(\"'#&'#"),E("%;\xea/k#;./b$;\xed/Y$$%;B/,#;\xe4/#$+\")(\"'#&'#06*%;B/,#;\xe4/#$+\")(\"'#&'#&/#$+$)($'#(#'#(\"'#&'#"),E(";\xe5.; &;\xe6.5 &;\xe7./ &;\xe8.) &;\xe9.# &;\xa0"),E("%3\u017c\"\"5#7\u017d/:#;</1$;\xf0/($8#:\u017e#! )(#'#(\"'#&'#"),E("%3\u017f\"\"5%7\u0180/:#;</1$;T/($8#:\u0181#! )(#'#(\"'#&'#"),E("%3\u0182\"\"5(7\u0183/F#;</=$;\\.) &;Y.# &;X/($8#:\u0184#! )(#'#(\"'#&'#"),E("%3\u0185\"\"5&7\u0186/:#;</1$;6/($8#:\u0187#! )(#'#(\"'#&'#"),E('%3\u0188""5%7\u0189/O#%;</3#$;!0#*;!&/#$+")("\'#&\'#." &"/\'$8":\u018a" )("\'#&\'#'),E("%;\xeb/G#;;/>$;6/5$;;/,$;\xec/#$+%)(%'#($'#(#'#(\"'#&'#"),E('%3\x92""5#7\xd3.# &;6/\' 8!:\u018b!! )'),E('%3\xb1""5#7\u018c.G &3\xb3""5#7\u018d.; &3\xb7""5#7\u018e./ &3\xb5""5$7\u018f.# &;6/\' 8!:\u0190!! )'),E('%;\xee/D#%;C/,#;\xef/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),E("%;U.) &;\\.# &;X/& 8!:\u0191! )"),E('%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%\'#($\'#(#\'#("\'#&\'#/\' 8!:\u0192!! )'),E('%%;!/?#;!." &"/1$;!." &"/#$+#)(#\'#("\'#&\'#/\' 8!:\u0193!! )'),E(";\xbe"),E('%;\x9e/^#$%;B/,#;\xf3/#$+")("\'#&\'#06*%;B/,#;\xf3/#$+")("\'#&\'#&/($8":\u0194"!!)("\'#&\'#'),E(";\xf4.# &;\xa0"),E('%2\u0195""6\u01957\u0196/L#;</C$2\u0197""6\u01977\u0198.) &2\u0199""6\u01997\u019a/($8#:\u019b#! )(#\'#("\'#&\'#'),E('%;\x9e/^#$%;B/,#;\xa0/#$+")("\'#&\'#06*%;B/,#;\xa0/#$+")("\'#&\'#&/($8":\u019c"!!)("\'#&\'#'),E("%;6/5#;0/,$;\xf7/#$+#)(#'#(\"'#&'#"),E("$;2.) &;4.# &;.0/*;2.) &;4.# &;.&"),E("$;%0#*;%&"),E("%;\xfa/;#28\"\"6879/,$;\xfb/#$+#)(#'#(\"'#&'#"),E('%3\u019d""5%7\u019e.) &3\u019f""5$7\u01a0/\' 8!:\u01a1!! )'),E('%;\xfc/J#%28""6879/,#;^/#$+")("\'#&\'#." &"/#$+")("\'#&\'#'),E("%;\\.) &;X.# &;\x82/' 8!:\u01a2!! )"),E(';".S &;!.M &2F""6F7G.A &2J""6J7K.5 &2H""6H7I.) &2N""6N7O'),E('2L""6L7M.\x95 &2B""6B7C.\x89 &2<""6<7=.} &2R""6R7S.q &2T""6T7U.e &2V""6V7W.Y &2P""6P7Q.M &2@""6@7A.A &2D""6D7E.5 &22""6273.) &2>""6>7?'),E('%;\u0100/b#28""6879/S$;\xfb/J$%2\u01a3""6\u01a37\u01a4/,#;\xec/#$+")("\'#&\'#." &"/#$+$)($\'#(#\'#("\'#&\'#'),E('%3\u01a5""5%7\u01a6.) &3\u01a7""5$7\u01a8/\' 8!:\u01a1!! )'),E('%;\xec/O#3\xb1""5#7\xb2.6 &3\xb3""5#7\xb4.* &$;+0#*;+&/\'$8":\u01a9" )("\'#&\'#'),E("%;\u0104/\x87#2F\"\"6F7G/x$;\u0103/o$2F\"\"6F7G/`$;\u0103/W$2F\"\"6F7G/H$;\u0103/?$2F\"\"6F7G/0$;\u0105/'$8):\u01aa) )()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#"),E("%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#(\"'#&'#"),E("%;\u0103/,#;\u0103/#$+\")(\"'#&'#"),E("%;\u0103/5#;\u0103/,$;\u0103/#$+#)(#'#(\"'#&'#"),E("%;\x84/U#;'/L$;\x92/C$;'/:$;\x90/1$; .\" &\"/#$+&)(&'#(%'#($'#(#'#(\"'#&'#"),E('%2\u01ab""6\u01ab7\u01ac.) &2\u01ad""6\u01ad7\u01ae/w#;0/n$;\u0108/e$$%;B/2#;\u0109.# &;\xa0/#$+")("\'#&\'#0<*%;B/2#;\u0109.# &;\xa0/#$+")("\'#&\'#&/#$+$)($\'#(#\'#("\'#&\'#'),E(";\x99.# &;L"),E("%2\u01af\"\"6\u01af7\u01b0/5#;</,$;\u010a/#$+#)(#'#(\"'#&'#"),E("%;D/S#;,/J$2:\"\"6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#(\"'#&'#")],u=0,l=0,d=[{line:1,column:1}],h=0,f=[],p=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=o[t.startRule]}function m(){return e.substring(l,u)}function g(){return S(l,u)}function v(e,t){return{type:"literal",text:e,ignoreCase:t}}function y(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function b(t){var n,r=d[t];if(r)return r;for(n=t-1;!d[n];)n--;for(r={line:(r=d[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return d[t]=r,r}function S(e,t){var n=b(e),r=b(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function T(e){u<h||(u>h&&(h=u,f=[]),f.push(e))}function _(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function E(e){var t,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=e.charCodeAt(t)-32;return n}if(t.data={},(n=function t(n){for(var r,o,s=c[n],d=0,h=[],f=s.length,m=[],g=[];;){for(;d<f;)switch(s[d]){case 0:g.push(a[s[d+1]]),d+=2;break;case 1:g.push(void 0),d++;break;case 2:g.push(null),d++;break;case 3:g.push(i),d++;break;case 4:g.push([]),d++;break;case 5:g.push(u),d++;break;case 6:g.pop(),d++;break;case 7:u=g.pop(),d++;break;case 8:g.length-=s[d+1],d+=2;break;case 9:g.splice(-2,1),d++;break;case 10:g[g.length-2].push(g.pop()),d++;break;case 11:g.push(g.splice(g.length-s[d+1],s[d+1])),d+=2;break;case 12:g.push(e.substring(g.pop(),u)),d++;break;case 13:m.push(f),h.push(d+3+s[d+1]+s[d+2]),g[g.length-1]?(f=d+3+s[d+1],d+=3):(f=d+3+s[d+1]+s[d+2],d+=3+s[d+1]);break;case 14:m.push(f),h.push(d+3+s[d+1]+s[d+2]),g[g.length-1]===i?(f=d+3+s[d+1],d+=3):(f=d+3+s[d+1]+s[d+2],d+=3+s[d+1]);break;case 15:m.push(f),h.push(d+3+s[d+1]+s[d+2]),g[g.length-1]!==i?(f=d+3+s[d+1],d+=3):(f=d+3+s[d+1]+s[d+2],d+=3+s[d+1]);break;case 16:g[g.length-1]!==i?(m.push(f),h.push(d),f=d+2+s[d+1],d+=2):d+=2+s[d+1];break;case 17:m.push(f),h.push(d+3+s[d+1]+s[d+2]),e.length>u?(f=d+3+s[d+1],d+=3):(f=d+3+s[d+1]+s[d+2],d+=3+s[d+1]);break;case 18:m.push(f),h.push(d+4+s[d+2]+s[d+3]),e.substr(u,a[s[d+1]].length)===a[s[d+1]]?(f=d+4+s[d+2],d+=4):(f=d+4+s[d+2]+s[d+3],d+=4+s[d+2]);break;case 19:m.push(f),h.push(d+4+s[d+2]+s[d+3]),e.substr(u,a[s[d+1]].length).toLowerCase()===a[s[d+1]]?(f=d+4+s[d+2],d+=4):(f=d+4+s[d+2]+s[d+3],d+=4+s[d+2]);break;case 20:m.push(f),h.push(d+4+s[d+2]+s[d+3]),a[s[d+1]].test(e.charAt(u))?(f=d+4+s[d+2],d+=4):(f=d+4+s[d+2]+s[d+3],d+=4+s[d+2]);break;case 21:g.push(e.substr(u,s[d+1])),u+=s[d+1],d+=2;break;case 22:g.push(a[s[d+1]]),u+=a[s[d+1]].length,d+=2;break;case 23:g.push(i),0===p&&T(a[s[d+1]]),d+=2;break;case 24:l=g[g.length-1-s[d+1]],d+=2;break;case 25:l=u,d++;break;case 26:for(r=s.slice(d+4,d+4+s[d+3]),o=0;o<s[d+3];o++)r[o]=g[g.length-1-r[o]];g.splice(g.length-s[d+2],s[d+2],a[s[d+1]].apply(null,r)),d+=4+s[d+3];break;case 27:g.push(t(s[d+1])),d+=2;break;case 28:p++,d++;break;case 29:p--,d++;break;default:throw new Error("Invalid opcode: "+s[d]+".")}if(!(m.length>0))break;f=m.pop(),d=h.pop()}return g[0]}(s))!==i&&u===e.length)return n;throw n!==i&&u<e.length&&T({type:"end"}),_(f,h<e.length?e.charAt(h):null,h<e.length?S(h,h+1):S(h,h))}}},function(e,t,n){"use strict";e.exports=function(e){function t(e,t){var n,r,i=[],o=e.split(/\r\n/);for(n=0;n<o.length;){var s=o[n];if(/^m=(?:audio|video)/.test(s))r={index:n,stripped:[]},i.push(r);else if(r){var a=/^a=rtpmap:(\d+) ([^/]+)\//.exec(s);if(a&&t===a[2]){o.splice(n,1),r.stripped.push(a[1]);continue}}n++}for(n=0;n<i.length;n++){for(var c=o[i[n].index].split(" "),u=3;u<c.length;)-1===i[n].stripped.indexOf(c[u])?u++:c.splice(u,1);o[i[n].index]=c.join(" ")}return o.join("\r\n")}return{stripTcpCandidates:function(t){return t.sdp=t.sdp.replace(/^a=candidate:\d+ \d+ tcp .*?\r\n/gim,""),e.Utils.Promise.resolve(t)},stripTelephoneEvent:function(n){return n.sdp=t(n.sdp,"telephone-event"),e.Utils.Promise.resolve(n)},cleanJitsiSdpImageattr:function(t){return t.sdp=t.sdp.replace(/^(a=imageattr:.*?)(x|y)=\[0-/gm,"$1$2=[1:"),e.Utils.Promise.resolve(t)},stripG722:function(n){return n.sdp=t(n.sdp,"G722"),e.Utils.Promise.resolve(n)},stripRtpPayload:function(n){return function(r){return r.sdp=t(r.sdp,n),e.Utils.Promise.resolve(r)}},stripVideo:function(t){return t.sdp=function(e,t){var n=new RegExp("m="+t+".*$","gm"),r=new RegExp("^a=group:.*$","gm");if(n.test(e)){var i,o=(e=e.split(/^m=/gm).filter((function(e){return e.substr(0,t.length)!==t||((i=e.match(/^a=mid:.*$/gm))&&(i=i[0].match(/:.+$/g)[0].substr(1)),!1)})).join("m=")).match(r);if(o&&1===o.length){o=o[0];var s=new RegExp(" *"+i+"[^ ]*","g");o=o.replace(s,""),e=e.split(r).join(o)}}return e}(t.sdp,"video"),e.Utils.Promise.resolve(t)},addMidLines:function(t){var n=t.sdp;if(-1===n.search(/^a=mid.*$/gm)){var r=n.match(/^m=.*$/gm);n=n.split(/^m=.*$/gm),r.forEach((function(e,t){r[t]=e+"\na=mid:"+t})),n.forEach((function(e,t){r[t]&&(n[t]=e+r[t])})),n=n.join(""),t.sdp=n}return e.Utils.Promise.resolve(t)}}}},function(e,t,n){"use strict";(function(t){e.exports=function(e){var n={STATUS_NULL:0,STATUS_NEW:1,STATUS_CONNECTING:2,STATUS_CONNECTED:3,STATUS_COMPLETED:4},r=function(r){if(r.media.remote.video?this.video=!0:this.video=!1,r.media.remote.audio?this.audio=!0:this.audio=!1,!this.audio&&!this.video)throw new Error("At least one remote audio or video element is required for Simple.");this.options=r;var i=t.navigator.userAgent.toLowerCase(),o=!1,s=!1;i.indexOf("safari")>-1&&i.indexOf("chrome")<0?o=!0:i.indexOf("firefox")>-1&&i.indexOf("chrome")<0&&(s=!0);var a={};return o&&(a.modifiers=[e.Web.Modifiers.stripG722]),s&&(a.alwaysAcquireMediaFirst=!0),this.options.ua.uri||(this.anonymous=!0),this.ua=new e.UA({uri:this.options.ua.uri,authorizationUser:this.options.ua.authorizationUser,password:this.options.ua.password,displayName:this.options.ua.displayName,userAgentString:this.options.ua.userAgentString,register:!0,sessionDescriptionHandlerFactoryOptions:a,transportOptions:{traceSip:this.options.ua.traceSip,wsServers:this.options.ua.wsServers}}),this.state=n.STATUS_NULL,this.logger=this.ua.getLogger("sip.simple"),this.ua.on("registered",function(){this.emit("registered",this.ua)}.bind(this)),this.ua.on("unregistered",function(){this.emit("unregistered",this.ua)}.bind(this)),this.ua.on("failed",function(){this.emit("unregistered",this.ua)}.bind(this)),this.ua.on("invite",function(e){if(this.state!==n.STATUS_NULL&&this.state!==n.STATUS_COMPLETED)return this.logger.warn("Rejecting incoming call. Simple only supports 1 call at a time"),void e.reject();this.session=e,this.setupSession(),this.emit("ringing",this.session)}.bind(this)),this.ua.on("message",function(e){this.emit("message",e)}.bind(this)),this};return r.prototype=Object.create(e.EventEmitter.prototype),r.C=n,r.prototype.call=function(e){if(this.ua&&this.checkRegistration()){if(this.state===n.STATUS_NULL||this.state===n.STATUS_COMPLETED)return this.options.media.remote.audio&&(this.options.media.remote.audio.autoplay=!0),this.options.media.remote.video&&(this.options.media.remote.video.autoplay=!0),this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.autoplay=!0,this.options.media.local.video.volume=0),this.session=this.ua.invite(e,{sessionDescriptionHandlerOptions:{constraints:{audio:this.audio,video:this.video}}}),this.setupSession(),this.session;this.logger.warn("Cannot make more than a single call with Simple")}else this.logger.warn("A registered UA is required for calling")},r.prototype.answer=function(){if(this.state===n.STATUS_NEW||this.state===n.STATUS_CONNECTING)return this.options.media.remote.audio&&(this.options.media.remote.audio.autoplay=!0),this.options.media.remote.video&&(this.options.media.remote.video.autoplay=!0),this.session.accept({sessionDescriptionHandlerOptions:{constraints:{audio:this.audio,video:this.video}}});this.logger.warn("No call to answer")},r.prototype.reject=function(){if(this.state===n.STATUS_NEW||this.state===n.STATUS_CONNECTING)return this.session.reject();this.logger.warn("Call is already answered")},r.prototype.hangup=function(){if(this.state===n.STATUS_CONNECTED||this.state===n.STATUS_CONNECTING||this.state===n.STATUS_NEW)return this.state!==n.STATUS_CONNECTED?this.session.cancel():this.session.bye();this.logger.warn("No active call to hang up on")},r.prototype.hold=function(){if(this.state===n.STATUS_CONNECTED&&!this.session.local_hold)return this.mute(),this.logger.log("Placing session on hold"),this.session.hold();this.logger.warn("Cannot put call on hold")},r.prototype.unhold=function(){if(this.state===n.STATUS_CONNECTED&&this.session.local_hold)return this.unmute(),this.logger.log("Placing call off hold"),this.session.unhold();this.logger.warn("Cannot unhold a call that is not on hold")},r.prototype.mute=function(){this.state===n.STATUS_CONNECTED?(this.logger.log("Muting Audio"),this.toggleMute(!0),this.emit("mute",this)):this.logger.warn("An acitve call is required to mute audio")},r.prototype.unmute=function(){this.state===n.STATUS_CONNECTED?(this.logger.log("Unmuting Audio"),this.toggleMute(!1),this.emit("unmute",this)):this.logger.warn("An active call is required to unmute audio")},r.prototype.sendDTMF=function(e){this.state===n.STATUS_CONNECTED?(this.logger.log("Sending DTMF tone: "+e),this.session.dtmf(e)):this.logger.warn("An active call is required to send a DTMF tone")},r.prototype.message=function(e,t){this.ua&&this.checkRegistration()?e&&t?this.ua.message(e,t):this.logger.warn("A destination and message are required to send a message"):this.logger.warn("A registered UA is required to send a message")},r.prototype.checkRegistration=function(){return this.anonymous||this.ua&&this.ua.isRegistered()},r.prototype.setupRemoteMedia=function(){var e,n=this.session.sessionDescriptionHandler.peerConnection;n.getReceivers?(e=new t.window.MediaStream,n.getReceivers().forEach((function(t){var n=t.track;n&&e.addTrack(n)}))):e=n.getRemoteStreams()[0],this.video?(this.options.media.remote.video.srcObject=e,this.options.media.remote.video.play().catch(function(){this.logger.log("play was rejected")}.bind(this))):this.audio&&(this.options.media.remote.audio.srcObject=e,this.options.media.remote.audio.play().catch(function(){this.logger.log("play was rejected")}.bind(this)))},r.prototype.setupLocalMedia=function(){if(this.video&&this.options.media.local&&this.options.media.local.video){var e,n=this.session.sessionDescriptionHandler.peerConnection;n.getSenders?(e=new t.window.MediaStream,n.getSenders().forEach((function(t){var n=t.track;n&&"video"===n.kind&&e.addTrack(n)}))):e=n.getLocalStreams()[0],this.options.media.local.video.srcObject=e,this.options.media.local.video.volume=0,this.options.media.local.video.play()}},r.prototype.cleanupMedia=function(){this.video&&(this.options.media.remote.video.srcObject=null,this.options.media.remote.video.pause(),this.options.media.local&&this.options.media.local.video&&(this.options.media.local.video.srcObject=null,this.options.media.local.video.pause())),this.audio&&(this.options.media.remote.audio.srcObject=null,this.options.media.remote.audio.pause())},r.prototype.setupSession=function(){this.state=n.STATUS_NEW,this.emit("new",this.session),this.session.on("progress",this.onProgress.bind(this)),this.session.on("accepted",this.onAccepted.bind(this)),this.session.on("rejected",this.onEnded.bind(this)),this.session.on("failed",this.onFailed.bind(this)),this.session.on("terminated",this.onEnded.bind(this))},r.prototype.destroyMedia=function(){this.session.sessionDescriptionHandler.close()},r.prototype.toggleMute=function(e){var t=this.session.sessionDescriptionHandler.peerConnection;t.getSenders?t.getSenders().forEach((function(t){t.track&&(t.track.enabled=!e)})):t.getLocalStreams().forEach((function(t){t.getAudioTracks().forEach((function(t){t.enabled=!e})),t.getVideoTracks().forEach((function(t){t.enabled=!e}))}))},r.prototype.onAccepted=function(){this.state=n.STATUS_CONNECTED,this.emit("connected",this.session),this.setupLocalMedia(),this.setupRemoteMedia(),this.session.sessionDescriptionHandler.on("addTrack",function(){this.logger.log("A track has been added, triggering new remoteMedia setup"),this.setupRemoteMedia()}.bind(this)),this.session.sessionDescriptionHandler.on("addStream",function(){this.logger.log("A stream has been added, trigger new remoteMedia setup"),this.setupRemoteMedia()}.bind(this)),this.session.on("hold",function(){this.emit("hold",this.session)}.bind(this)),this.session.on("unhold",function(){this.emit("unhold",this.session)}.bind(this)),this.session.on("dtmf",function(e){this.emit("dtmf",e)}.bind(this)),this.session.on("bye",this.onEnded.bind(this))},r.prototype.onProgress=function(){this.state=n.STATUS_CONNECTING,this.emit("connecting",this.session)},r.prototype.onFailed=function(){this.onEnded()},r.prototype.onEnded=function(){this.state=n.STATUS_COMPLETED,this.emit("ended",this.session),this.cleanupMedia()},r}}).call(this,n(28))},function(e,t,n){"use strict";(function(t){var r=t.window||t;function i(e,t){if(null!=e){var n=t.charAt(0).toUpperCase()+t.slice(1),r=[t,"webkit"+n,"moz"+n];for(var i in r){var o=e[r[i]];if(o)return o.bind(e)}}}e.exports={WebSocket:r.WebSocket,Transport:n(10),open:r.open,Promise:r.Promise,timers:r,console:r.console||{debug:function(){},log:function(){},warn:function(){},error:function(){}},addEventListener:i(r,"addEventListener"),removeEventListener:i(r,"removeEventListener")}}).call(this,n(28))}])},e.exports=r()},function(e,t,n){var r,i;(function(){(function(){(function(){var e=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(e){var t;return null==e&&(e=null!=(t=this.getConfig("url"))?t:this.INTERNAL.default_mount_path),new o.Consumer(this.createWebSocketURL(e))},getConfig:function(e){var t;return null!=(t=document.head.querySelector("meta[name='action-cable-"+e+"']"))?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?((t=document.createElement("a")).href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t,n;if(t=1<=arguments.length?e.call(arguments,0):[],this.debugging)return t.push(Date.now()),(n=this.logger).log.apply(n,["[ActionCable]"].concat(e.call(t)))}}}).call(this)}).call(this);var o=this.ActionCable;(function(){(function(){o.ConnectionMonitor=function(){var e,t,n;function r(e){var t,n;this.connection=e,this.visibilityDidChange=(t=this.visibilityDidChange,n=this,function(){return t.apply(n,arguments)}),this.reconnectAttempts=0}return r.pollInterval={min:3,max:30},r.staleThreshold=6,r.prototype.start=function(){if(!this.isRunning())return this.startedAt=t(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),o.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},r.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=t(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),o.log("ConnectionMonitor stopped")},r.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},r.prototype.recordPing=function(){return this.pingedAt=t()},r.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,o.log("ConnectionMonitor recorded connect")},r.prototype.recordDisconnect=function(){return this.disconnectedAt=t(),o.log("ConnectionMonitor recorded disconnect")},r.prototype.startPolling=function(){return this.stopPolling(),this.poll()},r.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},r.prototype.poll=function(){return this.pollTimeout=setTimeout((e=this,function(){return e.reconnectIfStale(),e.poll()}),this.getPollInterval());var e},r.prototype.getPollInterval=function(){var t,n,r,i;return r=(i=this.constructor.pollInterval).min,n=i.max,t=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*e(t,r,n))},r.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return o.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+n(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?o.log("ConnectionMonitor skipping reopening recent disconnect"):(o.log("ConnectionMonitor reopening"),this.connection.reopen())},r.prototype.connectionIsStale=function(){var e;return n(null!=(e=this.pingedAt)?e:this.startedAt)>this.constructor.staleThreshold},r.prototype.disconnectedRecently=function(){return this.disconnectedAt&&n(this.disconnectedAt)<this.constructor.staleThreshold},r.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((e=this,function(){if(e.connectionIsStale()||!e.connection.isOpen())return o.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}),200);var e},t=function(){return(new Date).getTime()},n=function(e){return(t()-e)/1e3},e=function(e,t,n){return Math.max(t,Math.min(n,e))},r}()}).call(this),function(){var e,t,n,r,i,s=[].slice,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=o.INTERNAL,t=r.message_types,n=r.protocols,i=2<=n.length?s.call(n,0,e=n.length-1):(e=0,[]),n[e++],o.Connection=function(){function e(e){var t,n;this.consumer=e,this.open=(t=this.open,n=this,function(){return t.apply(n,arguments)}),this.subscriptions=this.consumer.subscriptions,this.monitor=new o.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)},e.prototype.open=function(){return this.isActive()?(o.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(o.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+n),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new o.WebSocket(this.consumer.url,n),this.installEventHandlers(),this.monitor.start(),!0)},e.prototype.close=function(e){var t;if((null!=e?e:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(t=this.webSocket)?t.close():void 0},e.prototype.reopen=function(){var e;if(o.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(t){return e=t,o.log("Failed to reopen WebSocket",e)}finally{o.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var e;return null!=(e=this.webSocket)?e.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),a.call(i,e)>=0},e.prototype.isState=function(){var e,t;return t=1<=arguments.length?s.call(arguments,0):[],e=this.getState(),a.call(t,e)>=0},e.prototype.getState=function(){var e,t;for(t in WebSocket)if(WebSocket[t]===(null!=(e=this.webSocket)?e.readyState:void 0))return t.toLowerCase();return null},e.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},e.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},e.prototype.events={message:function(e){var n,r,i;if(this.isProtocolSupported())switch(n=(i=JSON.parse(e.data)).identifier,r=i.message,i.type){case t.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case t.ping:return this.monitor.recordPing();case t.confirmation:return this.subscriptions.notify(n,"connected");case t.rejection:return this.subscriptions.reject(n);default:return this.subscriptions.notify(n,"received",r)}},open:function(){if(o.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return o.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(e){if(o.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return o.log("WebSocket onerror event")}},e}()}.call(this),function(){var e=[].slice;o.Subscriptions=function(){function t(e){this.consumer=e,this.subscriptions=[]}return t.prototype.create=function(e,t){var n,r,i;return r="object"==typeof(n=e)?n:{channel:n},i=new o.Subscription(this.consumer,r,t),this.add(i)},t.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},t.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},t.prototype.reject=function(e){var t,n,r,i,o;for(i=[],t=0,n=(r=this.findAll(e)).length;t<n;t++)o=r[t],this.forget(o),this.notify(o,"rejected"),i.push(o);return i},t.prototype.forget=function(e){var t;return this.subscriptions=function(){var n,r,i,o;for(o=[],n=0,r=(i=this.subscriptions).length;n<r;n++)(t=i[n])!==e&&o.push(t);return o}.call(this),e},t.prototype.findAll=function(e){var t,n,r,i,o;for(i=[],t=0,n=(r=this.subscriptions).length;t<n;t++)(o=r[t]).identifier===e&&i.push(o);return i},t.prototype.reload=function(){var e,t,n,r,i;for(r=[],e=0,t=(n=this.subscriptions).length;e<t;e++)i=n[e],r.push(this.sendCommand(i,"subscribe"));return r},t.prototype.notifyAll=function(){var t,n,r,i,o,s,a;for(n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],s=[],r=0,i=(o=this.subscriptions).length;r<i;r++)a=o[r],s.push(this.notify.apply(this,[a,n].concat(e.call(t))));return s},t.prototype.notify=function(){var t,n,r,i,o,s,a;for(s=arguments[0],n=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],o=[],r=0,i=(a="string"==typeof s?this.findAll(s):[s]).length;r<i;r++)s=a[r],o.push("function"==typeof s[n]?s[n].apply(s,t):void 0);return o},t.prototype.sendCommand=function(e,t){var n;return n=e.identifier,this.consumer.send({command:t,identifier:n})},t}()}.call(this),function(){o.Subscription=function(){var e;function t(t,n,r){this.consumer=t,null==n&&(n={}),this.identifier=JSON.stringify(n),e(this,r)}return t.prototype.perform=function(e,t){return null==t&&(t={}),t.action=e,this.send(t)},t.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},t.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},e=function(e,t){var n,r;if(null!=t)for(n in t)r=t[n],e[n]=r;return e},t}()}.call(this),function(){o.Consumer=function(){function e(e){this.url=e,this.subscriptions=new o.Subscriptions(this),this.connection=new o.Connection(this)}return e.prototype.send=function(e){return this.connection.send(e)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),e.exports?e.exports=o:void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)}).call(this)},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(e){a=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),s=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return w()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=S(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l={};function d(){}function h(){}function f(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==t&&n.call(g,i)&&(p=g);var v=f.prototype=d.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){a(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(i,o){function s(){return new t((function(r,s){!function r(i,o,s,a){var c=u(e[i],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:w}}function w(){return{value:void 0,done:!0}}return h.prototype=v.constructor=f,f.constructor=h,h.displayName=a(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),b.prototype[o]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new b(c(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(v),a(v,s,"Generator"),v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(15);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t),n.d(t,"Logger",(function(){return v})),n.d(t,"GiphyApi",(function(){return qr})),n.d(t,"throttle",(function(){return b})),n.d(t,"debounce",(function(){return ur})),n.d(t,"YouTubeApi",(function(){return Gr})),n.d(t,"SoundMeter",(function(){return Kr})),n.d(t,"FacebookApi",(function(){return zr})),n.d(t,"LocalStorage",(function(){return ut})),n.d(t,"StreamHelpers",(function(){return u})),n.d(t,"DeviceManager",(function(){return jt})),n.d(t,"FeatureDetector",(function(){return tt})),n.d(t,"FullscreenHelper",(function(){return et})),n.d(t,"MediaStreamBuilder",(function(){return Ht}));var i={};n.r(i),n.d(i,"shimGetUserMedia",(function(){return ne})),n.d(i,"shimGetDisplayMedia",(function(){return re})),n.d(i,"shimMediaStream",(function(){return ie})),n.d(i,"shimOnTrack",(function(){return oe})),n.d(i,"shimGetSendersWithDtmf",(function(){return se})),n.d(i,"shimGetStats",(function(){return ae})),n.d(i,"shimSenderReceiverGetStats",(function(){return ce})),n.d(i,"shimAddTrackRemoveTrackWithNative",(function(){return ue})),n.d(i,"shimAddTrackRemoveTrack",(function(){return le})),n.d(i,"shimPeerConnection",(function(){return de})),n.d(i,"fixNegotiationNeeded",(function(){return he}));var o={};n.r(o),n.d(o,"shimGetUserMedia",(function(){return me})),n.d(o,"shimGetDisplayMedia",(function(){return ge})),n.d(o,"shimPeerConnection",(function(){return ve})),n.d(o,"shimReplaceTrack",(function(){return ye}));var s={};n.r(s),n.d(s,"shimGetUserMedia",(function(){return be})),n.d(s,"shimGetDisplayMedia",(function(){return Se})),n.d(s,"shimOnTrack",(function(){return Te})),n.d(s,"shimPeerConnection",(function(){return _e})),n.d(s,"shimSenderGetStats",(function(){return Ee})),n.d(s,"shimReceiverGetStats",(function(){return Ce})),n.d(s,"shimRemoveStream",(function(){return we})),n.d(s,"shimRTCDataChannel",(function(){return Re})),n.d(s,"shimAddTransceiver",(function(){return ke})),n.d(s,"shimGetParameters",(function(){return Ae})),n.d(s,"shimCreateOffer",(function(){return Oe})),n.d(s,"shimCreateAnswer",(function(){return Ie}));var a={};n.r(a),n.d(a,"shimLocalStreamsAPI",(function(){return xe})),n.d(a,"shimRemoteStreamsAPI",(function(){return De})),n.d(a,"shimCallbacksAPI",(function(){return Pe})),n.d(a,"shimGetUserMedia",(function(){return Ne})),n.d(a,"shimConstraints",(function(){return Le})),n.d(a,"shimRTCIceServerUrls",(function(){return Me})),n.d(a,"shimTrackEventTransceiver",(function(){return Ue})),n.d(a,"shimCreateOfferLegacy",(function(){return je})),n.d(a,"shimAudioContext",(function(){return He}));var c={};n.r(c),n.d(c,"shimRTCIceCandidate",(function(){return qe})),n.d(c,"shimMaxMessageSize",(function(){return Be})),n.d(c,"shimSendThrowTypeError",(function(){return Ge})),n.d(c,"shimConnectionState",(function(){return Ve})),n.d(c,"removeAllowExtmapMixed",(function(){return ze}));var u={};n.r(u),n.d(u,"hasAudio",(function(){return dt})),n.d(u,"hasVideo",(function(){return ht})),n.d(u,"disableAudio",(function(){return ft})),n.d(u,"enableAudio",(function(){return pt})),n.d(u,"toggleAudio",(function(){return mt})),n.d(u,"stopTrack",(function(){return gt})),n.d(u,"stopStream",(function(){return vt})),n.d(u,"isNinjaStreamTrack",(function(){return St})),n.d(u,"getScreenTracks",(function(){return _t})),n.d(u,"getCameraTracks",(function(){return Et})),n.d(u,"stopCamera",(function(){return Ct})),n.d(u,"disableCamera",(function(){return wt})),n.d(u,"enableCamera",(function(){return Rt})),n.d(u,"toggleCamera",(function(){return kt})),n.d(u,"getCanvasTracks",(function(){return At})),n.d(u,"isScreenStream",(function(){return Ot})),n.d(u,"isCanvasStream",(function(){return It})),n.d(u,"isCameraStream",(function(){return xt})),n.d(u,"isCanvasPresentationStream",(function(){return Dt})),n.d(u,"isPresentationStream",(function(){return Pt})),n.d(u,"hasCameraVideo",(function(){return Nt})),n.d(u,"getFacingMode",(function(){return Lt})),n.d(u,"captureStream",(function(){return Mt}));var l=n(7),d=n.n(l),h={api:"https://api.eyeson.team",facebook:{key:""},youtube:{key:"",client:""},allowSafariSFU:!0,screencapture:!0},f=n(1),p=n.n(f),m=n(2),g=n.n(m),v={error:function(){var e;return(e=console).error.apply(e,arguments)},warn:function(){var e;return(e=console).warn.apply(e,arguments)},info:function(){var e;return(e=console).log.apply(e,arguments)},debug:function(){var e;return console.debug?(e=console).debug.apply(e,arguments):null}},y=function(){function e(t,n){p()(this,e),this.uri=t,this.token=n.replace(/\W+/g,""),this.cache={users:[]},this.onError=null,this._handleError=this._handleError.bind(this)}return g()(e,[{key:"_request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(new Request(this.uri+e),t).then((function(e){var t=e.headers.get("content-type");if(t&&-1!==t.indexOf("application/json")&&e.ok)return e.json();if(e.ok)return e.text();throw new Error("ComApiError: ".concat(e.status))}))}},{key:"_objectToFormData",value:function(e,t,n){var r=t||new FormData,i=null;for(var o in e){if(!e.hasOwnProperty(o))return;i=n?n+"["+(isNaN(parseInt(o))?o:"")+"]":o,"object"!==d()(e[o])||e[o]instanceof File?r.append(i,e[o]):this._objectToFormData(e[o],r,o)}return r}},{key:"_post",value:function(e,t){return this._request(e,{method:"POST",body:this._objectToFormData(t)})}},{key:"_put",value:function(e,t){var n=new FormData;for(var r in t)n.append(r,t[r]);return this._request(e,{method:"PUT",body:n})}},{key:"_handleError",value:function(e){v.error("ComApi::handleError",e),this.onError&&this.onError(e)}},{key:"onError",value:function(e){this.onError=e}},{key:"getRoom",value:function(e){return this._request("/rooms/".concat(this.token)).then(e).catch((function(t){return e?e({error:t}):{error:t}}))}},{key:"terminateMeeting",value:function(){return this._request("/rooms/".concat(this.token),{method:"DELETE"}).catch(this._handleError)}},{key:"getUser",value:function(e,t){var n=this,r=this.cache.users.find((function(t){return t.id===e}));return r?(t(r),null):this._request("/rooms/".concat(this.token,"/users/").concat(e)).then((function(r){var i=n.cache.users.filter((function(t){return t.id!==e})),o=n.addUserAttributes(r,e);i.push(o),n.cache.users=i,t(o)})).catch(this._handleError)}},{key:"addUserAttributes",value:function(e,t){var n=e.avatar;try{n="".concat(e.avatar,"?size=large")}catch(t){v.warn("ComApi::addUserAttributes missing",e)}return Object.assign(e,{id:t,apiId:e.id,sipId:e.sip&&e.sip.authorizationUser||null,largeAvatar:n})}},{key:"kickUser",value:function(e){var t=this;return this._request("/rooms/".concat(this.token,"/users/").concat(e),{method:"DELETE"}).then((function(){if(t.cache.users.find((function(t){return t.id===e}))){var n=t.cache.users.filter((function(t){return t.id!==e}));t.cache.users=n}})).catch(this._handleError)}},{key:"requestUser",value:function(e,t){return this._post("/guests/".concat(this.token),{name:e.name,email:e.email,custom_fields:{locale:e.locale||"en"}}).then(t).catch((function(e){return t({error:e})}))}},{key:"startBroadcast",value:function(e,t){return this._post("/rooms/".concat(this.token,"/broadcasts"),{platform:t,player_url:e.playerUrl||"",stream_url:e.streamUrl})}},{key:"publishBroadcast",value:function(e,t){return this._put("/rooms/".concat(this.token,"/broadcasts/").concat(t),{player_url:e.playerUrl})}},{key:"stopBroadcast",value:function(e){return this._request("/rooms/".concat(this.token,"/broadcasts/").concat(e),{method:"DELETE"})}},{key:"stopAllBroadcasts",value:function(){return this._request("/rooms/".concat(this.token,"/broadcasts"),{method:"DELETE"})}},{key:"startRecording",value:function(){return this._post("/rooms/".concat(this.token,"/recording"),{})}},{key:"stopRecording",value:function(){return this._request("/rooms/".concat(this.token,"/recording"),{method:"DELETE"}).catch(this._handleError)}},{key:"setLayout",value:function(e){return this._post("/rooms/".concat(this.token,"/layout"),e).catch(this._handleError)}},{key:"setLayer",value:function(e){return this._post("/rooms/".concat(this.token,"/layers"),e).catch(this._handleError)}},{key:"clearFrontLayer",value:function(){return this._request("/rooms/".concat(this.token,"/layers/1"),{method:"DELETE"}).catch(this._handleError)}},{key:"takeSnapshot",value:function(){return this._post("/rooms/".concat(this.token,"/snapshot")).catch(this._handleError)}},{key:"createAnnotation",value:function(e,t){var n=this;return this._post("/rooms/".concat(this.token,"/annotation")).then(e).catch((function(e){t(e),n._handleError(e)}))}},{key:"stopAnnotation",value:function(){return this._request("/rooms/".concat(this.token,"/annotation"),{method:"DELETE"}).catch(this._handleError)}},{key:"startPlayback",value:function(e){return this._post("/rooms/".concat(this.token,"/playbacks"),{playback:e}).catch(this._handleError)}},{key:"stopPlayback",value:function(e){return this._request("/rooms/".concat(this.token,"/playbacks/").concat(e.play_id),{method:"DELETE"}).catch(this._handleError)}},{key:"lockMeeting",value:function(){return this._post("/rooms/".concat(this.token,"/lock")).catch(this._handleError)}}]),e}(),b=function(e,t,n){var r,i,o,s=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:Date.now(),s=null,o=e.apply(r,i),s||(r=i=null)};return function(){var u=Date.now();a||!1!==n.leading||(a=u);var l=t-(u-a);return r=this,i=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),a=u,o=e.apply(r,i),s||(r=i=null)):s||!1===n.trailing||(s=setTimeout(c,l)),o}},S=n(3),T=n.n(S),_=n(4),E=n.n(_),C=n(0),w=n.n(C),R=function(){function e(t){p()(this,e),this.context=t}return g()(e,[{key:"handle",value:function(e){v.error("BaseEvent::handle is not implemented",e)}}]),e}();function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var A=function(e){T()(n,e);var t=k(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.startPlayback(e.playback)}}]),n}(R),O=function(e){T()(n,e);var t=k(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.stopPlayback(e.playback)}}]),n}(R),I=n(6),x=n.n(I);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var P=function(e){T()(n,e);var t=D(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){"client"!==e._src&&(Reflect.deleteProperty(e,"_src"),this.context.listeners.forEach((function(t){return t(e)})))}}]),n}(R);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var L=function(e){T()(n,e);var t=N(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){var e=this;this.context.annotationLoop=window.setInterval((function(){e.context._api.createAnnotation((function(t){return x()(w()(n.prototype),"handle",e).call(e,{type:"annotation",annotation:t})}),(function(){window.clearInterval(e.context.annotationLoop)}))}),1e3)}}]),n}(P),M=function(e){T()(n,e);var t=N(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){window.clearInterval(this.context.annotationLoop),this.context._api.stopAnnotation()}}]),n}(P);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var j=function(e){T()(n,e);var t=U(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){this.context._rtConnection.send({message:"stfu"})}}]),n}(P);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var F=function(e){T()(n,e);var t=H(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){}}]),n}(R);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var q=function(e){T()(n,e);var t=$(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context.listeners.forEach((function(t){return t(e)}))}}]),n}(R),B=!0,G=!0;function V(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function z(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function W(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(B=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function K(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(G=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Y(){if("object"==typeof window){if(B)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function J(e,t){G&&console.warn(e+" is deprecated, please use "+t+" instead.")}function X(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=V(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=V(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=V(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=V(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function Q(e){return"[object Object]"===Object.prototype.toString.call(e)}function Z(e){return Q(e)?Object.keys(e).reduce((function(t,n){var i=Q(e[n]),o=i?Z(e[n]):e[n],s=i&&!Object.keys(o).length;return void 0===o||s?t:Object.assign(t,r({},n,o))}),{}):e}function ee(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach((function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach((function(n){e(t,t.get(n),r)}))})))}(e,n,i)}))})),i}var te=Y;function ne(e){var t=e&&e.navigator;if(t.mediaDevices){var n=X(e),r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){var s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});var a,c=n.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||c)&&(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?a=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(a=["front"]),a))return t.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return a.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&a.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=s.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),te("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return te("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){i(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){r&&r(o(e))}))}))}.bind(t),t.mediaDevices.getUserMedia){var s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return s(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(o(e))}))}))}}}}function re(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function ie(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function oe(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else z(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function se(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ae(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(a(s(e)))};return t.apply(this,[c,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(a(s(e)))},r])})).then(i,o)}}}function ce(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return ee(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),z(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return ee(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function ue(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function le(e){if(e.RTCPeerConnection){var t=X(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return ue(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}i.apply(this,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=r({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=c(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return c(e,t)}))}));e.RTCPeerConnection.prototype[t]=i[t]}));var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=u(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function u(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function de(e){var t=X(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){var n=0===e.RTCPeerConnection.prototype.addIceCandidate.length;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=r({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]}));var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return n||arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function he(e){var t=X(e);z(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var fe=n(16),pe=n.n(fe);function me(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}function ge(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function ve(e){var t=X(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=pe()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&J("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}(e.iceServers,t.version),Y("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function ye(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function be(e){var t=X(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){J("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var s=r.prototype.getSettings;r.prototype.getSettings=function(){var e=s.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var a=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[e])}}}}function Se(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function Te(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function _e(e){var t=X(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=r({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]})),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],r=e[1],s=e[2];return o.apply(this,[n||null]).then((function(e){if(t.version<53&&!r)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(r,s)}}}function Ee(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function Ce(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),z(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function we(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;J("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function Re(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ke(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function Ae(e){if("object"==typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function Oe(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function Ie(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function xe(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function De(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function Pe(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var a=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}}function Ne(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(Le(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Le(e){return e&&void 0!==e.video?Object.assign({},e,{video:Z(e.video)}):e}function Me(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(J("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function Ue(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function je(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function He(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Fe=n(11),$e=n.n(Fe);function qe(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=$e.a.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,z(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function Be(e){if(e.RTCPeerConnection){var t=X(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=$e.a.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=$e.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=$e.a.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),n(arguments[0])){var e,a=r(arguments[0]),c=i(a),u=o(arguments[0],a);e=0===c&&0===u?Number.POSITIVE_INFINITY:0===c||0===u?Math.max(c,u):Math.min(c,u);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return e}}),this._sctp=l}return s.apply(this,arguments)}}}function Ge(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},z(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function Ve(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function ze(e){if(e.RTCPeerConnection){var t=X(e);if(!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}}}}var We,Ke,Ye=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},n=Y,r=X(e),u={browserDetails:r,commonShim:c,extractVersion:V,disableLog:W,disableWarnings:K};switch(r.browser){case"chrome":if(!i||!de||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),u;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),u;n("adapter.js shimming chrome."),u.browserShim=i,ne(e),ie(e),de(e),oe(e),le(e),se(e),ae(e),ce(e),he(e),qe(e),Ve(e),Be(e),Ge(e),ze(e);break;case"firefox":if(!s||!_e||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=s,be(e),_e(e),Te(e),we(e),Ee(e),Ce(e),Re(e),ke(e),Ae(e),Oe(e),Ie(e),qe(e),Ve(e),Be(e),Ge(e);break;case"edge":if(!o||!ve||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=o,me(e),ge(e),ve(e),ye(e),Be(e),Ge(e);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=a,Me(e),je(e),Pe(e),xe(e),De(e),Ue(e),Ne(e),He(e),qe(e),Be(e),Ge(e),ze(e);break;default:n("Unsupported browser!")}return u}({window:"undefined"==typeof window?void 0:window}),Je=n(17),Xe=n.n(Je),Qe=n(9),Ze=n.n(Qe),et=function(){function e(){p()(this,e),this.onChange=this.onChange.bind(this),this.hasSupport=Boolean(Ze.a.isEnabled)}return g()(e,[{key:"toggle",value:function(){return this.isFullscreen()?Ze.a.exit():Ze.a.request()}},{key:"canFullscreen",value:function(){return this.hasSupport}},{key:"isFullscreen",value:function(){return this.hasSupport&&Ze.a.isFullscreen}},{key:"onChange",value:function(e){var t=this;this.hasSupport&&Ze.a.on("change",(function(){return e(t.isFullscreen())}))}},{key:"off",value:function(){this.hasSupport&&Ze.a.off("change")}}]),e}(),tt={environment:function(){return{canMix:this.canMix(),canPip:this.hasPipSupport(),canSFU:this.canSFU(),isPhone:this.isPhone(),inIframe:this.inIframe(),isIOSDevice:this.isIOSDevice(),canUseEyeson:this.canUseEyeson(),canFullscreen:this.canFullscreen(),hasMobileDevice:this.hasMobileDevice(),canToggleCamera:this.canToggleCamera(),canPresentFiles:this.canPresentFiles(),canScreenCapture:this.canScreenCapture(),canAdjustSettings:this.canAdjustDeviceSettings(),isExperimentalBrowser:this.isExperimentalBrowser()}},platform:function(){return Xe.a},canUseEyeson:function(){return!this.isWebView()&&this.hasGetUserMedia()&&this.hasPeerConnection()&&this.isMinimumRequiredBrowser()},hasGetUserMedia:function(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices},hasGetDisplayMedia:function(){return"mediaDevices"in navigator&&"getDisplayMedia"in navigator.mediaDevices},hasPeerConnection:function(){return"RTCPeerConnection"in window},hasCaptureStream:function(){return"captureStream"in HTMLMediaElement.prototype||"mozCaptureStream"in HTMLMediaElement.prototype},hasCanvasCaptureSupport:function(){return"CanvasCaptureMediaStream"in window||"CanvasCaptureMediaStreamTrack"in window},hasSenders:function(){return"RTCRtpSender"in window},hasTrackOnUnmute:function(){return!(this.isSafari()&&this.browserVersion()<13&&!this.isWorkingIOSBrowser()||this.isEdge())&&"onunmute"in MediaStreamTrack.prototype},hasWebpSupport:function(){return this.isChrome()?Ye.browserDetails.version>=70:this.isFF()?Ye.browserDetails.version>=65:!!this.isEdge()},canChangeAudioOutput:function(){return!document||"setSinkId"in HTMLMediaElement.prototype},canChangeMicrophone:function(){var e=!1;return"safari"===Ye.browserDetails.browser&&(e=this.browserVersion()<12&&!this.isWorkingIOSBrowser()),!this.isTestSuite()&&!e},canChangeCamera:function(){var e=!1;return"safari"===Ye.browserDetails.browser&&(e=this.browserVersion()<12&&!this.isWorkingIOSBrowser()),!this.isTestSuite()&&!e},canScreenCapture:function(){return!(!h.screencapture||this.isTestSuite()||!this.canUseEyeson()||this.isEdge()||this.hasMobileDevice())&&(this.hasGetDisplayMedia()||this.isFF()&&this.hasGetUserMedia())},canPresentFiles:function(){return!(this.isTestSuite()||!this.canUseEyeson()||this.isEdge()||this.isFF()&&Ye.browserDetails.version<=60||this.isIPhone()||this.isIOSDevice()&&this.browserVersion()<13&&!this.isWorkingIOSBrowser())},requiresLowerConstraints:function(){return this.isSafari()&&this.browserVersion()<13&&!this.isWorkingIOSBrowser()},browserName:function(){return Ye.browserDetails.browser.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))},browserVersion:function(){return"safari"===Ye.browserDetails.browser?Ye.extractVersion(navigator.userAgent,/Version\/(\d+)\./,1):Ye.browserDetails.version},isEdge:function(){return"edge"===Ye.browserDetails.browser},isFF:function(){return"firefox"===Ye.browserDetails.browser},isChrome:function(){return"chrome"===Ye.browserDetails.browser},isSafari:function(){return"safari"===Ye.browserDetails.browser},isMinimumRequiredBrowser:function(){return this.isChrome()?this.isMinimumRequiredChrome():this.isFF()?this.isMinimumRequiredFF():this.isEdge()?this.isMinimumRequiredEdge():!!this.isSafari()&&this.isMinimumRequiredSafari()},isMinimumRequiredEdge:function(){return!!this.isEdge()&&Ye.browserDetails.version>15e3},isMinimumRequiredFF:function(){return!!this.isFF()&&Ye.browserDetails.version>=52},isMinimumRequiredChrome:function(){return!!this.isChrome()&&Ye.browserDetails.version>=70},isMinimumRequiredSafari:function(){return!!this.isSafari()&&(this.browserVersion()>=10||this.isWorkingIOSBrowser())},isWorkingIOSBrowser:function(){var e=navigator.userAgent.indexOf("FxiOS/")>-1,t=navigator.userAgent.indexOf("CriOS/")>-1;return(e||t)&&this.hasGetUserMedia()},isRecentBrowser:function(){return v.warn("DEPRECATION WARNING - isRecentBrowser will be renamed to isMinimumRequiredBrowser soon!"),this.isMinimumRequiredBrowser()},isRecentEdge:function(){return v.warn("DEPRECATION WARNING - isRecentEdge will be renamed to isMinimumRequiredEdge soon!"),this.isMinimumRequiredEdge()},isRecentFF:function(){return v.warn("DEPRECATION WARNING - isRecentFF will be renamed to isMinimumRequiredFF soon!"),this.isMinimumRequiredFF()},isRecentChrome:function(){return v.warn("DEPRECATION WARNING - isRecentChrome will be renamed to isMinimumRequiredChrome soon!"),this.isMinimumRequiredChrome()},isRecentSafari:function(){return v.warn("DEPRECATION WARNING - isRecentSafari will be renamed to isMinimumRequiredSafari soon!"),this.isMinimumRequiredSafari()},isExperimentalBrowser:function(){return["safari","edge"].includes(Ye.browserDetails.browser)},hasPipSupport:function(){return!document||Boolean("webkitSupportsPresentationMode"in HTMLVideoElement.prototype||"pictureInPictureEnabled"in document)&&!this.isIPhone()},isAndroidDevice:function(){return Boolean(navigator.userAgent.match(/Android/i))},isIOSDevice:function(){return(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream},isIPhone:function(){return(/iPhone/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&window.screen.height/window.screen.width>=1.5)&&!window.MSStream},isAndroidPhone:function(){var e=/(android)/i.test(navigator.userAgent),t=/(mobile)/i.test(navigator.userAgent);return e&&t},inIframe:function(){try{return window.self!==window.top}catch(e){return!0}},isPhone:function(){return this.isIPhone()||this.isAndroidPhone()},hasMobileDevice:function(){return this.isIOSDevice()||this.isAndroidDevice()},isTouchDevice:function(){return Boolean("ontouchstart"in window||navigator.maxTouchPoints)},canLiveStreamToFacebook:function(){return!this.isIOSDevice()&&!this.isEdge()&&!this.isTestSuite()},canDisplayTooltips:function(){return!this.isIOSDevice()&&!this.isTestSuite()},canAdjustDeviceSettings:function(){return!this.isIOSDevice()},canToggleCamera:function(){return!0},canDrawCamera:function(){return!this.isIOSDevice()},canMix:function(){return this.isChrome()&&this.canScreenCapture()&&this.hasCanvasCaptureSupport()},stopsDeviceActivityIndicatorOnDisable:function(){return!!this.isFF()},supportsBlurOnSVG:function(){return"undefined"!=typeof SVGElement&&void 0!==SVGElement.prototype.blur},hasLocalStorage:function(){try{var e="object"===d()(window.localStorage)&&null!==window.localStorage;window.localStorage.setItem("eyeson.test","test");var t="test"===window.localStorage.getItem("eyeson.test");return e&&t}catch(e){return v.debug("FeatureDetector::hasLocalStorage:",e.message),!1}},canFullscreen:function(){return(new et).canFullscreen()},isFullscreen:function(){return(new et).isFullscreen()},canSFU:function(){var e=!1;if(this.isSafari()){if(!h.allowSafariSFU)return!1;if(this.isWorkingIOSBrowser())return!0;var t=navigator.userAgent.match(/Version\/(\d+).(\d+)/);t&&t.length>1&&(e=Number(t[1])<12||12===Number(t[1])&&Number(t[2])<1)}return!this.isEdge()&&!e&&!this.isTestSuite()},disallowAudioSyncSrcChange:function(){return this.isSafari()&&this.canSFU()},canShare:function(){return Boolean(navigator.share)},isWebView:function(){return/Version\/|wv/i.test(navigator.userAgent)&&this.isAndroidDevice()},isTestSuite:function(){return"test-suite"===Ye.browserDetails.browser}},nt=n(8),rt=n.n(nt),it=n(10),ot=n.n(it),st=n(5),at=n.n(st),ct=function(){function e(){p()(this,e),this._stream=this.createStream()}return g()(e,[{key:"createStream",value:function(){var e=Object.assign(document.createElement("canvas"),{width:0,height:0});e.id="eyeson-ninja-stream",e.getContext("2d").fillRect(0,0,0,0);var t=e.captureStream(),n=t.getVideoTracks(),r=at()(n,1)[0];return window.CanvasCaptureMediaStream&&t instanceof window.CanvasCaptureMediaStream&&(r.type="canvas-track",r.canvas=e),t}},{key:"stream",get:function(){return this._stream}}]),e}(),ut=(We={},Ke=tt.hasLocalStorage(),{store:function(e,t){Ke?window.localStorage.setItem("eyeson."+e,JSON.stringify(t)):We[e]=t},load:function(e,t){var n=t;if("object"!==d()(n)||Array.isArray(n)||(n=Object.assign({},n)),!Ke)return We[e]||n;var r=window.localStorage.getItem("eyeson."+e);return r?JSON.parse(r):n}}),lt=window.CanvasCaptureMediaStream||window.CanvasCaptureMediaStreamTrack,dt=function(e){return Boolean(e&&e.getAudioTracks().length>0&&e.getAudioTracks()[0].enabled)},ht=function(e){return Boolean(e&&e.getVideoTracks().length>0&&e.getVideoTracks()[0].enabled)},ft=function(e){return e&&e.getAudioTracks().forEach((function(e){return e.enabled=!1})),e},pt=function(e){return e&&e.getAudioTracks().forEach((function(e){return e.enabled=!0})),e},mt=function(e,t){return e&&e.getAudioTracks().forEach((function(e){return e.enabled=t})),e},gt=function(e){return e.stop(),e.dispatchEvent(new Event("stopped"))},vt=function(e){e&&e.getTracks().forEach(gt)},yt=function(e){return/screen|monitor|window|web-contents-media-stream/i.test(e.label)||"screen-track"===e.type},bt=function(e){return Boolean(("canvas-track"===e.type||e instanceof lt)&&e.canvas&&"eyeson-ninja-stream"!==e.canvas.id)},St=function(e){return Boolean(("canvas-track"===e.type||e instanceof lt)&&e.canvas&&"eyeson-ninja-stream"===e.canvas.id)},Tt=function(e){return!bt(e)&&!yt(e)},_t=function(e){return e?e.getVideoTracks().filter(yt):[]},Et=function(e){return e?e.getVideoTracks().filter(Tt):[]},Ct=function(e){Et(e).forEach(gt)},wt=function(e){return Et(e).forEach((function(e){return e.enabled=!1})),e},Rt=function(e){return Et(e).forEach((function(e){return e.enabled=!0})),e},kt=function(e,t){return Et(e).forEach((function(e){return e.enabled=t})),e},At=function(e){return e instanceof lt?e.getVideoTracks():e?e.getVideoTracks().filter(bt):[]},Ot=function(e){return ht(e)&&e.getVideoTracks().some(yt)},It=function(e){return!(!tt.hasCanvasCaptureSupport()||!e)&&e.getVideoTracks().some(bt)},xt=function(e){return ht(e)&&!Ot(e)&&!It(e)},Dt=function(e){return!!e&&It(e)&&e.getVideoTracks().some(bt)},Pt=function(e){return Ot(e)||It(e)},Nt=function(e){return Et(e).some((function(e){return e.enabled}))},Lt=function(e){var t=Et(e);if(t.length>0){var n=at()(t,1)[0];if("function"==typeof n.getSettings){var r=n.getSettings();if(r&&"facingMode"in r)return r.facingMode}}return null},Mt=function(e){e.getContext("2d");var t=e.captureStream(20),n=t.getVideoTracks(),r=at()(n,1)[0];return"requestFrame"in r||(r.type="canvas-track",r.canvas=e,r.requestFrame=function(){return t.requestFrame()}),t},Ut=function(e,t){if(e.length!==t.length)return!0;for(var n=function(n,o,s,a){if(n=e[s],!(o=t.find((function(e){return r=n,i=o,n.deviceId===e.deviceId&&n.groupId===e.groupId&&n.label===e.label&&n.kind===e.kind}))))return r=n,i=o,{v:!0};r=n,i=o},r=null,i=!1,o=e.length,s=0;s<o;s++){var a=n(r,i,s);if("object"===d()(a))return a.v}return!1},jt=function(){function e(t){var n=this;p()(this,e),this.sinkId="default",this.options=t||{audio:!0,video:!0,eco:!1},this.stream=null,this.cameras=[],this.listeners=[],this.speakers=[],this.microphones=[],this.constraints={},this.terminationInProgress=!1,e.getSinkId().then((function(e){return n.sinkId=e})),this.setStream=this.setStream.bind(this),this.handleError=this.handleError.bind(this),this.verifyStream=this.verifyStream.bind(this),this.storeConstraints=this.storeConstraints.bind(this),this.adjustAudioTrack=this.adjustAudioTrack.bind(this)}return g()(e,[{key:"start",value:function(){var t=this;return this.watchForNewDevices(),e.fetchDevices().then((function(e){return t.setDevices(e)})).then((function(){return e.getConstraints(t.options)})).then((function(e){return t.constraints=e,navigator.mediaDevices.getUserMedia({video:!t.options.eco&&t.constraints.video,audio:t.constraints.audio||!0})})).then(this.adjustAudioTrack).then(this.setStream).catch(this.handleError)}},{key:"stopStream",value:function(){this.stream&&(vt(this.stream),this.stream=null)}},{key:"stop",value:function(){this.stopStream()}},{key:"terminate",value:function(){var e=this;navigator.mediaDevices.ondevicechange=null,this.terminationInProgress=!0,window.setTimeout((function(){return e.stop()}),10)}},{key:"setDevices",value:function(e){var t=Ut(this.cameras,e.cameras),n=Ut(this.microphones,e.microphones),r=Ut(this.speakers,e.speakers);this.cameras=e.cameras,this.microphones=e.microphones,this.speakers=e.speakers,this.options.audio=this.microphones.length>0&&this.options.audio,this.options.video=this.cameras.length>0&&this.options.video,(t||n||r)&&this.emit(e)}},{key:"watchForNewDevices",value:function(){var t=this;navigator.mediaDevices.ondevicechange=function(){e.fetchDevices().then((function(e){return t.setDevices(e)})).catch(t.handleError)}}},{key:"onChange",value:function(e){this.listeners.push(e)}},{key:"removeListener",value:function(e){this.listeners=this.listeners.filter((function(t){return t!==e}))}},{key:"update",value:function(e){return this.constraints=e||this.constraints,this.stop(),this.watchForNewDevices(),navigator.mediaDevices.getUserMedia(this.constraints).then(this.setStream).catch(this.handleError)}},{key:"updateWithOptions",value:function(t){var n=this;return this.options=t||this.options,this.stop(),this.watchForNewDevices(),e.getConstraints(this.options).then((function(e){return n.constraints=e,navigator.mediaDevices.getUserMedia({video:!n.options.eco&&n.constraints.video,audio:n.constraints.audio||!0})})).then(this.adjustAudioTrack).then(this.setStream).catch(this.handleError)}},{key:"adjustAudioTrack",value:function(e){return 1===e.getAudioTracks().length&&(e.getAudioTracks()[0].enabled=this.options.audio),e}},{key:"storeConstraints",value:function(){v.debug("DeviceManager::storeConstraints",this.constraints),ut.store("mediaConstraints",this.constraints),ut.store("sinkId",this.sinkId)}},{key:"setStream",value:function(t){var n=this,r=null===this.stream;if(this.stream=t,this.terminationInProgress)return this.stop(),Promise.resolve();var i=function(){n.emit({stream:n.stream,constraints:n.constraints,options:n.options}),n.verifyStream()};return r?e.fetchDevices().then((function(e){n.setDevices(e),i()})):(i(),Promise.resolve())}},{key:"verifyStream",value:function(){this.constraints.video&&this.stream&&0===this.stream.getVideoTracks().length&&!this.options.eco&&this.handleError({name:"EyesonCameraError"}),this.constraints.audio&&this.stream&&0===this.stream.getAudioTracks().length&&this.handleError({name:"EyesonMicrophoneError"})}},{key:"setVideoInput",value:function(e){var t={};return Object.assign(t,this.constraints.video,{deviceId:{exact:e}}),this.constraints.video=t,this.update()}},{key:"setAudioInput",value:function(e){var t={};return Object.assign(t,this.constraints.audio,{deviceId:{exact:e}}),this.constraints.audio=t,this.update()}},{key:"setAudioOutput",value:function(e){this.sinkId=e,ut.store("sinkId",this.sinkId),this.emit({sinkId:this.sinkId})}},{key:"handleError",value:function(e){v.error("DeviceManager::",e),this.emit({error:e,constraints:this.constraints})}},{key:"emit",value:function(e){this.listeners.forEach((function(t){return t(e)}))}}],[{key:"getDevices",value:function(){return"mediaDevices"in navigator?navigator.mediaDevices.enumerateDevices().then((function(e){return 2===e.length&&e.every((function(e){return"audioinput"===e.kind&&""===e.deviceId}))?[{deviceId:"",groupId:"",kind:"audioinput",label:""},{deviceId:"",groupId:"",kind:"videoinput",label:""}]:e})):new Promise((function(e){return e([])}))}},{key:"getConstraints",value:function(t){var n=t||{audio:!0,video:!0};return e.getDevices().then((function(t){return e.determineConstraintsForDevices(t,n)})).catch((function(e){v.error("DeviceManager::getConstraints ",e)}))}},{key:"determineConstraintsForDevices",value:function(e,t){var n=ut.load("mediaConstraints",t);if("video"in n||(n.video=!0),"audio"in n||(n.audio=!0),n.video.deviceId){var r=n.video.deviceId.exact;e.find((function(e){return e.deviceId===r}))||(n.video=t.video)}if(n.audio.deviceId){var i=n.audio.deviceId.exact;e.find((function(e){return e.deviceId===i}))||(n.audio=t.audio)}return!1!==t.video||t.eco||(n.video=!1),!0===t.video&&!1===n.video&&(n.video=!0),!0===t.audio&&!1===n.audio&&(n.audio=!0),0===e.filter((function(e){return"videoinput"===e.kind})).length&&(n.video=!1),n}},{key:"getMobileConstraints",value:function(e){var t=Object.assign({audio:!0,video:!0},e);return new Promise((function(e){return e(t)}))}},{key:"getSinkId",value:function(){var t=ut.load("sinkId","");return e.getDevices().then((function(e){return e.find((function(e){return e.deviceId===t}))||(t="default"),t}))}},{key:"fetchDevices",value:function(){return e.getDevices().then((function(e){return{cameras:e.filter((function(e){return"videoinput"===e.kind})),microphones:e.filter((function(e){return"audioinput"===e.kind})),speakers:e.filter((function(e){return"audiooutput"===e.kind}))}}))}},{key:"fetchInputDevices",value:function(){return e.getDevices().then((function(e){return e.filter((function(e){return e.kind.includes("input")}))}))}}]),e}(),Ht=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eco:!1,audio:!0,video:!0,screen:!1,screenStream:null,canvas:null,existingStream:null};p()(this,e),this.options=t,this.tempStream=null,this.brokenTrackCallback=null,this.getMediaStream=this.getMediaStream.bind(this),this.addNinjaTrack=this.addNinjaTrack.bind(this),this.addCanvasTrack=this.addCanvasTrack.bind(this),this.addScreenTrack=this.addScreenTrack.bind(this),this.adjustAudioTrack=this.adjustAudioTrack.bind(this),this.adjustVideoTrack=this.adjustVideoTrack.bind(this),this.addScreenStreamTrack=this.addScreenStreamTrack.bind(this)}var t;return g()(e,[{key:"start",value:function(){var e=this;v.debug("MediaStreamBuilder::start",this.options);var t=this.options,n=t.existingStream,r=t.video,i=t.audio,o=t.screen,s=t.canvas;return tt.isIOSDevice()&&n&&"boolean"==typeof r&&n.active&&Et(n).length>0&&"ended"!==Et(n)[0].readyState?new Promise((function(t){var o=Et(n),a=at()(o,1)[0];if(a.enabled=r,a.onended=r&&e.brokenTrackCallback?function(){v.error("iOS video track broken"),n.getTracks().forEach((function(e){return e.stop()})),e.brokenTrackCallback()}:null,"boolean"==typeof i&&mt(n,i),s){var c=new MediaStream(n.getTracks()),u=Mt(s),l=At(u),d=at()(l,1)[0];return c.addTrack(d),void t(c)}t(n)})):tt.isSafari()&&o?navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(t){return e.tempStream=t,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){return t.addTrack(e.getAudioTracks()[0]),t}))})).then(this.adjustAudioTrack).then((function(t){var n=t.getVideoTracks();return at()(n,1)[0].type="screen-track",e.tempStream=null,t})).catch((function(t){return e.tempStream&&(vt(e.tempStream),e.tempStream=null),v.error("MediaStreamBuilder::start ",t,t.message),Promise.reject(t)})):jt.fetchInputDevices().then(this.getMediaStream).then(this.adjustVideoTrack).then(this.adjustAudioTrack).then(this.addCanvasTrack).then(this.addScreenTrack).then(this.addNinjaTrack).then((function(t){return e.tempStream=null,t})).catch((function(t){return e.cleanupTempStream(),v.error("MediaStreamBuilder::start ",t,t.message),Promise.reject(t)}))}},{key:"getMediaStream",value:function(e){var t=this;if(0===e.length)return this.options={audio:!1,video:!1},this.tempStream=(new ct).stream,this.tempStream;var n=this.options,r=n.eco,i=n.video,o=n.existingStream,s={video:!tt.hasCanvasCaptureSupport()&&!r||i,audio:!0};!1===i&&!r&&tt.isIOSDevice()&&(s.video=!0);var a=jt.getConstraints;return(tt.isPhone()||tt.isIOSDevice())&&o&&(vt(o),a=jt.getMobileConstraints),a(s).then((function(e){return navigator.mediaDevices.getUserMedia(e).then((function(e){return t.tempStream=e,e}))}))}},{key:"adjustVideoTrack",value:function(e){if(1===e.getVideoTracks().length){var t=e.getVideoTracks(),n=at()(t,1)[0];n.enabled=this.options.video,!1!==this.options.video||tt.isIOSDevice()||gt(n)}return e}},{key:"adjustAudioTrack",value:function(e){return 1===e.getAudioTracks().length&&(e.getAudioTracks()[0].enabled=this.options.audio),e}},{key:"addCanvasTrack",value:function(e){var t=this.options,n=t.canvas,r=t.existingStream;if(n){var i=Mt(n),o=At(i),s=at()(o,1)[0];e.addTrack(s)}if(Dt(r)){var a=At(r),c=at()(a,1)[0];e.addTrack(c)}return e}},{key:"addScreenTrack",value:(t=ot()(rt.a.mark((function e(t){var n,r,i,o,s,a,c,u;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.options,r=n.screen,i=n.screenStream,o=n.existingStream,!r){e.next=10;break}if(null!=i){e.next=9;break}return e.next=5,this.getDisplayMedia();case 5:s=e.sent,this.addScreenStreamTrack(t,s),e.next=10;break;case 9:this.addScreenStreamTrack(t,i);case 10:return Ot(o)&&(a=_t(o),c=at()(a,1),u=c[0],t.addTrack(u)),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"addScreenStreamTrack",value:function(e,t){var n=t.getVideoTracks(),r=at()(n,1)[0];r.type="screen-track",e.addTrack(r)}},{key:"getDisplayMedia",value:function(){return tt.hasGetDisplayMedia()?navigator.mediaDevices.getDisplayMedia({video:{width:{max:1920},height:{max:1080},frameRate:{max:15}}}):navigator.mediaDevices.getUserMedia({video:{mediaSource:"screen",width:{max:1920},height:{max:1040},frameRate:{max:15}}})}},{key:"addNinjaTrack",value:function(e){var t=this.options,n=t.eco,r=t.video;if(n||!tt.hasCanvasCaptureSupport())return e;if(0===e.getVideoTracks().length){var i=(new ct).stream.getVideoTracks(),o=at()(i,1)[0];o.enabled=r,e.addTrack(o)}return e}},{key:"cleanupTempStream",value:function(){var e=this.tempStream;if(e){var t=this.options,n=t.existingStream,r=t.screenStream;if(Dt(n)){var i=At(n),o=at()(i,1)[0];e.removeTrack(o)}if(Ot(n)){var s=_t(n),a=at()(s,1)[0];e.removeTrack(a)}if(Ot(r)){var c=_t(r),u=at()(c,1)[0];e.removeTrack(u)}vt(e),this.tempStream=null}}},{key:"onBrokenTrackError",value:function(e){return this.brokenTrackCallback=e,this}}]),e}();function Ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var $t=function(e){T()(n,e);var t=Ft(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.audio,n=e.video;v.debug("ChangeLocalStreamEvent::handle");var r=this.context._session;if(tt.isIOSDevice()){var i=function(e,t,n){return e.getAudioTracks().forEach((function(e){return e.enabled=t})),e.getVideoTracks().forEach((function(e){return e.enabled=n})),e.locallyChanged=!0,e}(r.localStream,t,n);r.emit({type:"stream_update",localStream:i})}else new Ht({audio:t,video:n,existingStream:r.localStream}).start().then((function(e){e.locallyChanged=!0,r.setStream(e)})).catch(v.error)}}]),n}(R);function qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Bt=function(e){T()(n,e);var t=qt(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){if(this.context._session){v.debug("PodiumEvent::handle",e);var t=this.context._session,n=t.localStream;!e.hasPresenter&&Pt(n)&&t.emit({type:"stop_presenting"}),t&&this.scanMessageForLocalStreamOptimization(n,e),new q(this.context).handle(e)}}},{key:"scanMessageForLocalStreamOptimization",value:function(e,t){var n=t.media,r=t.video,i=t.isSource,o=t.isPresenter,s=t.hasDesktopSources;e&&(tt.isFF()||(!n&&i&&(!r&&xt(e)||r&&!ht(e)&&e.locallyChanged)&&new $t(this.context).handle({audio:dt(e),video:r}),r&&!o&&s&&new $t(this.context).handle({audio:dt(e),video:!1})))}}]),n}(R);function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Vt=function(e){T()(n,e);var t=Gt(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){this.context._api.takeSnapshot()}}]),n}(R);function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Wt=function(e){T()(n,e);var t=zt(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.setLayer(e.params)}}]),n}(R);function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Yt=function(e){T()(n,e);var t=Kt(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._session.send({type:"chat",content:e.content})}}]),n}(R);function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Xt=function(e){T()(n,e);var t=Jt(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.setLayout(e.params)}}]),n}(R),Qt=n(18),Zt=n.n(Qt),en=["chat","recording","memberlist","source_update","voice_activity","stream_offer"],tn=function(){function e(t,n){p()(this,e);var r=t.src,i=void 0===r?[]:r,o=t.psrc,s=t.asrc,a=t.vsrc,c=t.dsrc;this.sources=i,this.presenterIdx=o,this.audioSources=s,this.videoSources=a,this.desktopSources=c,this.userId=n,this.userSourceIndex=this.sources.indexOf(this.userId)}return g()(e,[{key:"isSolo",get:function(){return 1===Array.from(new Set(this.sources)).length&&this.sources[0]===this.userId}},{key:"isSource",get:function(){return this.sources.includes(this.userId)}},{key:"isPresenter",get:function(){return this.hasPresenter&&this.presenter===this.userId}},{key:"presenter",get:function(){return this.hasPresenter&&this.sources[this.presenterIdx]}},{key:"hasMedia",get:function(){return this.sources.some((function(e){return/media/.test(e)}))}},{key:"hasPresenter",get:function(){return!isNaN(this.presenterIdx)}},{key:"hasVideoSources",get:function(){return Boolean(this.videoSources)}},{key:"hasDesktopSources",get:function(){return!isNaN(parseInt(this.desktopSources,10))}},{key:"hasAudioPosition",get:function(){return this.audioSources.includes(this.userSourceIndex)}},{key:"hasVideoPosition",get:function(){return this.videoSources.includes(this.userSourceIndex)}},{key:"hasMutedVideoPeers",get:function(){var e=this;return!this.hasDesktopSources&&0===this.videoSources.filter((function(t){return t!==e.userSourceIndex})).length}}]),e}(),nn=function(){function e(t,n){p()(this,e),this.opts=Object.assign({},this.defaultOptions,n),this.user=t,this.debug=this.debug.bind(this),this.stamp=this.stamp.bind(this),this.default=this.default.bind(this),this.process=this.process.bind(this),this.sourceUpdate=this.sourceUpdate.bind(this),this.voiceActivity=this.voiceActivity.bind(this)}return g()(e,[{key:"debug",value:function(){if(this.opts.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];v.debug(t)}}},{key:"stamp",value:function(e){return Object.assign({_src:"sip"},e)}},{key:"process",value:function(e){return({source_update:this.sourceUpdate,voice_activity:this.voiceActivity}[e.type]||this.default)(this.stamp(e))}},{key:"default",value:function(e){return this.debug("SipMessageTransformer::default",e),e}},{key:"sourceUpdate",value:function(e){this.debug("SipMessageTransformer::sourceUpdate",e);var t=new tn(e,this.user.uri);return Object.assign({type:"podium",solo:t.isSolo,audio:t.hasAudioPosition,video:t.hasVideoPosition,media:t.hasMedia,sources:t.sources,isSource:t.isSource,presenter:t.presenter,isPresenter:t.isPresenter,hasPresenter:t.hasPresenter,videoSources:t.videoSources,hasVideoSources:t.hasVideoSources,hasDesktopSources:t.hasDesktopSources,hasMutedVideoPeers:t.hasMutedVideoPeers})}},{key:"voiceActivity",value:function(e){return this.debug("SipMessageTransformer::voiceActivity",e),Object.assign({type:"voice_activity_raw",on:e.on,userId:e.cid.split("@").shift()})}},{key:"defaultOptions",get:function(){return{debug:!0}}}]),e}(),rn=function(){function e(t,n){p()(this,e),this.options=n||{},this.session=t,this.connection=t.passedOptions.sessionDescriptionHandlerOptions.connection,this.CONTENT_TYPE="application/sdp",this.initPeerConnection()}return g()(e,[{key:"getDescription",value:function(e,t){var n=this;return v.debug("SessionDescriptionHandler::getDescription:",e,t),this.localStream=e.stream,this.localStream.getTracks().forEach((function(e){n.peerConnection.addTrack(e,n.localStream)})),this.createOfferOrAnswer(e.RTCConstraints,t).then((function(e){return{body:e,contentType:n.CONTENT_TYPE}}))}},{key:"setDescription",value:function(e,t,n){var r=this;v.debug("SessionDescriptionHandler::setDescription:",e,t,n);var i=new RTCSessionDescription({type:this.hasOffer("local")?"answer":"offer",sdp:e});return this.peerConnection.setRemoteDescription(i).then((function(){r.session.passedOptions.sessionDescriptionHandlerOptions.remoteDescriptionUpdate(i)}))}},{key:"hasDescription",value:function(e){return v.debug("SessionDescriptionHandler::hasDescription:",e),e===this.CONTENT_TYPE}},{key:"getDirection",value:function(){v.warn("SessionDescriptionHandler::getDirection: NOT IMPLEMENTED")}},{key:"holdModifier",value:function(e){v.warn("SessionDescriptionHandler::holdModifier: NOT IMPLEMENTED.",e)}},{key:"close",value:function(){v.debug("SessionDescriptionHandler::close"),this.peerConnectionClosed()||(this.stopAllTracks(),this.peerConnection.close(),clearTimeout(this.iceCheckingTimeout),v.debug("SessionDescriptionHandler::close Stopped streams and closed peerConnection."))}},{key:"initPeerConnection",value:function(){var e=this,t=this.buildPeerConnectionOptions();v.debug("SessionDescriptionHandler::initPeerConnection with: ",t),this.onIceCompleted=new Promise((function(t,n){e.resolveIceCompleted=t,e.rejectIceCompleted=n}));try{this.peerConnection=new RTCPeerConnection(t),this.peerConnection.ontrack=this.handleOntrack.bind(this),this.peerConnection.onicecandidate=this.gotIceCandidate.bind(this),this.peerConnection.onnegotiationneeded=this.handleNegotiation.bind(this),this.startIceCheckingTimer(t.iceCheckingTimeout)}catch(e){v.error("SessionDescriptionHandler::initPeerConnection failed:",e,this.connection.user)}}},{key:"peerConnectionClosed",value:function(){return Boolean(this.peerConnection&&"closed"===this.peerConnection.signalingState)}},{key:"handleOntrack",value:function(e){var t=this,n=at()(e.streams,1);this.remoteStream=n[0],v.debug("SessionDescriptionHandler::handleOntrack: ",e.track.kind),e.track.onunmute=function(){t.session.passedOptions.sessionDescriptionHandlerOptions.handleUnmute(e.track)},this.session.passedOptions.sessionDescriptionHandlerOptions.handleAccept(this.remoteStream)}},{key:"startIceCheckingTimer",value:function(e){var t=this;this.iceCheckingTimer=setTimeout((function(){v.debug("iceCheckingTimeout triggered after: "+e+" milliseconds"),t.resolveIceCompleted()}),e)}},{key:"gotIceCandidate",value:function(e){var t=e.candidate;return t?"relay"===t.type&&"video"===t.sdpMid?(v.debug("SessionDescriptionHandler::gotIceCandidate: ".concat(t,".\n                   Relay candidate found, onIceCompleted.")),void this.resolveIceCompleted()):void v.debug("SessionDescriptionHandler::gotIceCandidate: ".concat(t)):(v.debug("SessionDescriptionHandler::gotIceCandidate: no candidates left, onIceCompleted."),void this.resolveIceCompleted())}},{key:"buildPeerConnectionOptions",value:function(){var e=Object.assign({},this.connection.user);return e.stunServers={urls:e.stunServers},e.turnServers=e.turnServers.map((function(e){if(tt.isEdge()){var t=e.urls.find((function(e){return!e.match(/transport/)}));e.urls.push(t+"?transport=udp")}return e.credential=e.password,e})),Object.assign({},this.options.peerConnectionOptions,{sdpSemantics:"unified-plan",iceServers:e.turnServers.concat(e.stunServers)})}},{key:"createOfferOrAnswer",value:function(e,t){var n=this;v.debug("SessionDescriptionHandler::createOfferOrAnswer: ",e,t);var r=e||{},i=t||[],o=this.hasOffer("remote")?"createAnswer":"createOffer";return this.peerConnection[o](r).then((function(e){return n.peerConnection.setLocalDescription(e)})).then((function(){return n.onIceCompleted})).then((function(){var e=n.peerConnection.localDescription.sdp;try{i.forEach((function(t){e=t(e)}))}catch(t){v.error("sdpModifier failed: ",t,e)}return e})).catch((function(e){v.error("createOfferOrAnswer:",e)}))}},{key:"hasOffer",value:function(e){return this.peerConnection.signalingState==="have-".concat(e,"-offer")}},{key:"getLocalStream",value:function(){return this.localStream}},{key:"getRemoteStream",value:function(){return this.remoteStream}},{key:"setStream",value:function(e){var t=this;return new Promise((function(n,r){var i=t.getLocalStream();t.localStream=e,t.stopUnusedTracks(i,e);var o=e.getAudioTracks(),s=at()(o,1)[0],a=Dt(e)?At(e):e.getVideoTracks(),c=at()(a,1)[0];t.tracksExist()||n({newStream:e,remoteStream:t.remoteStream});var u=t.peerConnection.getSenders().find((function(e){return"audio"===e.track.kind})),l=t.peerConnection.getSenders().find((function(e){return"video"===e.track.kind}));u.replaceTrack(s).then((function(){return l.replaceTrack(c)})).then((function(){n({newStream:e,remoteStream:t.remoteStream})})).catch(r)}))}},{key:"stopUnusedTracks",value:function(e,t){e.getTracks().filter((function(e){return!t.getTracks().includes(e)})).forEach(gt)}},{key:"tracksExist",value:function(){return this.peerConnection.getSenders().find((function(e){return null!==e.track}))>0}},{key:"handleNegotiation",value:function(){v.debug("SessionDescriptionHandler::handleNegotiation")}},{key:"stopAllTracks",value:function(){v.debug("SessionDescriptionHandler::stopAllTracks");var e=this.peerConnection.getReceivers?this.peerConnection.getReceivers():[];this.peerConnection.getSenders().concat(e).forEach((function(e){e.track&&gt(e.track)}))}}]),e}(),on={peerConnectionOptions:{iceCheckingTimeout:3e3}},sn=function(){function e(t,n){p()(this,e),this.listeners=[],this.user=t,this._room=n,this.user.sessionDescriptionHandlerFactoryOptions=on,this.user.sessionDescriptionHandlerFactory=function(e,t){return new rn(e,t)};var r=this.adjustUserAgentOptions(this.user);this.userAgent=new Zt.a.UA(r),this.transformer=new nn(this.user),this.start=this.start.bind(this)}return g()(e,[{key:"adjustUserAgentOptions",value:function(e){return e.autostart=!1,e.transportOptions={wsServers:[e.wsServers],traceSip:!0,connectionTimeout:10},e}},{key:"start",value:function(){var e=this;return new Promise((function(t,n){e.userAgent.once("transportCreated",(function(r){r.on("transportError",(function(){n(new Error("SipTransportError"))})),r.on("connected",(function(){e.userAgent&&e.userAgent.on("registrationFailed",(function(t,n){e.emit({type:"log",name:"SipConnection::registrationFailed",details:"".concat(n," - ").concat(t)})})),t()}))})),e.userAgent.start()}))}},{key:"startSession",value:function(e,t){return this.userAgent.invite(this._room.uri,e,t)}},{key:"close",value:function(){this.userAgent&&(this.userAgent.removeAllListeners("message"),this.userAgent.removeAllListeners("registrationFailed"),this.userAgent.unregister(),this.userAgent=null)}},{key:"onMessage",value:function(e){var t=this;this.userAgent&&this.userAgent.on("message",(function(n){v.debug("SipConnection::onMessage",n);var r=JSON.parse(n.body);if(en.includes(r.type)){var i=t.transformer.process(r);e(i)}else v.debug('SipConnection::onMessage ignoring "'.concat(r.type,'" message.'))}))}},{key:"send",value:function(e){e.cid=this.user.uri,this.userAgent&&this.userAgent.message(this._room.uri,JSON.stringify(e))}},{key:"onError",value:function(e){return this.listeners.push(e),this}},{key:"emit",value:function(e){this.listeners.forEach((function(t){return t(e)}))}}]),e}();function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var cn=function(e){T()(n,e);var t=an(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){if(x()(w()(n.prototype),"handle",this).call(this,e),this.context.rtData=e.content,!0===e.content.ready){var t=e.content,r=t.user,i=t.room,o=t.links;this.context._eyeson.room=i,this.context._eyeson.user=this.context._api.addUserAttributes(r,r.id),this.context._eyeson.links=o,this.context._connection?v.debug("RoomReceived double room_ready"):function(e,t,n){e.connection=new sn(t.sip,n.sip),e._connection.onError((function(t){return e.send(t)})).start().then((function(){return e.send({type:"connection",connectionStatus:"ready"})})).catch((function(){return e.send({type:"connection",connectionStatus:"transport_error"})}))}(this.context,r,i)}else v.debug("RoomReceived not ready:",e.content)}}]),n}(P);function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var ln=function(e){T()(n,e);var t=un(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){var e=this;this.context._api.getRoom((function(t){return x()(w()(n.prototype),"handle",e).call(e,{type:"fetch_room",room:t})}))}}]),n}(P);function dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var hn=function(e){T()(n,e);var t=dn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.deleteFile(e.file)}}]),n}(R);function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var pn=function(e){T()(n,e);var t=fn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.uploadFile(e.file,this.addFile.bind(this))}},{key:"addFile",value:function(e){x()(w()(n.prototype),"handle",this).call(this,{type:"add_file",file:e})}}]),n}(P);function mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var gn=function(e){T()(n,e);var t=mn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.cid.split("@").shift();this.msg=e,this.context._api.getUser(t,this.forwardMessage.bind(this))}},{key:"forwardMessage",value:function(e){var t=Date.parse(this.msg.ts||this.msg.created_at);x()(w()(n.prototype),"handle",this).call(this,{type:this.msg.type,user:e,timestamp:new Date(t),content:this.msg.content})}}]),n}(P);function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var yn=function(e){T()(n,e);var t=vn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=this;this.context._api.stopBroadcast("youtube").then((function(){return x()(w()(n.prototype),"handle",t).call(t,{type:e.type})})).catch((function(e){return v.warn(e)}))}}]),n}(P);function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Sn=function(e){T()(n,e);var t=bn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.audio,n=void 0===t||t,r=e.video,i=void 0===r||r;v.debug("StartStreamEvent::handle audio: ".concat(n," video: ").concat(i));var o=this.context._session;new Ht({audio:n,video:i}).start().then(o.setStream).catch(v.error)}}]),n}(R);function Tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var _n=function(e){T()(n,e);var t=Tn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.audio,n=void 0===t||t,r=e.video,i=void 0===r||r;v.debug("ChangeStreamEvent::handle audio: ".concat(n," video: ").concat(i));var o=this.context._session;return new Promise((function(e,t){if(tt.stopsDeviceActivityIndicatorOnDisable()&&(!i||!St(o.localStream.getVideoTracks()[0])))return kt(o.localStream,i),mt(o.localStream,n),void e(o.localStream);new Ht({audio:n,video:i,existingStream:o.localStream}).onBrokenTrackError((function(){o.emit({type:"broken_track_error"})})).start().then(e).catch(t)})).then(o.setStream).then((function(e){Dt(e)?o.canvasMixer.setStream(e):o.send({type:"mute_video",on:!i})})).catch((function(e){v.error(e),e instanceof Error&&["NotReadableError","DevicesNotFoundError","NotFoundError"].includes(e.name)&&o.emit({type:"warning",name:"error_"+e.name})}))}}]),n}(R);function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Cn=function(e){T()(n,e);var t=En(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.facingMode;v.debug("ToggleCameraEvent::handle",t);var n=this.context._session;new Ht({audio:n.localStream.getAudioTracks()[0].enabled,video:{facingMode:t},existingStream:n.localStream}).start().then(n.setStream).catch(v.error)}}]),n}(R);function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Rn=function(e){T()(n,e);var t=wn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=this.context,n=t._api,r=t._session;n.startBroadcast(e,"youtube").catch((function(e){return r.emit({type:"start_broadcast_error",platform:"youtube",error:e})}))}}]),n}(R);function kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var An=function(e){T()(n,e);var t=kn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=this;this.context._api.stopBroadcast("facebook").then((function(){return x()(w()(n.prototype),"handle",t).call(t,{type:e.type})})).catch((function(e){return v.warn(e)}))}}]),n}(P);function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var In=function(e){T()(n,e);var t=On(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.type,r=e.session.sessionDescriptionHandler,i=r.getLocalStream();x()(w()(n.prototype),"handle",this).call(this,{type:t,localStream:i,remoteStream:r.getRemoteStream()}),this.context._connection.send({type:"mute_video",on:!ht(i)})}}]),n}(P);function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Dn=function(e){T()(n,e);var t=xn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=this.context,n=t._api,r=t._session;n.startBroadcast(e,"facebook").catch((function(e){return r.emit({type:"start_broadcast_error",platform:"facebook",error:e})}))}}]),n}(R);function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Nn=function(e){T()(n,e);var t=Pn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.stopRecording(e)}}]),n}(P),Ln=n(12),Mn=n.n(Ln);function Un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var jn=function(e){T()(n,e);var t=Un(n);function n(e){var r;return p()(this,n),(r=t.call(this,e)).getUser=r.getUser.bind(Mn()(r)),r}return g()(n,[{key:"getUser",value:function(e){var t=this;return new Promise((function(n,r){try{t.context._api.getUser(e,n)}catch(e){r(e)}}))}},{key:"handle",value:function(e){var t=this;this.getUser(e.userId).then((function(n){t.context.send({type:"voice_activity",user:n,on:e.on})}))}}]),n}(R);function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Fn=function(e){T()(n,e);var t=Hn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=this.context,n=t._api,r=t._session;n.startRecording(e).catch((function(e){return r.emit({type:"recording_error",error:e})}))}}]),n}(P);function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var qn=function(e){T()(n,e);var t=$n(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.audio,n=e.screen,r=void 0!==n&&n,i=e.screenStream,o=this.context._session;new Ht({audio:t,video:!1,screen:r,screenStream:i,existingStream:o.localStream}).start().then((function(e){var t=_t(e),n=at()(t,1)[0];return n&&n.addEventListener("ended",(function(){o.emit({type:"stop_presenting"}),gt(n)})),e})).then((function(e){o.emit({type:"start_presenting",stream:e})})).catch((function(e){v.error("ScreenCaptureEvent",e),!e.name.match(/notallowed|permission/i)&&r&&o.emit({type:"capture_error",name:"error_".concat(e.name)}),o.emit({type:"stop_presenting"})}))}}]),n}(R);function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Gn=function(e){T()(r,e);var t,n=Bn(r);function r(){return p()(this,r),n.apply(this,arguments)}return g()(r,[{key:"handle",value:(t=ot()(rt.a.mark((function e(t){var n,r;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stream,r=(void 0===n?null:n)||this.context._session.localStream,this.context._session.canvasMixer&&this.context._session.canvasMixer.stream&&(r=this.context._session.canvasMixer.stream),e.next=5,this.context._session.setStream(r);case 5:this.context._session.send({type:"set_presenter",on:!0}),this.context._session.send({type:"desktopstreaming",on:!0}),this.context._session.emit({type:"presentation_started"});case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),r}(R);function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var zn=function(e){T()(n,e);var t=Vn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){this.context._session.canvasMixer&&(this.context._session.canvasMixer.stop(),this.context._session.canvasMixer=null),this.context._session.send({type:"desktopstreaming",on:!1}),this.context._session.send({type:"set_presenter",on:!1}),this.context._session.emit({type:"presentation_ended"})}}]),n}(R);function Wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Kn=function(e){T()(n,e);var t=Wn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=this;this.context._api.stopAllBroadcasts().then((function(){return x()(w()(n.prototype),"handle",t).call(t,{type:e.type})}))}}]),n}(P);function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Jn=function(e){T()(n,e);var t=Yn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){this.context._api.clearFrontLayer()}}]),n}(R);function Xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Qn=function(e){T()(n,e);var t=Xn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.publishBroadcast(e,"facebook")}}]),n}(P);function Zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var er=function(e){T()(n,e);var t=Zn(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=this;return new y(e.api,e.token).requestUser({name:e.name,email:e.email,locale:e.locale},(function(e){if(!e.access_key){var r=e.locked;return e.error&&"ComApiError: 423"===e.error.message&&(r=!0),void x()(w()(n.prototype),"handle",t).call(t,{type:"error",content:"Request guest user failed",locked:r})}x()(w()(n.prototype),"handle",t).call(t,{type:"guest_user",token:e.access_key})}))}}]),n}(P);function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var nr=function(e){T()(n,e);var t=tr(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){if(this.context._session&&this.context._connection){var t=this.context,n=t._connection,r=t._session,i=r.peerConnection;new Promise((function(t,n){i.setRemoteDescription(new RTCSessionDescription(e.sdp)).then((function(e){return i.createAnswer(e)})).then((function(e){return i.setLocalDescription(e)})).then((function(){return t(i.localDescription)})).catch(n)})).then((function(e){return n.send({type:"stream_answer",sdp:e})})).then((function(){return r.remoteDescriptionUpdate(e.sdp)})).catch(v.error)}else v.warn("HandleStreamOfferEvent::no session or connection.")}}]),n}(P);function rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var ir=function(e){T()(n,e);var t=rr(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=this;v.debug("HandleStreamAnswerEvent: ",e);var n=this.context._session.peerConnection;"stable"!==n.signalingState&&n.setRemoteDescription(new RTCSessionDescription(e.sdp)).then(v.debug("HandleStreamAnswerEvent: set remote description")).then((function(){t.context._session.remoteDescriptionUpdate(e.sdp)})).catch((function(t){return v.warn("HandleStreamAnswerEvent: ",t,e.sdp)}))}}]),n}(R);function or(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var sr=function(e){T()(n,e);var t=or(n);function n(e){var r;return p()(this,n),(r=t.call(this,e)).getUser=r.getUser.bind(Mn()(r)),r}return g()(n,[{key:"getUser",value:function(e){var t=this;return new Promise((function(n,r){try{t.context._api.getUser(e,n)}catch(e){r(e)}}))}},{key:"handle",value:function(e){var t=this;(e.add||[]).forEach((function(e,n,r){var i=e.cid.split("@").shift(),o=Boolean(r.find((function(e){return e.cid===t.context._connection.user.uri})));t.getUser(i).then((function(e){t.context.send({type:"add_user",user:e,initial:o})})).catch((function(e){return v.error(e)}))})),(e.del||[]).forEach((function(e){var n=e.split("@").shift();t.getUser(n).then((function(e){t.context.send({type:"remove_user",userId:n,user:e})})).catch((function(e){return v.error(e)}))})),this.context.send({type:"playback_update",playing:e.media||[]})}}]),n}(R),ar=function(e){return Number(parseFloat(e).toFixed(2))},cr=function(e,t,n){var r=Math.min(n.width/e,n.height/t);return{width:ar(e*r),height:ar(t*r)}},ur=function(e,t,n){var r;return function(){var i=this,o=arguments,s=function(){r=null,n||e.apply(i,o)},a=n&&!r;clearTimeout(r),r=setTimeout(s,t),a&&e.apply(i,o)}},lr={width:220,height:140},dr={width:320,height:240},hr={width:420,height:340},fr={width:0,height:0},pr={getSettings:function(){return{width:0,height:0}},addEventListener:function(){return null}},mr=tt.isIOSDevice(),gr=function(e,t){var n=t.getVideoTracks(),r=at()(n,1)[0],i=void 0===r?pr:r,o=i.getSettings(),s=o.width,a=o.height;return e.playsInline=!0,e.controls=!0,e.setAttribute("width",s),e.setAttribute("height",a),e.srcObject=t,i.addEventListener("stopped",(function(){return e.srcObject=null})),e.play().catch((function(e){return v.warn("bindVideoToStream: play",e,e.message)})),e},vr=function(){function e(t,n){p()(this,e),this.canvas=t,this.stream=n,this.context=this.canvas.getContext("2d",{alpha:!1}),this.xPos=0,this.camSize=dr,this.draw=this.draw.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.onError=this.onError.bind(this),this.onRedraw=this.onRedraw.bind(this),this.setStream=this.setStream.bind(this),this.setCamera=this.setCamera.bind(this),this.drawFrame=this.drawFrame.bind(this),this.calcSizesAndPositions=this.calcSizesAndPositions.bind(this),this.bouncedDraw=ur(this.draw,1e3/15)}return g()(e,[{key:"onError",value:function(e){this.errorCallback=e}},{key:"onRedraw",value:function(e){this.redrawCallback=e}},{key:"start",value:function(){if(mr)return(e=this).camera=fr,e.screenStream={getVideoTracks:function(){return[]}},this.setCamera({horizontal:"right",vertical:"bottom"},"none"),void this.draw();var e;this.camera=document.createElement("video"),this.screen=document.createElement("video"),this.setCamera({horizontal:"right",vertical:"bottom"},"medium"),this.setStream(this.stream),this.draw()}},{key:"stop",value:function(){this.stream&&(vt(this.stream),this.stream=null,this.screenStream=null,this.cameraStream=null)}},{key:"setStream",value:function(e){this.stream=e,this.cameraStream=new MediaStream(Et(this.stream)),this.screenStream=new MediaStream(_t(this.stream)),gr(this.camera,this.cameraStream),gr(this.screen,this.screenStream),this.calcSizesAndPositions(),this.redrawQueued=!0}},{key:"setCamera",value:function(e,t){this.cameraPosition=e||this.cameraPosition,this.cameraSizeInWords=t||this.cameraSizeInWords,this.redrawQueued=!0}},{key:"calcSizesAndPositions",value:function(){var e=this.screenStream.getVideoTracks(),t=at()(e,1)[0],n=(void 0===t?pr:t).getSettings(),r=n.width,i=n.height,o=function(e,t){var n=t.width/t.height,r=e.width/e.height,i=e.width,o=e.height,s=0,a=0;return n<r&&(i=t.width*(o/t.height),s=(e.width-i)/2),n>r&&(o=t.height*(i/t.width),a=(e.height-o)/2),{x:s,y:a,width:i,height:o}}(this.canvas,{width:r,height:i});this.camSize={small:lr,medium:dr,large:hr,none:fr}[this.cameraSizeInWords];var s=cr(this.camera.width,this.camera.height,this.camSize);this.sizes={screen:{width:o.width,height:o.height},camera:{width:s.width,height:s.height}};var a={x:"right"===this.cameraPosition.horizontal?this.canvas.width-this.sizes.camera.width:0,y:"bottom"===this.cameraPosition.vertical?this.canvas.height-this.sizes.camera.height:0};this.positions={screen:{x:o.x,y:o.y},camera:{x:a.x,y:a.y}}}},{key:"draw",value:function(){try{if(!this.stream||!this.stream.active)return;this.calcSizesAndPositions(),this.redrawCallback&&this.redrawQueued&&(this.redrawCallback(),this.redrawQueued=!1);var e=performance.now();this.drawFrame(this.screen,this.positions.screen,this.sizes.screen),this.drawFrame(this.camera,this.positions.camera,this.sizes.camera);var t=performance.now();t-e>=1e3/15&&v.warn("Mixer::drawFrame took ".concat(t-e,"ms."));try{var n=At(this.stream);at()(n,1)[0].requestFrame()}catch(e){v.warn("CanvasMixer draw requestFrame error - ".concat(e.message))}this.bouncedDraw()}catch(e){v.error(e),this.errorCallback(e)}}},{key:"drawFrame",value:function(e,t,n){if(e&&e.srcObject&&e.srcObject.active)Ot(e.srcObject)&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(e,t.x,t.y,n.width,n.height);else{var r=this.context.createImageData(1,1);this.context.putImageData(r,0,0)}}}]),e}();function yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var br=function(e){T()(n,e);var t=yr(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.audio,n=e.video,r=e.canvas,i=e.screen,o=void 0!==i&&i,s=e.onRedraw,a=e.changeStream,c=void 0!==a&&a,u=this.context._session,l=function(e){v.error("StartMixerEvent",e),!e.name.match(/notallowed|permission/i)&&o&&u.emit({type:"capture_error",name:"error_".concat(e.name)}),u.emit({type:"stop_presenting"})};new Ht({audio:t,video:n,screen:o,canvas:r,existingStream:u.localStream}).start().then((function(e){var t=_t(e),n=at()(t,1)[0];return n&&n.addEventListener("ended",(function(){u.emit({type:"stop_presenting"}),gt(n)})),u.canvasMixer=new vr(r,e),u.canvasMixer.onError(l),u.canvasMixer.onRedraw(s),u.canvasMixer.start(),e})).then((function(e){c?u.emit({type:"start_presenting",stream:e}):u.emit({type:"stream_update",presentationStream:e})})).catch(l)}}]),n}(R),Sr=function(e){T()(n,e);var t=yr(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){var t=e.position,n=e.size,r=this.context._session;try{r.canvasMixer.setCamera(t,n)}catch(e){v.error(e)}}}]),n}(R);function Tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var _r=function(e){T()(n,e);var t=Tr(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){this.context._api.lockMeeting()}}]),n}(R);function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Cr=function(e){T()(n,e);var t=Er(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(){this.context._api.terminateMeeting()}}]),n}(R);function wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w()(e);if(t){var i=w()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E()(this,n)}}var Rr=function(e){T()(n,e);var t=wr(n);function n(){return p()(this,n),t.apply(this,arguments)}return g()(n,[{key:"handle",value:function(e){this.context._api.kickUser(e.userId)}}]),n}(R),kr=function(){function e(){p()(this,e),this.listeners=[],this._eyeson=null,this._session=null,this._monitor=null,this._connection=null,this._rtConnection=null,this.send=this.send.bind(this)}return g()(e,[{key:"destroy",value:function(){this._monitor&&this._monitor.destroy(),this._connection&&this._connection.close(),this._rtConnection&&this._rtConnection.close(),this._session&&this._session.end(),this._api=null,this._session=null,this._monitor=null,this._connection=null,this._rtConnection=null}},{key:"onReceive",value:function(e){v.debug("EventHandler::onReceive"),this.listeners.push(e)}},{key:"removeListener",value:function(e){this.listeners=this.listeners.filter((function(t){return t!==e}))}},{key:"send",value:function(e){e.silenced||v.debug("EventHandler::send",e),new({stfu:q,chat:gn,accept:In,podium:Bt,snapshot:Vt,send_chat:Yt,set_layer:Wt,set_layout:Xt,fetch_room:ln,room_ready:cn,room_setup:cn,memberlist:sr,upload_file:pn,delete_file:hn,request_stfu:j,stream_offer:nr,stop_youtube:yn,stream_answer:ir,start_youtube:Rn,change_stream:_n,toggle_camera:Cn,stop_facebook:An,stop_playback:O,playback_update:q,start_playback:A,start_stream:Sn,start_facebook:Dn,stop_recording:Nn,start_screen_capture:qn,stop_broadcasts:Kn,start_recording:Fn,stop_presenting:zn,start_presenting:Gn,stop_annotation:M,start_annotation:L,publish_broadcast:Qn,clear_front_layer:Jn,request_guest_user:er,voice_activity_raw:jn,start_mixer:br,update_mixer:Sr,lock_meeting:_r,terminate_meeting:Cr,kick_user:Rr,capture_error:q,voice_activity:q,options_update:q,ext_not_installed:q,broadcasts_update:q,facebook_logged_in:q,facebook_published:q,presentation_ended:q,handle_youtube_error:q,handle_facebook_error:q,status_update_youtube:q,recording:F,ext_cancel:F,ext_installed:F,message_status:F,moderator_info:F}[e.type]||P)(this).handle(e)}},{key:"connection",set:function(e){this._connection?v.error("A connection is already set. If you are trying to start a new session you have to end the current one first."):(this._connection=e,this._connection.onMessage(this.send))}},{key:"rtConnection",set:function(e){this._rtConnection?v.error("A real-time connection is already set. If you are trying to start a new session you have the close the current before."):(this._rtConnection=e,this._rtConnection.onMessage(this.send))}},{key:"monitor",set:function(e){this._monitor?v.error("A monitor is already set. If you are trying to start a new session you have to end the current one first."):(this._monitor=e,this._monitor.onError(this.send))},get:function(){return this._monitor}},{key:"session",set:function(e){this._session?v.error("A session is already set. If you are trying to start a new session you have to end the current one first."):(this._session=e,this._session.onEvent(this.send))}},{key:"api",set:function(e){this._api=e}},{key:"rtData",set:function(e){this._rtData=e}},{key:"eyeson",set:function(e){this._eyeson=e}}]),e}(),Ar=[function(e){return e.replace("o=-","o=Visoweb")}];tt.canSFU()&&Ar.push((function(e){if(!tt.canSFU())return e;var t=e.split("\n"),n=t.findIndex((function(e){return e.startsWith("t=")}));return t.splice(n+1,0,"a=sfu-capable"),tt.disallowAudioSyncSrcChange()&&t.splice(n+2,0,"a=disallow-audio-ssrc-change"),t.join("\n")}));var Or=Ar,Ir=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p()(this,e),this.options=n,this.options.RTCConstraints=Object.assign({},this.defaultRTCConstraints,{offerToReceiveVideo:!this.options.eco}),this.accepted=!1,this.listeners=[],this.connection=t,this.startAttempts=0,this.maxStartAttempts=3,this.end=this.end.bind(this),this.emit=this.emit.bind(this),this.setStream=this.setStream.bind(this),this.endSession=this.endSession.bind(this),this.handleExit=this.handleExit.bind(this),this.initSession=this.initSession.bind(this),this.handleFailed=this.handleFailed.bind(this),this.handleAccept=this.handleAccept.bind(this),this.handleUnmute=this.handleUnmute.bind(this),this.restartSession=this.restartSession.bind(this),this.tryRecoveryFrom=this.tryRecoveryFrom.bind(this),this.terminateSession=this.terminateSession.bind(this),this.adjustVideoPodium=this.adjustVideoPodium.bind(this),this.remoteDescriptionUpdate=this.remoteDescriptionUpdate.bind(this)}var t;return g()(e,[{key:"start",value:function(){new Ht(this.options).start().then(this.initSession).catch(this.handleFailed)}},{key:"buildSessionOptions",value:function(e){return{sessionDescriptionHandlerOptions:{stream:e,connection:this.connection,handleAccept:this.handleAccept,handleUnmute:this.handleUnmute,RTCConstraints:this.options.RTCConstraints,remoteDescriptionUpdate:this.remoteDescriptionUpdate}}}},{key:"initSession",value:function(e){var t=this.buildSessionOptions(e);this.sipSession=this.connection.startSession(t,Or),this.sipSession.on("bye",this.handleExit),this.sipSession.on("failed",this.handleFailed),this.sipSession.on("accepted",this.adjustVideoPodium),this.sipSession.on("terminated",this.handleTermination),window&&window.addEventListener(tt.isIOSDevice()?"pagehide":"beforeunload",this.endSession)}},{key:"end",value:function(){this.listeners=[],this.endSession()}},{key:"endSession",value:function(){v.debug("ConferenceSession::endSession"),this.sipSession&&(this.sipSession.removeAllListeners("accepted"),this.sipSession.removeAllListeners("bye"),this.sipSession.removeAllListeners("connecting"),this.sipSession.removeAllListeners("terminated"),this.sipSession.sessionDescriptionHandler&&this.sipSession.sessionDescriptionHandler.close(),this.connection.close(),this.terminateSession())}},{key:"terminateSession",value:function(){v.debug("ConferenceSession::terminateSession");try{this.sipSession.terminate()}catch(e){v.error(e)}}},{key:"setStream",value:(t=ot()(rt.a.mark((function e(t){var n;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sipSession){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,this.sipSession.sessionDescriptionHandler.setStream(t);case 5:return n=e.sent,this.emit({type:"stream_update",localStream:n.newStream,stream:n.remoteStream}),e.abrupt("return",n.newStream);case 10:return e.prev=10,e.t0=e.catch(2),v.error("ConferenceSession::setStream",e.t0),this.emit({type:"stream_update",localStream:this.localStream,stream:this.remoteStream}),e.abrupt("return",this.localStream);case 15:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(e){return t.apply(this,arguments)})},{key:"setMonitor",value:function(e){this.monitor=e}},{key:"handleTermination",value:function(e,t){v.debug(e,t)}},{key:"handleAccept",value:function(e){this.monitor&&this.monitor.observe(this.sipSession),this.accepted||(this.emit({type:"accept",session:this.sipSession}),this.accepted=!0),this.emit({type:"stream_update",stream:e})}},{key:"handleUnmute",value:function(e){this.emit({type:"track_unmuted",track:e})}},{key:"remoteDescriptionUpdate",value:function(e){v.debug("ConferenceSession::remoteDescriptionUpdate",e.sdp);var t=!1,n=e.sdp.split("\n").find((function(e){return e.startsWith("a=sfu-mode")}));n&&(t=n.includes("on")),this.emit({type:"remote_description_update",update:{sfu:t}})}},{key:"adjustVideoPodium",value:function(){this.send({type:"mute_video",on:!this.options.video})}},{key:"handleExit",value:function(){this.emit({type:"exit",reason:"bye"})}},{key:"handleFailed",value:function(e){v.warn("ConferenceSession::handleFailed: ",e);var t="default_key";if(e&&(t=e&&(e.name||e.reason_phrase||e.reasonPhrase)),!this.tryRecoveryFrom(t)){var n={"Busy Here":"session_in_use",Forbidden:"session_in_use",NotFoundError:"devices",NotAllowedError:"permission",DevicesNotFoundError:"devices",PermissionDeniedError:"permission",NotReadableError:"not_readable","Request Entity Too Large":"request_too_large",1006:"abrupt_disconnect",Unwanted:"meeting_locked"}[t]||"session_failed";this.emit({type:"error",name:n})}}},{key:"tryRecoveryFrom",value:function(e){var t=this;v.debug("ConferenceSession::tryRecoveryFrom: ",e);var n={"Not Found":{condition:function(){return t.startAttempts<t.maxStartAttempts},action:function(){return t.restartSession()}}}[e];return Boolean(n&&n.condition()&&n.action())}},{key:"restartSession",value:function(){var e=this;return v.debug("ConferenceSession::restartSession: ",this.startAttempts),this.startAttempts+=1,setTimeout((function(){e.endSession(),e.start()}),1e3),!0}},{key:"onEvent",value:function(e){this.listeners.push(e)}},{key:"emit",value:function(e){this.listeners.forEach((function(t){return t(e)}))}},{key:"send",value:function(e){return this.connection.send(e)}},{key:"peerConnection",get:function(){return this.sipSession&&this.sipSession.sessionDescriptionHandler?this.sipSession.sessionDescriptionHandler.peerConnection:null}},{key:"localStream",get:function(){return this.sipSession&&this.sipSession.sessionDescriptionHandler?this.sipSession.sessionDescriptionHandler.localStream:null}},{key:"remoteStream",get:function(){return this.sipSession&&this.sipSession.sessionDescriptionHandler?this.sipSession.sessionDescriptionHandler.remoteStream:null}},{key:"defaultRTCConstraints",get:function(){return{offerToReceiveAudio:!0,offerToReceiveVideo:!0}}}]),e}(),xr=function(){function e(){p()(this,e),this.listeners=[],this.prevIceState="initial",this.pc=null,this.onOffline=this.onOffline.bind(this),this.handleIceStateChange=this.handleIceStateChange.bind(this),this.handleConnectionStateChange=this.handleConnectionStateChange.bind(this),this.addEventListeners()}return g()(e,[{key:"addEventListeners",value:function(){window.addEventListener("offline",this.onOffline)}},{key:"onOffline",value:function(){this.emit({type:"offline"})}},{key:"observe",value:function(e){this.sipSession=e,this.pc=this.sipSession.sessionDescriptionHandler.peerConnection,this.pc.oniceconnectionstatechange=this.handleIceStateChange,this.pc.onconnectionstatechange=this.handleConnectionStateChange}},{key:"destroy",value:function(){this.sipSession&&(this.sipSession.removeAllListeners("connecting"),this.pc.onconnectionstatechange=null,this.pc.oniceconnectionstatechange=null,window.removeEventListener("offline",this.onOffline))}},{key:"onError",value:function(e){this.listeners.push(e)}},{key:"emit",value:function(e){this.listeners.forEach((function(t){return t(e)}))}},{key:"handleConnectionStateChange",value:function(e){e.currentTarget&&v.warn("connectionStateChange: ",e.currentTarget.connectionState)}},{key:"handleIceStateChange",value:function(e){var t=this;if(e.currentTarget){var n=e.currentTarget.iceConnectionState;"disconnected"===n&&(this.emit({type:"warning",name:"ice_disconnected"}),window.setTimeout((function(){"connected"!==t.pc.iceConnectionState&&t.emit({type:"error",name:"ice_failed"})}),1e4)),"failed"===n&&this.emit({type:"error",name:"ice_failed"}),"disconnected"===this.prevIceState&&["completed","connected"].includes(n)&&this.emit({type:"clear_warning",name:"ice_disconnected"}),this.prevIceState=n}}}]),e}(),Dr=n(19),Pr=n.n(Dr),Nr=function(){function e(t){p()(this,e),this.onMessageHandler=function(e){v.debug("ActionCableConnection::defaultMessageHandler: ",e)},this.onReceived=this.onReceived.bind(this),this.offMessage=this.offMessage.bind(this),this.onConnected=this.onConnected.bind(this),this.startSession=this.startSession.bind(this),this.onDisconnected=this.onDisconnected.bind(this),this.cable=Pr.a.createConsumer(t)}return g()(e,[{key:"startSession",value:function(){this.cable.subscriptions.create({channel:"RoomChannel"},{connected:this.onConnected,received:this.onReceived,disconnected:this.onDisconnected}),this.cable.subscriptions.create({channel:"UserChannel"},{received:this.onReceived})}},{key:"onConnected",value:function(){this.disconnectTimestamp&&this.handleReconnect(),v.debug("ActionCableConnection::onConnected")}},{key:"handleReconnect",value:function(){this.onMessageHandler({type:"reconnect"})}},{key:"onReceived",value:function(e){v.debug("ActionCableConnection::onReceived",e),e._src="actioncable",this.onMessageHandler(e)}},{key:"onDisconnected",value:function(){v.debug("ActionCableConnection::onDisconnected"),this.disconnectTimestamp=Date.now(),this.onMessageHandler({type:"disconnect"})}},{key:"onMessage",value:function(e){"function"==typeof e&&(this.onMessageHandler=e)}},{key:"offMessage",value:function(){this.onMessageHandler=function(e){v.debug("ActionCableConnection::defaultMessageHandler: ",e)}}},{key:"send",value:function(e){var t=e.channel,n=void 0===t?"RoomChannel":t,r=e.message,i=void 0===r?"ping":r,o=this.cable.subscriptions.subscriptions.find((function(e){return e.identifier==='{"channel":"'.concat(n,'"}')}));o?o.perform(i,{message:i}):v.warn("ActionCableConnection::send no subscription found! ",n)}},{key:"close",value:function(){this.offMessage(),this.onDisconnected()}}]),e}(),Lr={eventHandler:new kr},Mr=function(e){return Lr.eventHandler.send({type:"connection",connectionStatus:e})},Ur=function(e){if(Lr.eventHandler._connection){var t,n=new Ir(Lr.eventHandler._connection,e);n.setMonitor(Lr.eventHandler.monitor),Lr.eventHandler.session=n,n.start(),(t=Lr.eventHandler._rtData).broadcasts&&Lr.eventHandler.send({type:"broadcasts_update",broadcasts:t.broadcasts}),clearInterval(Lr.keepRoomAlive),this.session=n}else v.error("You tried to join a session that is not yet available. Before calling join, a connection status of connected has to be received.")},jr=function(e){Mr("fetch_room"),Lr.eventHandler.eyeson=e,Lr.comApi.onError=function(){return Lr.eventHandler.send({type:"warning",name:"error:comapi"})},Lr.comApi.getRoom((function(e){if(e.error)return v.warn("eyeson::prepareConnection",e.error),void Mr("access_denied");var t;Mr("received_room"),Lr.rtConnection=new Nr(e.links.websocket),Lr.eventHandler.rtConnection=Lr.rtConnection,Lr.rtConnection.startSession(),Lr.eventHandler.monitor=new xr,Lr.eventHandler.api=Lr.comApi,Lr.keepRoomAlive=setInterval((function(){Lr.rtConnection.send({message:"user_joins"})}),3e4),t=1,Lr.pollingFallbackInterval=setInterval((function(){return 200===t?(v.debug("eyeson::pollingFallback: max count exceeded, clearing interval."),void clearInterval(Lr.pollingFallbackInterval)):Lr.eventHandler._connection?(v.debug("eyeson::pollingFallback: connection set, clearing interval."),void clearInterval(Lr.pollingFallbackInterval)):void Lr.comApi.getRoom((function(e){if(!0===e.ready)return v.debug("eyeson::pollingFallback: room ready"),void Lr.eventHandler.send({type:"room_ready",content:e});v.debug("eyeson::pollingFallback: room not ready",t),t+=1}))}),5e3)}))},Hr={config:h,core:Lr,room:{},user:{},links:{},onEvent:function(e){"function"==typeof e?Lr.eventHandler.onReceive(e):v.error("A listener to eyeson events has to be of type function. The argument passed to onEvent is of type "+d()(e)+".")},offEvent:function(e){return Lr.eventHandler.removeListener(e)},connect:function(e){v.debug("eyeson::connect",e),Lr.comApi=new y(this.config.api,e),jr(this)},join:function(e){v.debug("eyeson::join",e),Ur.bind(this,e)()},start:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{audio:!0,video:!0};v.debug("eyeson::start");var r=function e(r){"ready"===r.connectionStatus&&(t.offEvent(e),t.join(n))};this.onEvent(r),this.connect(e)},destroy:function(){v.debug("eyeson::destroy"),clearInterval(Lr.keepRoomAlive),Lr.eventHandler.destroy(),Lr.eventHandler=new kr},send:function(e){return e._src="client",Lr.eventHandler.send(e)},throttledSend:function(e){var t=this;return this._throttledSend||(this._throttledSend=b((function(e){return t.send(e)}),500)),this._throttledSend(e)}},Fr=n(13),$r=n.n(Fr),qr=function(){function e(t){p()(this,e),this.roomUrl=t}return g()(e,[{key:"search",value:function(e){return this.request("".concat(this.roomUrl,"/search?q=").concat(e)).then((function(e){return e.data}))}},{key:"random",value:function(){return this.request("".concat(this.roomUrl,"/random")).then((function(e){return e.data}))}},{key:"trending",value:function(){var e=this;return this.request("".concat(this.roomUrl,"/trending?limit=9")).then((function(t){var n=t.data;return e.staff().then((function(e){return[].concat($r()(n),$r()(e))}))}))}},{key:"staff",value:function(){return this.request("".concat(this.roomUrl,"/staff")).then((function(e){return e.data}))}},{key:"randomForQuery",value:function(e){var t=this;return new Promise((function(n,r){t.search(e).then((function(e){return Array.isArray(e)?e.filter((function(e){return e.images.original_mp4.mp4_size>=4e4})):[]})).then((function(e){if(0===e.length)throw new TypeError("No data found");n(e[Math.floor(Math.random()*e.length)])})).catch(r)}))}},{key:"request",value:function(e){return fetch(new Request(e)).then((function(e){return e.json()})).catch((function(t){return v.warn("GiphyApi",e,t),{data:[]}}))}}]),e}(),Br="https://www.googleapis.com/youtube/v3",Gr=function(){function e(t){p()(this,e),this.eyeson=t,this.apiKey=t.config.youtube.key,this.clientId=t.config.youtube.client,this.activated=null,this.apiKey&&this.clientId&&(this.broadcastId=null,this.activate=this.activate.bind(this),this.getStream=this.getStream.bind(this),this.deactivate=this.deactivate.bind(this),this.startStream=this.startStream.bind(this),this.handleError=this.handleError.bind(this),this.insertStream=this.insertStream.bind(this),this.clearInterval=this.clearInterval.bind(this),this.insertBroadcast=this.insertBroadcast.bind(this),this.createLiveStream=this.createLiveStream.bind(this),this.cleanupBroadcast=this.cleanupBroadcast.bind(this),this.initGoogleApi())}return g()(e,[{key:"initGoogleApi",value:function(){if(document&&"undefined"==typeof gapi){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.onload=this.handleClientLoad.bind(this),e.src="//apis.google.com/js/api.js",document.body.appendChild(e)}}},{key:"handleClientLoad",value:function(){gapi.load("client:auth2",this.initClient.bind(this))}},{key:"initClient",value:function(){gapi.client.init({apiKey:this.apiKey,clientId:this.clientId,scope:"https://www.googleapis.com/auth/youtube.force-ssl"}),this.activated&&this.activate()}},{key:"activate",value:function(){try{gapi.auth2.getAuthInstance().signIn({prompt:"select_account"}).then(this.createLiveStream,this.handleError)}catch(e){this.activated=!0,this.handleError()}}},{key:"deactivate",value:function(){v.warn("YouTubeApi::deactivate"),this.clearInterval(),this.cleanupBroadcast(),this.eyeson.send({type:"stop_youtube"})}},{key:"getDefaultTitle",value:function(){return"Live Stream ".concat((new Date).toDateString())}},{key:"insertBroadcast",value:function(){return gapi.client.request({path:Br+"/liveBroadcasts",method:"POST",params:{part:"snippet,status"},body:{snippet:{title:this.getDefaultTitle(),scheduledStartTime:(new Date).toISOString()},status:{privacyStatus:"public"}}})}},{key:"listBroadcast",value:function(e){return gapi.client.request({path:Br+"/liveBroadcasts",method:"GET",params:{id:e,part:"id,contentDetails,status"}})}},{key:"insertStream",value:function(){return gapi.client.request({path:Br+"/liveStreams",method:"POST",params:{part:"snippet,cdn"},body:{snippet:{title:this.getDefaultTitle()},cdn:{resolution:"variable",frameRate:"variable",ingestionType:"rtmp"}}})}},{key:"bindBroadcast",value:function(e,t){return gapi.client.request({path:Br+"/liveBroadcasts/bind",method:"POST",params:{id:e,streamId:t,part:"id,contentDetails"}})}},{key:"transitionBroadcast",value:function(e,t){return gapi.client.request({path:Br+"/liveBroadcasts/transition",method:"POST",params:{id:e,part:"id,contentDetails",broadcastStatus:t}})}},{key:"deleteBroadcast",value:function(e){return gapi.client.request({path:Br+"/liveBroadcasts",method:"DELETE",params:{id:e}})}},{key:"createLiveStream",value:function(){var e=this,t=null,n=null;this.insertBroadcast().then((function(n){return t=JSON.parse(n.body).id,e.broadcastId=t,e.insertStream()})).then((function(r){return n=JSON.parse(r.body).id,e.bindBroadcast(t,n)})).then((function(){return e.getStream(n)})).then((function(n){return e.startStream(t,JSON.parse(n.body))})).then((function(){return e.waitForStatus((function(){return e.getStream(n)}),"active")})).then((function(){return e.transitionBroadcast(t,"testing")})).then((function(){return e.waitForStatus((function(){return e.getBroadcast(t)}),"testing")})).then((function(){return e.transitionBroadcast(t,"live")})).then((function(){return e.eyeson.send({type:"status_update_youtube",status:"live"})})).catch(this.handleError)}},{key:"getStream",value:function(e){return gapi.client.request({path:Br+"/liveStreams",params:{part:"cdn,status",id:e}})}},{key:"getBroadcast",value:function(e){return gapi.client.request({path:Br+"/liveBroadcasts",params:{part:"id,status",id:e}})}},{key:"getViewersCount",value:function(e){return gapi.client.request({path:Br+"/videos",params:{id:e,part:"liveStreamingDetails"}}).then((function(e){var t=at()(e.result.items,1)[0];return t?t.liveStreamingDetails.concurrentViewers:null}))}},{key:"startStream",value:function(e,t){var n=at()(t.items,1)[0].cdn.ingestionInfo,r=n.ingestionAddress,i=n.streamName;this.eyeson.send({type:"start_youtube",playerUrl:"https://youtu.be/".concat(e),streamUrl:"".concat(r,"/").concat(i)})}},{key:"waitForStatus",value:function(e,t){var n=this,r=0;return new Promise((function(i,o){n.interval=window.setInterval((function(){if(v.debug("YouTubeApi::waitForStatus",t),r>150){n.clearInterval();var s=new Error("YouTube stream not ",t);s.error="timeout",o(s)}r+=1,e().then((function(e){var r=JSON.parse(e.body).items[0].status,o=r.streamStatus||r.lifeCycleStatus;n.eyeson.send({type:"status_update_youtube",status:o,health:r.healthStatus||{}}),o===t?(n.clearInterval(),i()):v.warn("YouTubeApi::waitForStatus: ",o)}))}),2e3)}))}},{key:"handleError",value:function(e){var t={reason:"account_setup"};try{this.clearInterval(),this.cleanupBroadcast(),t=e.error?{reason:e.error}:JSON.parse(e.body).error.errors[0]}catch(e){v.error("YouTubeApi::handleError",e)}this.eyeson.send({type:"handle_youtube_error",error:Object.assign({},{name:"youtube_".concat(t.reason)},t)})}},{key:"clearInterval",value:function(){window.clearInterval(this.interval)}},{key:"cleanupBroadcast",value:function(){var e=this;if(this.broadcastId){var t=["ready","created","testing","testStarting"];this.listBroadcast(this.broadcastId).then((function(n){var r=at()(n.result.items,1)[0].status.lifeCycleStatus;t.includes(r)?e.deleteBroadcast(e.broadcastId).then((function(){v.debug("YouTubeApi::deleted: ",e.broadcastId)})):e.transitionBroadcast(e.broadcastId,"complete").then((function(){v.debug("YouTubeApi::completed: ",e.broadcastId)})),e.broadcastId=null})).catch((function(e){v.error("YouTubeApi::cleanupBroadcast",e)}))}}}]),e}(),Vr=["FB is not defined","FB.login is not a function"],zr=function(){function e(t){p()(this,e),this.eyeson=t,this.apiKey=t.config.facebook.key,this.stream=null,this.permalLinkUrl="default-permalink-url",this.apiKey&&(this.sendStop=this.sendStop.bind(this),this.loggedIn=this.loggedIn.bind(this),this.fetchLink=this.fetchLink.bind(this),this.startStream=this.startStream.bind(this),this.handleError=this.handleError.bind(this),this.streamPublished=this.streamPublished.bind(this),this.initFacebookApi())}return g()(e,[{key:"initFacebookApi",value:function(){var e,t,n,r,i,o=this;document&&"undefined"==typeof FB&&(window.fbAsyncInit=function(){FB.init({appId:o.apiKey,xfbml:!0,version:"v8.0",autoLogAppEvents:!0}),FB.AppEvents.logPageView()},t="script",n="facebook-jssdk",i=(e=document).getElementsByTagName(t)[0],e.getElementById(n)||((r=e.createElement(t)).id=n,r.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(r,i)))}},{key:"activate",value:function(){FB.ui({display:"popup",method:"live_broadcast",phase:"create"},this.startStream)}},{key:"publish",value:function(){FB.ui({display:"popup",method:"live_broadcast",phase:"publish",broadcast_data:this.stream},this.streamPublished)}},{key:"login",value:function(){try{FB.login(this.loggedIn,{scope:"user_videos"})}catch(e){this.handleError(this.getError(e))}}},{key:"deactivate",value:function(){this.stream=null,this.sendStop()}},{key:"sendStop",value:function(){return this.stream?this.eyeson.send({type:"stop_facebook"}):null}},{key:"getError",value:function(e){var t={result:{error:{message:"user closed popup"}}};return e&&e.error_message?(t.result.error.message=e.error_message,t):(!e||e.message&&!Vr.includes(e.message)||(t.result.error={name:"facebook:not_loaded",message:"facebook api did not load"}),t)}},{key:"startStream",value:function(e){e&&!e.error_message?(this.stream=e,this.eyeson.send({type:"start_facebook",streamUrl:e.secure_stream_url})):this.handleError(this.getError(e))}},{key:"streamPublished",value:function(e){e&&!e.error_message?(this.fetchLink(),this.eyeson.send({type:"facebook_published"})):this.handleError(this.getError(e))}},{key:"loggedIn",value:function(e){e.authResponse||e.status?(this.permalLinkUrl="https://facebook.com/".concat(e.authResponse.userID),this.eyeson.send({type:"facebook_logged_in"})):this.handleError(this.getError(e))}},{key:"fetchLink",value:function(){var e=this;FB.api("/".concat(this.stream.id,"?fields=permalink_url"),(function(t){t.permalink_url&&!t.error_message||(t.permalink_url=e.permalLinkUrl);var n=t.permalink_url.includes("https://facebook.com")?t.permalink_url:"https://facebook.com".concat(t.permalink_url);e.eyeson.send({type:"publish_broadcast",playerUrl:n})}))}},{key:"handleError",value:function(e){e.result.error.name||(e.result.error.name="facebook:closed"),this.sendStop(),this.eyeson.send({type:"handle_facebook_error",error:e.result.error})}}]),e}(),Wr=function(){function e(){p()(this,e),this.level=0,this.instant=0,this.intervalCounter=0,this.silenceDuration=0,this.init(),this.offUpdate=this.offUpdate.bind(this)}return g()(e,[{key:"init",value:function(){var e=this,t=window.AudioContext||window.webkitAudioContext;void 0!==t?void 0!==window.AudioBuffer&&"function"==typeof AudioBuffer.prototype.getChannelData?(this.context=new t,this.context.onstatechange=function(){"suspended"===e.context.state&&v.error("SoundMeter::init AudioContext: ",e.context.state)},this.script=this.context.createScriptProcessor(2048,1,1),this.script.onaudioprocess=function(t){return e.onAudioProcess(t)}):v.error("AudioBuffer.getChannelData is not available."):v.error("AudioContext is not available. Probably the current user agent does not support this feature. Use the feature detector to hide not supported elements. Any call on onUpdate will not send values.")}},{key:"onAudioProcess",value:function(e){var t=e.inputBuffer;if("function"==typeof t.getChannelData){var n=t.getChannelData(0),r=n.reduce((function(e,t){return e+t*t}),0);this.instant=100*Math.sqrt(r/n.length)}}},{key:"connectToSource",value:function(e){return!this.context||e.getAudioTracks().length<1||(v.debug("SoundMeter::connectToSource",e),this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination)),this}},{key:"stop",value:function(){this.context&&(this.offUpdate(),this.mic&&this.mic.disconnect(),this.script.disconnect(),this.context.close&&"closed"!==this.context.state&&this.context.close())}},{key:"offUpdate",value:function(){window.clearInterval(this.audioMeterInterval),window.clearInterval(this.readInterval)}},{key:"onUpdate",value:function(t){this.context&&(this.audioMeterInterval&&clearInterval(this.audioMeterInterval),this.readInterval=setInterval(this.readAudioLevel.bind(this,t),e.updateInterval))}},{key:"readAudioLevel",value:function(e){var t=this.level;if(0===t&&0===this.instant&&this.intervalCounter>5&&(this.silenceDuration++,this.silenceDuration>25&&ur((function(){e({error:"EyesonMicrophoneError"})}),1e3)),this.level!==this.instant){this.silenceDuration=0;var n=Math.abs(t-this.instant);((t=this.instant)>.7||n>1)&&(this.level=this.instant,e({value:this.level}))}this.intervalCounter++}}]),e}();Wr.updateInterval=100;var Kr=Wr;t.default=Hr}])},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),i=n(1),o=n.n(i),s=n(18),a=n(4),c=n(6),u=n.n(c),l=n(28),d=function(e,t,n){return"auto"===(t=t||n||"auto")?function(e){return"string"===typeof e&&e.includes("/")?"url":o.a.isValidElement(e)?"component":"ligature"}(e):t},h={ligature:function(e){var t=e.content,n=Object(r.d)(e,["content"]);return o.a.createElement(f,Object(r.a)({},n),t)},className:function(e){e.content;var t=Object(r.d)(e,["content"]);return o.a.createElement(f,Object(r.a)({},t))},url:function(e){var t=e.content,n=Object(r.d)(e,["content"]);return o.a.createElement(f,Object(r.a)({},n,{style:Object(r.a)(Object(r.a)({},n.style),{backgroundImage:"url("+t+")"})}))},component:function(e){var t=e.content,n=Object(r.d)(e,["content"]);if("svg"===t.type){var i=t.props,s=i.children,a=Object(r.d)(i,["children"]);return o.a.createElement(f,Object(r.a)({},a,n,{tag:"svg"}),s)}return o.a.createElement(f,Object(r.a)({},n),t)},auto:void 0},f=o.a.forwardRef((function(e,t){return o.a.createElement(a.a,Object(r.a)({tag:"i"},e,{ref:t}))})),p=Object(a.b)((function(e,t){var n,i=e.icon,a=Object(r.d)(e,["icon"]),c=Object(s.a)(),f=Object(r.a)({},function(e){return o.a.isValidElement(e)||e&&"object"!==typeof e?{icon:e}:e}(i)),p=f.icon,m=f.strategy,g=f.prefix,v=f.basename,y=f.render,b=f.size,S=Object(r.d)(f,["icon","strategy","prefix","basename","render","size"]),T=c.icon||{},_=T.basename,E=void 0===_?null:_,C=T.prefix,w=void 0===C?null:C,R=T.strategy,k=void 0===R?null:R,A=T.render,O=void 0===A?null:A,I=p,x=d(I,m||null,k||null),D=void 0===v?E:v,P="className"===x&&"string"===typeof p?""+String(g||w)+p:null,N="custom"===x?y||O:!!x&&h[x]||null;if(!N)return console.error("Icon: rendering not implemented for "+String(x)+"."),null;var L=N(Object(r.a)(Object(r.a)(Object(r.a)({},a),S),{ref:t,content:I,className:u()("rmwc-icon","rmwc-icon--"+x,D,a.className,S.className,P,(n={},n["rmwc-icon--size-"+(b||"")]=!!b,n))})),M=Object(l.a)(L.props.children);return M.includes("Avatar")||M.includes("Icon")?o.a.cloneElement(L.props.children,Object(r.a)(Object(r.a)(Object(r.a)({},L.props.children.props),L.props),{ref:t,children:L.props.children.props.children,className:u()(L.props.className,L.props.children.props.className)})):L}));p.displayName="Icon"},function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r={};n.r(r),n.d(r,"supportsCssVariables",(function(){return b})),n.d(r,"getNormalizedEventCoords",(function(){return S}));var i,o=n(0),s=n(1),a=n.n(s),c=n(13),u=n(6),l=n.n(u),d=n(18),h=n(47),f={bottom:0,height:0,left:0,right:0,top:0,width:0},p=function(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)},m=n(5),g={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},v={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},y={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};function b(e,t){void 0===t&&(t=!1);var n,r=e.CSS;if("boolean"===typeof i&&!t)return i;if(!(r&&"function"===typeof r.supports))return!1;var o=r.supports("--css-vars","yes"),s=r.supports("(--css-vars: yes)")&&r.supports("color","#00000000");return n=o||s,t||(i=n),n}function S(e,t,n){if(!e)return{x:0,y:0};var r,i,o=t.x,s=t.y,a=o+n.left,c=s+n.top;if("touchstart"===e.type){var u=e;r=u.changedTouches[0].pageX-a,i=u.changedTouches[0].pageY-c}else{var l=e;r=l.pageX-a,i=l.pageY-c}return{x:r,y:i}}var T,_=["touchstart","pointerdown","mousedown","keydown"],E=["touchend","pointerup","mouseup","contextmenu"],C=[],w=function(e){function t(n){var r=e.call(this,o.a({},t.defaultAdapter,n))||this;return r.activationAnimationHasEnded_=!1,r.activationTimer_=0,r.fgDeactivationRemovalTimer_=0,r.fgScale_="0",r.frame_={width:0,height:0},r.initialSize_=0,r.layoutFrame_=0,r.maxRadius_=0,r.unboundedCoords_={left:0,top:0},r.activationState_=r.defaultActivationState_(),r.activationTimerCallback_=function(){r.activationAnimationHasEnded_=!0,r.runDeactivationUXLogicIfReady_()},r.activateHandler_=function(e){return r.activate_(e)},r.deactivateHandler_=function(){return r.deactivate_()},r.focusHandler_=function(){return r.handleFocus()},r.blurHandler_=function(){return r.handleBlur()},r.resizeHandler_=function(){return r.layout()},r}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return g},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return v},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return y},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var r=t.cssClasses,i=r.ROOT,o=r.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.addClass(i),e.adapter_.isUnbounded()&&(e.adapter_.addClass(o),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,r=n.ROOT,i=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.removeClass(r),e.adapter_.removeClass(i),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(_.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):E.forEach((function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;_.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),E.forEach((function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var r=this.previousActivationEvent_;if(!(r&&void 0!==e&&r.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&C.length>0&&C.some((function(e){return t.adapter_.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(C.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){C=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter_.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,r=n.VAR_FG_TRANSLATE_START,i=n.VAR_FG_TRANSLATE_END,o=t.cssClasses,s=o.FG_DEACTIVATION,a=o.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var u="",l="";if(!this.adapter_.isUnbounded()){var d=this.getFgTranslationCoordinates_(),h=d.startPoint,f=d.endPoint;u=h.x+"px, "+h.y+"px",l=f.x+"px, "+f.y+"px"}this.adapter_.updateCssVariable(r,u),this.adapter_.updateCssVariable(i,l),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(s),this.adapter_.computeBoundingRect(),this.adapter_.addClass(a),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),c)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?S(n,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,r=this.activationState_,i=r.hasDeactivationUXRun,o=r.isActivated;(i||!o)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter_.removeClass(n)}),y.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=o.a({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var r=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter_.isUnbounded()&&r%2!==0?this.initialSize_=r-1:this.initialSize_=r,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,r=e.VAR_LEFT,i=e.VAR_TOP,o=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(o,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(r,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(i,this.unboundedCoords_.top+"px"))},t}(m.a),R=a.a.createContext({}),k=(T=function(e){var t=e.children,n=e.className,i=e.primary,c=e.accent,u=e.unbounded,d=e.surface,m=(e.domNode,e.foundationRef,Object(o.d)(e,["children","className","primary","accent","unbounded","surface","domNode","foundationRef"])),g=function(e){var t=Object(s.useRef)(!1),n=Object(h.a)({props:e,elements:{rootEl:!0,surfaceEl:!0},foundation:function(e){var t=e.rootEl,n=e.surfaceEl,i=e.getProps;return new w({browserSupportsCssVars:function(){return r.supportsCssVariables(window)},isUnbounded:function(){return!!i().unbounded},isSurfaceActive:function(){return!!t.ref&&p(t.ref,":active")},isSurfaceDisabled:function(){return!!i().disabled},addClass:function(e){n.addClass(e)},removeClass:function(e){n.removeClass(e)},containsEventTarget:function(e){return!!t.ref&&t.ref.contains(e)},registerInteractionHandler:function(e,t){},deregisterInteractionHandler:function(e,t){},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,{passive:!0})},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t)},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},updateCssVariable:function(e,t){return n.setStyle(e,t)},computeBoundingRect:function(){return t.ref?t.ref.getBoundingClientRect():f},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}})}}),i=n.foundation,a=Object(o.d)(n,["foundation"]),c=a.rootEl,u=Object(s.useCallback)((function(e){e.persist(),i.activate(e)}),[i]),l=Object(s.useCallback)((function(e){e.persist(),i.deactivate()}),[i]),d=Object(s.useCallback)((function(t){var n;null===(n=e.onFocus)||void 0===n||n.call(e,t),i.handleFocus()}),[i,e.onFocus]),m=Object(s.useCallback)((function(t){var n;null===(n=e.onBlur)||void 0===n||n.call(e,t),i.handleBlur()}),[i,e.onBlur]),g=Object(s.useCallback)((function(n){var r;null===(r=e.onMouseDown)||void 0===r||r.call(e,n),t.current||u(n),t.current=!1}),[e.onMouseDown,u]),v=Object(s.useCallback)((function(t){var n;null===(n=e.onMouseUp)||void 0===n||n.call(e,t),l(t)}),[e.onMouseUp,l]),y=Object(s.useCallback)((function(n){var r;t.current=!0,null===(r=e.onTouchStart)||void 0===r||r.call(e,n),u(n)}),[e.onTouchStart,u]),b=Object(s.useCallback)((function(t){var n;null===(n=e.onTouchEnd)||void 0===n||n.call(e,t),l(t)}),[e.onTouchEnd,l]),S=Object(s.useCallback)((function(t){var n;null===(n=e.onKeyDown)||void 0===n||n.call(e,t),u(t)}),[e.onKeyDown,u]),T=Object(s.useCallback)((function(t){var n;null===(n=e.onKeyUp)||void 0===n||n.call(e,t),l(t)}),[e.onKeyUp,l]);return c.setProp("onFocus",d,!0),c.setProp("onBlur",m,!0),c.setProp("onMouseDown",g,!0),c.setProp("onMouseUp",v,!0),c.setProp("onTouchStart",y,!0),c.setProp("onTouchEnd",b,!0),c.setProp("onKeyDown",S,!0),c.setProp("onKeyUp",T,!0),Object(s.useEffect)((function(){c.setRef(e.domNode)}),[c,e.domNode]),Object(s.useEffect)((function(){i.setUnbounded(!!e.unbounded)}),[e.unbounded,i]),Object(s.useEffect)((function(){e.disabled&&i.handleBlur()}),[e.disabled,i]),Object(o.a)({},a)}(e),v=g.rootEl,y=g.surfaceEl,b=a.a.Children.only(t);if(!a.a.isValidElement(b))return null;var S=u?{"data-mdc-ripple-is-unbounded":!0}:{},T=d&&u?{}:y.props({style:b.props.style}),_=l()(n!==b.props.className&&n,T.className,b.props.className,{"mdc-ripple-surface":"boolean"===typeof d?d:void 0===d,"mdc-ripple-surface--primary":i,"mdc-ripple-surface--accent":c});m.disabled&&(_=_.replace("mdc-ripple-upgraded--background-focused",""));var E=a.a.cloneElement(b,Object(o.a)(Object(o.a)(Object(o.a)({},b.props),S),v.props(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},m),{style:b.props.style}),T),{className:_}))));return a.a.createElement(R.Provider,{value:y.props({style:b.props.style})},E)},function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={domNode:null},t}return Object(o.b)(t,e),t.prototype.componentDidMount=function(){this.setState({domNode:c.findDOMNode(this)})},t.prototype.componentDidUpdate=function(){var e=c.findDOMNode(this);e!==this.state.domNode&&this.setState({rootRippleElement:e})},t.prototype.render=function(){return a.a.createElement(T,Object(o.a)({},this.props,{domNode:this.state.domNode}))},t}(a.a.Component)),A=function(e){var t=void 0===e?{}:e,n=t.unbounded,r=t.accent,i=t.surface;return function(e){var t=a.a.forwardRef((function(t,s){var c=t.ripple,u=Object(o.d)(t,["ripple"]),l=Object(d.a)(),h="object"!==typeof(c=null!==c&&void 0!==c?c:l.ripple)?{}:c;return c?a.a.createElement(k,Object(o.a)({},u,{accent:h.accent||r,unbounded:h.unbounded||n,surface:h.surface||i}),a.a.createElement(e,Object(o.a)({},u,{ref:s}))):a.a.createElement(e,Object(o.a)({},u,{ref:s}))}));return t.displayName="withRipple("+(e.displayName||e.constructor.name||"Unknown")+")",t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),i=n(1),o=n.n(i),s=n(4),a=n(9),c=n(10),u=n(47),l=n(5),d={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},h={ARIA_PRESSED:"aria-pressed",CHANGE_EVENT:"MDCIconButtonToggle:change"},f=function(e){function t(n){return e.call(this,r.a({},t.defaultAdapter,n))||this}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return h},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},setAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.setAttr(h.ARIA_PRESSED,""+this.isOn())},t.prototype.handleClick=function(){this.toggle(),this.adapter_.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter_.hasClass(d.ICON_BUTTON_ON)},t.prototype.toggle=function(e){void 0===e&&(e=!this.isOn()),e?this.adapter_.addClass(d.ICON_BUTTON_ON):this.adapter_.removeClass(d.ICON_BUTTON_ON),this.adapter_.setAttr(h.ARIA_PRESSED,""+e)},t}(l.a),p=Object(s.b)((function(e,t){var n=Object(r.d)(e,[]);return n.onIcon?o.a.createElement(m,Object(r.a)({},n,{ref:t})):o.a.createElement(g,Object(r.a)({tag:"button"},n,{ref:t}))})),m=Object(s.b)((function(e,t){var n=e.icon,s=e.onIcon,a=(e.foundationRef,Object(r.d)(e,["icon","onIcon","foundationRef"])),c=function(e){var t=Object(u.a)({props:e,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl,n=e.emit;return new f({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},setAttr:function(e,n){return t.setProp(e,n)},notifyChange:function(e){return n("onChange",e)}})}}),n=t.foundation,o=Object(r.d)(t,["foundation"]),s=o.rootEl,a=void 0!==e.checked?e.checked:n.isOn();return Object(i.useEffect)((function(){a!==n.isOn()&&n.toggle(a)}),[n,a]),s.setProp("onClick",(function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),n.handleClick()}),!0),Object(r.a)({isOn:a,foundation:n},o)}(e),l=c.isOn,d=c.rootEl;return o.a.createElement(v,Object(r.a)({"aria-pressed":l},d.props(a),{tag:"button",ref:t}),o.a.createElement(y,{icon:n}),o.a.createElement(y,{icon:s,on:!0}))})),g=Object(c.a)({surface:!1,unbounded:!0})(Object(s.b)((function(e,t){var n=e.checked,i=e.label,c=(e.foundationRef,Object(r.d)(e,["checked","label","foundationRef"])),u=Object(s.f)(e,["mdc-icon-button",{"mdc-icon-button--on":n}]);return o.a.createElement(a.a,Object(r.a)({role:"button",tabIndex:0,"aria-label":i},c,{className:u,ref:t}))}))),v=Object(c.a)({surface:!1,unbounded:!0})(Object(s.b)((function(e,t){var n=e.checked,i=Object(r.d)(e,["checked"]),a=Object(s.f)(e,["mdc-icon-button",{"mdc-icon-button--on":n}]);return o.a.createElement(s.a,Object(r.a)({tag:"button",role:"button",tabIndex:0},i,{className:a,ref:t}))}))),y=o.a.memo((function(e){e.on;var t=Object(r.d)(e,["on"]),n=Object(s.f)(e,["mdc-icon-button__icon",{"mdc-icon-button__icon--on":e.on}]);return o.a.createElement(a.a,Object(r.a)({},t,{className:n}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return _})),n.d(t,"b",(function(){return E}));var r=n(0),i=n(1),o=n.n(i),s=n(4),a=n(11),c=n(47),u={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},l={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},d={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"},h=function(e){function t(n){return e.call(this,r.a({},t.defaultAdapter,n))||this}return r.b(t,e),Object.defineProperty(t,"strings",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!0,configurable:!0}),t.prototype.handleTargetScroll=function(){},t.prototype.handleWindowResize=function(){},t.prototype.handleNavigationClick=function(){this.adapter_.notifyNavigationIconClicked()},t}(n(5).a),f=function(e){function t(t){var n=e.call(this,t)||this;return n.wasDocked_=!0,n.isDockedShowing_=!0,n.currentAppBarOffsetTop_=0,n.isCurrentlyBeingResized_=!1,n.resizeThrottleId_=0,n.resizeDebounceId_=0,n.lastScrollPosition_=n.adapter_.getViewportScrollY(),n.topAppBarHeight_=n.adapter_.getTopAppBarHeight(),n}return r.b(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.adapter_.setStyle("top","")},t.prototype.handleTargetScroll=function(){var e=Math.max(this.adapter_.getViewportScrollY(),0),t=e-this.lastScrollPosition_;this.lastScrollPosition_=e,this.isCurrentlyBeingResized_||(this.currentAppBarOffsetTop_-=t,this.currentAppBarOffsetTop_>0?this.currentAppBarOffsetTop_=0:Math.abs(this.currentAppBarOffsetTop_)>this.topAppBarHeight_&&(this.currentAppBarOffsetTop_=-this.topAppBarHeight_),this.moveTopAppBar_())},t.prototype.handleWindowResize=function(){var e=this;this.resizeThrottleId_||(this.resizeThrottleId_=setTimeout((function(){e.resizeThrottleId_=0,e.throttledResizeHandler_()}),l.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized_=!0,this.resizeDebounceId_&&clearTimeout(this.resizeDebounceId_),this.resizeDebounceId_=setTimeout((function(){e.handleTargetScroll(),e.isCurrentlyBeingResized_=!1,e.resizeDebounceId_=0}),l.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},t.prototype.checkForUpdate_=function(){var e=-this.topAppBarHeight_,t=this.currentAppBarOffsetTop_<0,n=this.currentAppBarOffsetTop_>e,r=t&&n;if(r)this.wasDocked_=!1;else{if(!this.wasDocked_)return this.wasDocked_=!0,!0;if(this.isDockedShowing_!==n)return this.isDockedShowing_=n,!0}return r},t.prototype.moveTopAppBar_=function(){if(this.checkForUpdate_()){var e=this.currentAppBarOffsetTop_;Math.abs(e)>=this.topAppBarHeight_&&(e=-l.MAX_TOP_APP_BAR_HEIGHT),this.adapter_.setStyle("top",e+"px")}},t.prototype.throttledResizeHandler_=function(){var e=this.adapter_.getTopAppBarHeight();this.topAppBarHeight_!==e&&(this.wasDocked_=!1,this.currentAppBarOffsetTop_-=this.topAppBarHeight_-e,this.topAppBarHeight_=e),this.handleTargetScroll()},t}(h),p=function(e){function t(t){var n=e.call(this,t)||this;return n.isCollapsed_=!1,n.isAlwaysCollapsed_=!1,n}return r.b(t,e),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.isCollapsed_},enumerable:!0,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this.adapter_.getTotalActionItems()>0&&this.adapter_.addClass(u.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter_.hasClass(u.SHORT_COLLAPSED_CLASS))},t.prototype.setAlwaysCollapsed=function(e){this.isAlwaysCollapsed_=!!e,this.isAlwaysCollapsed_?this.collapse_():this.maybeCollapseBar_()},t.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed_},t.prototype.handleTargetScroll=function(){this.maybeCollapseBar_()},t.prototype.maybeCollapseBar_=function(){this.isAlwaysCollapsed_||(this.adapter_.getViewportScrollY()<=0?this.isCollapsed_&&this.uncollapse_():this.isCollapsed_||this.collapse_())},t.prototype.uncollapse_=function(){this.adapter_.removeClass(u.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!1},t.prototype.collapse_=function(){this.adapter_.addClass(u.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!0},t}(h),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wasScrolled_=!1,t}return r.b(t,e),t.prototype.handleTargetScroll=function(){this.adapter_.getViewportScrollY()<=0?this.wasScrolled_&&(this.adapter_.removeClass(u.FIXED_SCROLLED_CLASS),this.wasScrolled_=!1):this.wasScrolled_||(this.adapter_.addClass(u.FIXED_SCROLLED_CLASS),this.wasScrolled_=!0)},t}(f),g=Object(s.b)((function(e,t){return o.a.createElement(v,Object(r.a)({key:e.short?"short":e.fixed?"fixed":"top-app-bar"},e,{ref:t}))})),v=Object(s.b)((function(e,t){var n=function(e){var t=Object(i.useRef)(null),n=Object(i.useRef)(null),o=Object(c.a)({props:e,elements:{rootEl:!0},foundation:function(n){var r=n.rootEl,i=n.emit,o={hasClass:function(e){return r.hasClass(e)},addClass:function(e){return r.addClass(e)},removeClass:function(e){return r.removeClass(e)},setStyle:function(e,t){return r.setStyle(e,t)},getTopAppBarHeight:function(){var e;return(null===(e=r.ref)||void 0===e?void 0:e.clientHeight)||0},notifyNavigationIconClicked:function(){return i("onNav",{})},getViewportScrollY:function(){var e=t.current;return e?e["pageYOffset"in e?"pageYOffset":"scrollTop"]:0},getTotalActionItems:function(){return r.ref?r.ref.querySelectorAll(f.strings.ACTION_ITEM_SELECTOR).length:0}};return e.short?new p(o):e.fixed?new m(o):new f(o)}}),s=o.foundation,a=Object(r.d)(o,["foundation"]),u=a.rootEl;return Object(i.useEffect)((function(){var n,r,i=e.scrollTarget||(null===(r=null===(n=u.ref)||void 0===n?void 0:n.ownerDocument)||void 0===r?void 0:r.defaultView)||window,o=s.handleTargetScroll.bind(s);return i.addEventListener("scroll",o),t.current=i,function(){i.removeEventListener("scroll",o)}}),[e.scrollTarget,t,s,u.ref]),Object(i.useEffect)((function(){var e,t;n.current=(null===(e=u.ref)||void 0===e?void 0:e.querySelector(f.strings.NAVIGATION_ICON_SELECTOR))||null;var r=s.handleNavigationClick.bind(s);return null===(t=n.current)||void 0===t||t.addEventListener("click",r),function(){var e;null===(e=n.current)||void 0===e||e.removeEventListener("click",r)}}),[u.ref,s]),Object(i.useEffect)((function(){s.lastScrollPosition_=s.adapter_.getViewportScrollY(),s.topAppBarHeight_=s.adapter_.getTopAppBarHeight()}),[s]),Object(r.a)({foundation:s},a)}(e).rootEl,a=(e.onNav,e.scrollTarget,e.fixed),u=e.prominent,l=e.short,d=e.shortCollapsed,h=e.dense,g=(e.foundationRef,Object(r.d)(e,["onNav","scrollTarget","fixed","prominent","short","shortCollapsed","dense","foundationRef"])),v=Object(s.f)(e,["mdc-top-app-bar",{"mdc-top-app-bar--fixed":a,"mdc-top-app-bar--prominent":u,"mdc-top-app-bar--short":l||d,"mdc-top-app-bar--short-collapsed":d,"mdc-top-app-bar--dense":h}]);return o.a.createElement(s.a,Object(r.a)({tag:"header"},g,{element:n,className:v,ref:t}))})),y=(Object(s.b)((function(e,t){var n=e.title,i=e.actionItems,s=e.navigationIcon,a=e.startContent,c=e.endContent,u=Object(r.d)(e,["title","actionItems","navigationIcon","startContent","endContent"]);return o.a.createElement(g,Object(r.a)({},u,{ref:t}),o.a.createElement(y,null,o.a.createElement(b,{alignStart:!0},!!s&&o.a.createElement(S,Object(r.a)({icon:"menu"},"boolean"===typeof s?{}:s)),!!n&&o.a.createElement(_,null,n),a),(!!i||c)&&o.a.createElement(b,{alignEnd:!0},c,!!i&&i.map((function(e,t){return o.a.createElement(T,Object(r.a)({},e,{key:t}))})))))})),Object(s.b)((function(e,t){var n=Object(s.f)(e,["mdc-top-app-bar__row"]);return o.a.createElement(s.a,Object(r.a)({},e,{ref:t,className:n}))}))),b=Object(s.b)((function(e,t){var n=e.alignStart,i=e.alignEnd,a=Object(r.d)(e,["alignStart","alignEnd"]),c=Object(s.f)(e,["mdc-top-app-bar__section",{"mdc-top-app-bar__section--align-start":n,"mdc-top-app-bar__section--align-end":i}]);return o.a.createElement(s.a,Object(r.a)({tag:"section"},a,{ref:t,className:c}))})),S=Object(s.b)((function(e,t){var n=Object(s.f)(e,["mdc-top-app-bar__navigation-icon"]);return o.a.createElement(a.a,Object(r.a)({},e,{className:n,ref:t}))})),T=Object(s.b)((function(e,t){var n=Object(s.f)(e,["mdc-top-app-bar__action-item"]);return o.a.createElement(a.a,Object(r.a)({},e,{className:n,ref:t}))})),_=Object(s.b)((function(e,t){var n=Object(s.f)(e,["mdc-top-app-bar__title"]);return o.a.createElement(s.a,Object(r.a)({},e,{ref:t,className:n}))})),E=Object(s.b)((function(e,t){e.dense,e.denseProminent,e.prominent,e.short;var n=Object(r.d)(e,["dense","denseProminent","prominent","short"]),i=Object(s.f)(e,[{"mdc-top-app-bar--fixed-adjust":!e.dense&&!e.denseProminent&&!e.prominent&&!e.short,"mdc-top-app-bar--dense-fixed-adjust":e.dense,"mdc-top-app-bar--prominent-fixed-adjust":e.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":e.denseProminent,"mdc-top-app-bar--short-fixed-adjust":e.short}]);return o.a.createElement(s.a,Object(r.a)({},n,{ref:t,className:i}))}))},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(32)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(0),i=n(1),o=n.n(i),s=n(4),a=n(28),c=Object(s.b)((function(e,t){var n,i=e.children,c=e.fixedColumnWidth,u=e.align,d=Object(r.d)(e,["children","fixedColumnWidth","align"]),h=!("GridRow"===Object(a.a)(i)),f=Object(s.f)(e,["mdc-layout-grid",(n={},n["mdc-layout-grid--align-"+(u||"")]=void 0!==e.align,n["mdc-layout-grid--fixed-column-width"]=c,n)]);return o.a.createElement(s.a,Object(r.a)({},d,{className:f,ref:t}),h?o.a.createElement(l,null,i):i)})),u=Object(s.b)((function(e,t){var n,i=e.span,a=e.phone,c=e.tablet,u=e.desktop,l=e.order,d=e.align,h=Object(r.d)(e,["span","phone","tablet","desktop","order","align"]),f=Object(s.f)(e,["mdc-layout-grid__cell",(n={},n["mdc-layout-grid__cell--order-"+(l||"")]=void 0!==l,n["mdc-layout-grid__cell--align-"+(d||"")]=void 0!==d,n["mdc-layout-grid__cell--span-"+(i||"")]=void 0!==i,n["mdc-layout-grid__cell--span-"+(a||"")+"-phone"]=void 0!==a,n["mdc-layout-grid__cell--span-"+(c||"")+"-tablet"]=void 0!==c,n["mdc-layout-grid__cell--span-"+(u||"")+"-desktop"]=void 0!==e.desktop,n)]);return o.a.createElement(s.a,Object(r.a)({},h,{ref:t,className:f}))})),l=Object(s.b)((function(e,t){var n=Object(s.f)(e,["mdc-layout-grid__inner"]);return o.a.createElement(s.a,Object(r.a)({},e,{ref:t,className:n}))}));l.displayName="GridRow"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(e){return e.replace(/(-[a-z])/g,(function(e){return e.toUpperCase().replace("-","")}))},i=function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(0);var r=n(1),i=n.n(r),o={ripple:!0,tooltip:{align:"top",showArrow:!1,activateOn:["hover","focus"],enterDelay:0,leaveDelay:0},typography:{},icon:{icon:"",basename:"material-icons",prefix:"",strategy:"auto",render:void 0}},s=i.a.createContext(o),a=function(){return i.a.useContext(s)}},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return a}));var o=n(8);function s(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,a,c=s(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(c[l]=n[l]);if(r){a=r(n);for(var d=0;d<a.length;d++)o.call(n,a[d])&&(c[a[d]]=n[a[d]])}}return c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),i=n(1),o=n.n(i),s=n(10),a=n(9),c=n(4),u=Object(s.a)({surface:!1})(Object(c.b)((function(e,t){var n=e.dense,i=e.raised,s=e.unelevated,a=e.outlined,u=e.danger,h=e.icon,f=e.label,p=e.trailingIcon,m=e.children,g=Object(r.d)(e,["dense","raised","unelevated","outlined","danger","icon","label","trailingIcon","children"]),v=Object(c.f)(e,["mdc-button",{"mdc-button--dense":n,"mdc-button--raised":i,"mdc-button--unelevated":s,"mdc-button--outlined":a}]);if(u){var y=g.style||{};g.style=Object(r.a)(Object(r.a)({},{"--mdc-theme-primary":"var(--mdc-theme-error)","--mdc-theme-on-primary":"var(--mdc-theme-on-error)"}),y)}return o.a.createElement(c.a,Object(r.a)({tag:"button"},g,{ref:t,className:v}),o.a.createElement(l,null),!!h&&o.a.createElement(d,{icon:h}),o.a.createElement("span",{className:"mdc-button__label"},f,m),!!p&&o.a.createElement(d,{icon:p}))}))),l=o.a.memo((function(){return o.a.createElement("div",{className:"mdc-button__ripple"})})),d=Object(c.c)((function(e,t){var n=Object(c.f)(e,["mdc-button__icon"]);return o.a.createElement(a.a,Object(r.a)({},e,{className:n,ref:t}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return F})),n.d(t,"b",(function(){return G}));var r=n(0),i=n(1),o=n.n(i),s=n(4),a=function(e,t){var n=t.id?t.id:t.label?e+"-"+t.label:function(e){return e+"-"+(Math.random()+Math.random()+1).toString(36).substring(2)}(e);return Object(r.c)(Object(i.useState)(n),1)[0]},c=n(9),u=n(47),l=n(5),d={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},h=function(e){function t(n){var i=e.call(this,r.a({},t.defaultAdapter,n))||this;return i.transitionEndHandler_=function(e){return i.handleTransitionEnd(e)},i}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter_.removeClass(d.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(d.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter_.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter_.addClass(d.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter_.hasClass(d.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(d.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(d.LINE_RIPPLE_DEACTIVATING))},t}(l.a),f=Object(s.b)((function(e,t){e.active,e.center;var n=Object(r.d)(e,["active","center"]),a=function(e){var t=Object(u.a)({props:e,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl;return new h({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},setStyle:function(e,n){return t.setStyle(e,n)},registerEventHandler:function(e,n){return t.addEventListener(e,n)},deregisterEventHandler:function(e,n){return t.removeEventListener(e,n)}})}}),n=t.foundation,o=Object(r.d)(t,["foundation"]),s=o.rootEl;return Object(i.useEffect)((function(){e.active?n.activate():n.deactivate()}),[e.active,n]),Object(i.useEffect)((function(){"number"===typeof e.center&&n.setRippleCenter(e.center)}),[e.center,n]),s.setProp("onTransitionEnd",(function(e){return n.handleTransitionEnd(e)}),!0),Object(r.a)({foundation:n},o)}(e).rootEl;return o.a.createElement(s.a,Object(r.a)({},n,{tag:"span",element:a,className:"mdc-line-ripple",ref:t}))})),p={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},m=function(e){function t(n){var i=e.call(this,r.a({},t.defaultAdapter,n))||this;return i.shakeAnimationEndHandler_=function(){return i.handleShakeAnimationEnd_()},i}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter_.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,r=n.LABEL_FLOAT_ABOVE,i=n.LABEL_SHAKE;e?this.adapter_.addClass(r):(this.adapter_.removeClass(r),this.adapter_.removeClass(i))},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter_.removeClass(e)},t}(l.a),g=Object(s.b)((function(e,t){var n=function(e){var t=Object(u.a)({props:e,elements:{rootEl:!0},api:function(e){var t=e.foundation;return{getWidth:function(){return t.getWidth()}}},foundation:function(e){var t=e.rootEl;return new m({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},getWidth:function(){var e;return(null===(e=t.ref)||void 0===e?void 0:e.scrollWidth)||0},registerInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.removeEventListener(e,n)}})}}),n=t.foundation,o=Object(r.d)(t,["foundation"]);return Object(i.useEffect)((function(){n.shake(!!e.shake)}),[e.shake,n]),Object(i.useEffect)((function(){n.float(!!e.float)}),[e.float,n]),Object(r.a)({foundation:n},o)}(e).rootEl,a=(e.shake,e.float,e.apiRef,Object(r.d)(e,["shake","float","apiRef"]));return o.a.createElement("span",Object(r.a)({},n.props(Object(r.a)(Object(r.a)({},a),{className:"mdc-floating-label"})),{ref:Object(s.e)(n.setRef,t)}))})),v={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},y={NOTCH_ELEMENT_PADDING:8},b={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},S=function(e){function t(n){return e.call(this,r.a({},t.defaultAdapter,n))||this}return r.b(t,e),Object.defineProperty(t,"strings",{get:function(){return v},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return b},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return y},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=y.NOTCH_ELEMENT_PADDING),this.adapter_.setNotchWidthProperty(e),this.adapter_.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter_.removeClass(e),this.adapter_.removeNotchWidthProperty()},t}(l.a),T=Object(s.b)((function(e,t){var n=e.children,a=Object(r.d)(e,["children"]),c=function(e){var t=Object(u.a)({props:e,elements:{rootEl:!0,notchedEl:!0},foundation:function(e){var t=e.rootEl,n=e.notchedEl;return new S({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},setNotchWidthProperty:function(e){return n.setStyle("width",e+"px")},removeNotchWidthProperty:function(){return n.setStyle("width","")}})}}),n=t.foundation,o=Object(r.d)(t,["foundation"]),s=o.rootEl,a=Object(i.useRef)();return Object(i.useEffect)((function(){e.notch?n.notch(e.notch):n.closeNotch()}),[e.notch,n]),Object(i.useEffect)((function(){var e;a.current=(null===(e=s.ref)||void 0===e?void 0:e.querySelector(".mdc-floating-label"))||void 0;var t=a.current;t?(t.style.transitionDuration="0s",s.addClass(S.cssClasses.OUTLINE_UPGRADED),requestAnimationFrame((function(){t&&(t.style.transitionDuration="")}))):s.addClass(S.cssClasses.NO_LABEL)}),[s]),Object(r.a)({foundation:n},o)}(e),l=c.rootEl,d=c.notchedEl;return o.a.createElement(s.a,Object(r.a)({},a,{element:l,className:"mdc-notched-outline",ref:t}),o.a.createElement(_,null),o.a.createElement("div",Object(r.a)({},d.props({className:"mdc-notched-outline__notch"}),{ref:d.setRef}),n),o.a.createElement(E,null))})),_=o.a.memo((function(){return o.a.createElement("div",{className:"mdc-notched-outline__leading"})})),E=o.a.memo((function(){return o.a.createElement("div",{className:"mdc-notched-outline__trailing"})})),C=n(10),w={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},R={ROOT:"mdc-text-field__icon"},k=["click","keydown"],A=function(e){function t(n){var i=e.call(this,r.a({},t.defaultAdapter,n))||this;return i.savedTabIndex_=null,i.interactionHandler_=function(e){return i.handleInteraction(e)},i}return r.b(t,e),Object.defineProperty(t,"strings",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return R},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),k.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;k.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",w.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&(e.preventDefault(),this.adapter_.notifyIconAction())},t}(l.a),O={ROOT:"mdc-text-field-character-counter"},I={ROOT_SELECTOR:"."+O.ROOT},x=function(e){function t(n){return e.call(this,r.a({},t.defaultAdapter,n))||this}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return O},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return I},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter_.setContent(e+" / "+t)},t}(l.a),D={ARIA_CONTROLS:"aria-controls",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},P={DENSE:"mdc-text-field--dense",DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",FULLWIDTH:"mdc-text-field--fullwidth",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},N={DENSE_LABEL_SCALE:.923,LABEL_SCALE:.75},L=["pattern","min","max","required","step","minlength","maxlength"],M=["color","date","datetime-local","month","range","time","week"],U=["mousedown","touchstart"],j=["click","keydown"],H=function(e){function t(n,i){void 0===i&&(i={});var o=e.call(this,r.a({},t.defaultAdapter,n))||this;return o.isFocused_=!1,o.receivedUserInput_=!1,o.isValid_=!0,o.useNativeValidation_=!0,o.helperText_=i.helperText,o.characterCounter_=i.characterCounter,o.leadingIcon_=i.leadingIcon,o.trailingIcon_=i.trailingIcon,o.inputFocusHandler_=function(){return o.activateFocus()},o.inputBlurHandler_=function(){return o.deactivateFocus()},o.inputInputHandler_=function(){return o.handleInput()},o.setPointerXOffset_=function(e){return o.setTransformOrigin(e)},o.textFieldInteractionHandler_=function(){return o.handleTextFieldInteraction()},o.validationAttributeChangeHandler_=function(e){return o.handleValidationAttributeChange(e)},o}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return P},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return D},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return N},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return M.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter_.isFocused()?this.inputFocusHandler_():this.adapter_.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter_.floatLabel(!0)),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),U.forEach((function(t){e.adapter_.registerInputInteractionHandler(t,e.setPointerXOffset_)})),j.forEach((function(t){e.adapter_.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter_.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),U.forEach((function(t){e.adapter_.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),j.forEach((function(t){e.adapter_.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter_.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter_.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return L.indexOf(e)>-1&&(t.styleValidity_(!0),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter_.hasOutline())if(e){var t=this.adapter_.hasClass(P.DENSE)?N.DENSE_LABEL_SCALE:N.LABEL_SCALE,n=this.adapter_.getLabelWidth()*t;this.adapter_.notchOutline(n)}else this.adapter_.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter_.activateLineRipple(),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.helperText_&&this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){var t=e.touches,n=t?t[0]:e,r=n.target.getBoundingClientRect(),i=n.clientX-r.left;this.adapter_.setLineRippleTransformOrigin(i)},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter_.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length);var t=this.isValid();this.styleValidity_(t),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter_.hasLabel()&&this.adapter_.shakeLabel(t)},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var n=t.cssClasses.INVALID;e?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.helperText_&&this.helperText_.setValidity(e)},t.prototype.styleFocused_=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.styleDisabled_=function(e){var n=t.cssClasses,r=n.DISABLED,i=n.INVALID;e?(this.adapter_.addClass(r),this.adapter_.removeClass(i)):this.adapter_.removeClass(r),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.getNativeInput_=function(){return(this.adapter_?this.adapter_.getNativeInput():null)||{disabled:!1,maxLength:-1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(l.a),F=Object(s.b)((function(e,t){var n=e.label,c=e.style,l=e.outlined,d=e.align,h=e.fullwidth,p=e.invalid,m=e.disabled,v=e.helpText,y=e.children,b=e.textarea,S=e.inputRef,_=e.characterCount,E=e.icon,C=e.trailingIcon,w=e.rootProps,R=void 0===w?{}:w,k=(e.foundationRef,e.ripple,e.floatLabel,Object(r.d)(e,["label","style","outlined","align","fullwidth","invalid","disabled","helpText","children","textarea","inputRef","characterCount","icon","trailingIcon","rootProps","foundationRef","ripple","floatLabel"])),A=function(e){var t=Object(r.c)(Object(i.useState)(!1),2),n=t[0],o=t[1],s=Object(r.c)(Object(i.useState)(0),2),a=s[0],c=s[1],l=Object(r.c)(Object(i.useState)(),2),d=l[0],h=l[1],f=Object(r.c)(Object(i.useState)(!1),2),p=f[0],m=f[1],g=Object(r.c)(Object(i.useState)(!1),2),v=g[0],y=g[1],b=Object(i.useRef)(),S=Object(i.useRef)(),T=Object(i.useRef)(),_=Object(i.useRef)(),E=Object(u.a)({props:e,elements:{rootEl:!0,inputEl:!0},foundation:function(e){var t=e.rootEl,n=e.inputEl,i=e.getProps;return new H(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},registerTextFieldInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterTextFieldInteractionHandler:function(e,n){return t.removeEventListener(e,n)},registerValidationAttributeChangeHandler:function(e){if(n.ref){var t=new MutationObserver((function(t){return e(function(e){return e.map((function(e){return e.attributeName}))}(t))})),r=n.ref;return r&&t.observe(r,{attributes:!0}),t}return{}},deregisterValidationAttributeChangeHandler:function(e){e&&e.disconnect()},isFocused:function(){return document.activeElement===n.ref}},{registerInputInteractionHandler:function(e,t){return n.addEventListener(e,t)},deregisterInputInteractionHandler:function(e,t){return n.removeEventListener(e,t)},getNativeInput:function(){return n.ref}}),{shakeLabel:function(e){return m(e)},floatLabel:function(e){var t;y(null!==(t=i().floatLabel)&&void 0!==t?t:e)},hasLabel:function(){return!!i().label},getLabelWidth:function(){var e;return(null===(e=_.current)||void 0===e?void 0:e.getWidth())||0}}),{activateLineRipple:function(){o(!0)},deactivateLineRipple:function(){o(!1)},setLineRippleTransformOrigin:function(e){c(e)}}),{notchOutline:function(e){h(e)},closeOutline:function(){var e;null!==(e=i().floatLabel)&&void 0!==e||h(void 0)},hasOutline:function(){return!!i().outlined}}),{characterCounter:b.current?b.current.getFoundation():void 0,helperText:void 0,leadingIcon:S.current?S.current.getFoundation():void 0,trailingIcon:T.current?T.current.getFoundation():void 0})}}),C=E.foundation,w=Object(r.d)(E,["foundation"]),R=C.getValue();return Object(i.useEffect)((function(){void 0!==e.value&&e.value!==R&&C.setValue(String(e.value))}),[e.value,C,R]),Object(i.useEffect)((function(){void 0!==e.floatLabel&&(C.notchOutline(e.floatLabel),C.adapter_.floatLabel(e.floatLabel))}),[C,e.floatLabel]),Object(r.a)({shakeLabel:p,floatLabel:v,notchWidth:d,lineRippleActive:n,lineRippleCenter:a,setCharacterCounter:function(e){return b.current=e},setLeadingIcon:function(e){return S.current=e},setTrailingIcon:function(e){return T.current=e},setFloatingLabel:function(e){return _.current=e}},w)}(e),O=A.rootEl,I=A.inputEl,x=A.shakeLabel,D=A.floatLabel,P=A.notchWidth,N=A.lineRippleActive,L=A.lineRippleCenter,M=A.setLeadingIcon,U=A.setTrailingIcon,j=A.setFloatingLabel,F=A.setCharacterCounter,z=a("textfield",e)+"-label",W=Object(s.f)(e,["mdc-text-field","mdc-text-field--upgraded",{"mdc-text-field--textarea":b,"mdc-text-field--fullwidth":h,"mdc-text-field--outlined":l,"mdc-text-field--invalid":p,"mdc-text-field--disabled":m,"mdc-text-field--with-leading-icon":!!E,"mdc-text-field--with-trailing-icon":!!C,"mdc-text-field--no-label":!n,"mdc-text-field--end-aligned":"end"===d}]),K=function(e,t){return o.a.createElement(V,{apiRef:function(e){"leading"===t?M(e):U(e)},position:t,tabIndex:"trailing"===t?0:void 0,icon:e})},Y=n?o.a.createElement(g,{shake:x,float:D,apiRef:j,id:z},n):null,J=_?o.a.createElement(B,{apiRef:F}):null;return o.a.createElement(o.a.Fragment,null,o.a.createElement(q,Object(r.a)({},R,{element:O,style:c,className:W,ref:t,"aria-labelledby":z}),!!E&&K(E,"leading"),y,!!b&&J,o.a.createElement($,null),o.a.createElement(s.a,Object(r.a)({},k,{element:I,className:"mdc-text-field__input",disabled:m,tag:b?"textarea":"input",ref:S})),l?o.a.createElement(o.a.Fragment,null,o.a.createElement(T,{notch:P},Y),!!C&&K(C,"trailing")):o.a.createElement(o.a.Fragment,null,Y,!!C&&K(C,"trailing"),o.a.createElement(f,{active:N,center:L}))),function(e){if(!(!!v||_&&!b))return null;var t="object"===typeof v&&!o.a.isValidElement(v);return o.a.createElement("div",{className:"mdc-text-field-helper-line"},v&&t?o.a.createElement(G,Object(r.a)({},v)):o.a.createElement(G,null,v),!b&&e)}(J))})),$=o.a.memo((function(){return o.a.createElement("span",{className:"mdc-text-field__ripple"})})),q=Object(C.a)({surface:!1})(o.a.forwardRef((function(e,t){return o.a.createElement(s.a,Object(r.a)({},e,{tag:"label",ref:t}))}))),B=o.a.memo((function(e){var t=function(e){var t=Object(r.c)(Object(i.useState)(),2),n=t[0],o=t[1],s=Object(u.a)({props:e,api:function(e){var t=e.foundation;return{getFoundation:function(){return t}}},elements:{},foundation:function(){return new x({setContent:function(e){o(e)}})}}),a=(s.foundation,Object(r.d)(s,["foundation"]));return Object(r.a)({content:n},a)}(e).content;return o.a.createElement("div",{className:"mdc-text-field-character-counter"},t)})),G=Object(s.b)((function(e,t){var n=e.persistent,i=e.validationMsg,a=Object(r.d)(e,["persistent","validationMsg"]),c=Object(s.f)(e,["mdc-text-field-helper-text",{"mdc-text-field-helper-text--persistent":n,"mdc-text-field-helper-text--validation-msg":i}]);return o.a.createElement(s.a,Object(r.a)({tag:"p"},a,{className:c,ref:t}))})),V=function(e){e.apiRef;var t=e.position,n=Object(r.d)(e,["apiRef","position"]),i=function(e){var t=Object(u.a)({props:e,elements:{rootEl:!0},api:function(e){var t=e.foundation;return{getFoundation:function(){return t}}},foundation:function(e){var t=e.rootEl,n=e.emit;return new A({getAttr:function(e){return t.getProp(e)},setAttr:function(e,n){return t.setProp(e,n)},removeAttr:function(e){return t.removeProp(e)},setContent:function(e){t.setProp("icon",e)},registerInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.removeEventListener(e,n)},notifyIconAction:function(){return n("onClick",{},!0)}})}}),n=(t.foundation,Object(r.d)(t,["foundation"]));return Object(r.a)({},n)}(e).rootEl,a=Object(s.f)(e,["mdc-text-field__icon",{"mdc-text-field__icon--trailing":"trailing"===t,"mdc-text-field__icon--leading":"leading"===t}]);return o.a.createElement(c.a,Object(r.a)({},i.props(Object(r.a)(Object(r.a)({},n),{className:a}))))};V.displayName="TextFieldIcon"},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0),n(1),n(6);var r=n(17),i=function(e){return(Array.isArray(e)?e:[e]).filter((function(e){return!!e})).map((function(e){return"mdc-theme--"+Object(r.b)(e)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),i=n(1),o=n.n(i),s={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};function a(e){return Boolean(e.document)&&"function"===typeof e.document.createElement}var c=n(5),u={CLOSED_CLASS:"mdc-linear-progress--closed",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed"},l={ARIA_VALUENOW:"aria-valuenow",BUFFER_SELECTOR:".mdc-linear-progress__buffer",PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar"},d=function(e){function t(n){return e.call(this,r.a({},t.defaultAdapter,n))||this}return r.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},getBuffer:function(){return null},getPrimaryBar:function(){return null},hasClass:function(){return!1},removeAttribute:function(){},removeClass:function(){},setAttribute:function(){},setStyle:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.isDeterminate_=!this.adapter_.hasClass(u.INDETERMINATE_CLASS),this.isReversed_=this.adapter_.hasClass(u.REVERSED_CLASS),this.progress_=0,this.buffer_=1},t.prototype.setDeterminate=function(e){this.isDeterminate_=e,this.isDeterminate_?(this.adapter_.removeClass(u.INDETERMINATE_CLASS),this.adapter_.setAttribute(l.ARIA_VALUENOW,this.progress_.toString()),this.setScale_(this.adapter_.getPrimaryBar(),this.progress_),this.setScale_(this.adapter_.getBuffer(),this.buffer_)):(this.isReversed_&&(this.adapter_.removeClass(u.REVERSED_CLASS),this.adapter_.forceLayout(),this.adapter_.addClass(u.REVERSED_CLASS)),this.adapter_.addClass(u.INDETERMINATE_CLASS),this.adapter_.removeAttribute(l.ARIA_VALUENOW),this.setScale_(this.adapter_.getPrimaryBar(),1),this.setScale_(this.adapter_.getBuffer(),1))},t.prototype.setProgress=function(e){this.progress_=e,this.isDeterminate_&&(this.setScale_(this.adapter_.getPrimaryBar(),e),this.adapter_.setAttribute(l.ARIA_VALUENOW,e.toString()))},t.prototype.setBuffer=function(e){this.buffer_=e,this.isDeterminate_&&this.setScale_(this.adapter_.getBuffer(),e)},t.prototype.setReverse=function(e){this.isReversed_=e,this.isDeterminate_||(this.adapter_.removeClass(u.INDETERMINATE_CLASS),this.adapter_.forceLayout(),this.adapter_.addClass(u.INDETERMINATE_CLASS)),this.isReversed_?this.adapter_.addClass(u.REVERSED_CLASS):this.adapter_.removeClass(u.REVERSED_CLASS)},t.prototype.open=function(){this.adapter_.removeClass(u.CLOSED_CLASS)},t.prototype.close=function(){this.adapter_.addClass(u.CLOSED_CLASS)},t.prototype.setScale_=function(e,t){if(e){var n="scaleX("+t+")";this.adapter_.setStyle(e,function(e,t){if(a(e)&&t in s){var n=e.document.createElement("div"),r=s[t],i=r.standard,o=r.prefixed;return i in n.style?i:o}return t}(window,"transform"),n)}},t}(c.a),h=n(47),f=n(4),p=Object(f.b)((function(e,t){var n=e.reversed,s=e.closed,a=e.progress,c=(e.buffer,e.foundationRef,Object(r.d)(e,["reversed","closed","progress","buffer","foundationRef"])),u=Object(f.f)(e,["mdc-linear-progress",{"mdc-linear-progress--reversed":n,"mdc-linear-progress--closed":s}]),l=function(e){var t=Object(h.a)({props:e,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl;return new d({addClass:function(e){return t.addClass(e)},getPrimaryBar:function(){var e;return(null===(e=t.ref)||void 0===e?void 0:e.querySelector(d.strings.PRIMARY_BAR_SELECTOR))||null},forceLayout:function(){var e;return null===(e=t.ref)||void 0===e?void 0:e.offsetWidth},getBuffer:function(){var e;return(null===(e=t.ref)||void 0===e?void 0:e.querySelector(d.strings.BUFFER_SELECTOR))||null},hasClass:function(e){return t.hasClass(e)},removeClass:function(e){return t.removeClass(e)},setStyle:function(e,t,n){e.style[t]=n}})}}),n=t.foundation,o=Object(r.d)(t,["foundation"]),s=Object(r.c)(Object(i.useState)(void 0),2),a=s[0],c=s[1];return Object(i.useEffect)((function(){n.setProgress(e.progress||0);var t=void 0!==e.progress;t!==a&&(n.setDeterminate(t),c(t))}),[e.progress,a,n]),Object(i.useEffect)((function(){n.setBuffer(e.buffer||0)}),[e.buffer,n]),Object(i.useEffect)((function(){n.setReverse(!!e.reversed)}),[e.reversed,n]),Object(i.useEffect)((function(){e.closed?n.close():n.open()}),[e.closed,n]),Object(r.a)({foundation:n},o)}(e).rootEl;return o.a.createElement(f.a,Object(r.a)({"aria-label":"Progress Bar"},c,{"aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":a,tag:"nav",role:"progressbar",element:l,className:u,ref:t}),o.a.createElement(m,null))})),m=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mdc-linear-progress__buffering-dots"}),o.a.createElement("div",{className:"mdc-linear-progress__buffer"}),o.a.createElement("div",{className:"mdc-linear-progress__bar mdc-linear-progress__primary-bar"},o.a.createElement("div",{className:"mdc-linear-progress__bar-inner"})),o.a.createElement("div",{className:"mdc-linear-progress__bar mdc-linear-progress__secondary-bar"},o.a.createElement("div",{className:"mdc-linear-progress__bar-inner"})))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(0),i=n(1),o=n.n(i),s=n(4),a=n(25),c=n(6),u=n.n(c),l=function(e){var t=o.a.Children.only(e.children);return o.a.cloneElement(t,Object(r.a)(Object(r.a)(Object(r.a)({},e),t.props),{className:u()(e.className,t.props.className),style:Object(r.a)(Object(r.a)({},t.props.style),e.style)}))},d=n(17),h={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",transparent:"#ffffff",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},f=function(e,t,n){var r=[e,t,n].map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*r[0]+.7152*r[1]+.0722*r[2]},p=function(e){var t;return function(e){4===e.length&&(e+=e.slice(1));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}(e=h[t=e]||t)},m=function(e){var t,n,r=p(e),i=r.r,o=r.g,s=r.b;return!((n=[i,o,s],(f((t=[255,255,255])[0],t[1],t[2])+.05)/(f(n[0],n[1],n[2])+.05))>3)},g={"--mdc-theme-primary":[["--mdc-theme-on-primary",0]],"--mdc-theme-surface":[["--mdc-theme-on-surface",0]],"--mdc-theme-secondary":[["--mdc-theme-on-secondary",0]],"--mdc-theme-background":[["--mdc-theme-text-primary-on-background",0],["--mdc-theme-text-secondary-on-background",1],["--mdc-theme-text-hint-on-background",2],["--mdc-theme-text-disabled-on-background",2],["--mdc-theme-text-icon-on-background",2]]},v=["rgba(0, 0, 0, 0.87)","rgba(0, 0, 0, 0.54)","rgba(0, 0, 0, 0.38)"],y=["rgba(255, 255, 255, 1)","rgba(255, 255, 255, 0.7)","rgba(255, 255, 255, 0.5)"],b=(Object(s.b)((function(e,t){var n=e.use,i=e.wrap,c=Object(r.d)(e,["use","wrap"]),u=Object(s.f)(e,[Object(a.a)(n).join(" ")]);return i?l(Object(r.a)(Object(r.a)({},c),{ref:t,className:u})):o.a.createElement(s.a,Object(r.a)({tag:"span",theme:n},c,{ref:t,className:u}))})),Object(s.b)((function(e,t){var n,a,c=JSON.stringify(e.options),u=Object(i.useMemo)((function(){return function(e){var t=Object.keys(g).reduce((function(t,n){if(e[n]){var r=m(e[n])?v:y;g[n].forEach((function(e){t[e[0]]=r[e[1]]}))}return t}),{});return Object(r.a)(Object(r.a)({},t),e)}(Object.keys(e.options).reduce((function(t,n){var r=e.options[n];return t[n=n.startsWith("--")?n:"--mdc-theme-"+Object(d.b)(n)]=r,t}),{}))}),[c]),h=(e.options,e.style),f=void 0===h?{}:h,p=e.wrap,b=Object(r.d)(e,["options","style","wrap"]),S=Object(s.f)(e,[p&&"object"===typeof b.children&&(null===(a=null===(n=b.children)||void 0===n?void 0:n.props)||void 0===a?void 0:a.className)]),T=Object(r.a)(Object(r.a)({},f),u);return p&&b.children?l(Object(r.a)(Object(r.a)({},b),{style:T,ref:t})):o.a.createElement(s.a,Object(r.a)({},b,{style:T,className:S,ref:t}))})))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t,n,r,i=Array.isArray(e)?e[0]:e;return(null===(t=null===i||void 0===i?void 0:i.type)||void 0===t?void 0:t.displayName)||(null===(n=null===i||void 0===i?void 0:i.constructor)||void 0===n?void 0:n.displayName)||(null===i||void 0===i?void 0:i.displayName)||(null===i||void 0===i?void 0:i.name)||(null===(r=null===i||void 0===i?void 0:i.constructor)||void 0===r?void 0:r.name)||"Unknown"}},,function(e,t,n){"use strict";n(21);var r=n(1),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:o,_owner:s.current}}t.jsx=u,t.jsxs=u},function(e,t,n){"use strict";var r=n(21),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var s=60109,a=60110,c=60112;t.Suspense=60113;var u=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),o=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),s=d("react.provider"),a=d("react.context"),c=d("react.forward_ref"),t.Suspense=d("react.suspense"),u=d("react.memo"),l=d("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var S={current:null},T=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)T.call(t,r)&&!_.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===o[r]&&(o[r]=c[r]);return{$$typeof:i,type:e,key:s,ref:a,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var w=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,n,r,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case o:c=!0}}if(c)return s=s(c=e),e=""===r?"."+R(c,0):r,Array.isArray(s)?(n="",null!=e&&(n=e.replace(w,"$&/")+"/"),k(s,t,n,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(w,"$&/")+"/")+e)),t.push(s)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=r+R(a=e[u],u);c+=k(a,t,n,l,s)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),u=0;!(a=e.next()).done;)c+=k(a=a.value,t,n,l=r+R(a,u++),s);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var I={current:null};function x(){var e=I.current;if(null===e)throw Error(f(321));return e}var D={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(f(267,e));var o=r({},e.props),s=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)T.call(t,l)&&!_.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){u=Array(l);for(var d=0;d<l;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:i,type:e.type,key:s,ref:a,props:o,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return x().useCallback(e,t)},t.useContext=function(e,t){return x().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return x().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return x().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return x().useLayoutEffect(e,t)},t.useMemo=function(e,t){return x().useMemo(e,t)},t.useReducer=function(e,t,n){return x().useReducer(e,t,n)},t.useRef=function(e){return x().useRef(e)},t.useState=function(e){return x().useState(e)},t.version="17.0.1"},function(e,t,n){"use strict";var r=n(1),i=n(21),o=n(33);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var a=new Set,c={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function S(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var T=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,E=60106,C=60107,w=60108,R=60114,k=60109,A=60110,O=60112,I=60113,x=60120,D=60115,P=60116,N=60121,L=60128,M=60129,U=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var H=Symbol.for;_=H("react.element"),E=H("react.portal"),C=H("react.fragment"),w=H("react.strict_mode"),R=H("react.profiler"),k=H("react.provider"),A=H("react.context"),O=H("react.forward_ref"),I=H("react.suspense"),x=H("react.suspense_list"),D=H("react.memo"),P=H("react.lazy"),N=H("react.block"),H("react.scope"),L=H("react.opaque.id"),M=H("react.debug_trace_mode"),U=H("react.offscreen"),j=H("react.legacy_hidden")}var F,$="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=$&&e[$]||e["@@iterator"])?e:null}function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var G=!1;function V(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a])return"\n"+i[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function z(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 22:return e=V(e.type._render,!1);case 1:return e=V(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case E:return"Portal";case R:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case x:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return W(e.type);case N:return W(e._render);case P:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&S(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ue(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ve=(ge=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Se=["Webkit","ms","Moz","O"];function Te(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Te(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){Se.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ce(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Re(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ae=null,Oe=null;function Ie(e){if(e=ei(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=ni(t),ke(e.stateNode,e.type,t))}}function xe(e){Ae?Oe?Oe.push(e):Oe=[e]:Ae=e}function De(){if(Ae){var e=Ae,t=Oe;if(Oe=Ae=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Pe(e,t){return e(t)}function Ne(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Pe,Ue=!1,je=!1;function He(){null===Ae&&null===Oe||(Le(),De())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=ni(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var $e=!1;if(d)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){$e=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ge){$e=!1}function Be(e,t,n,r,i,o,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Ge=!1,Ve=null,ze=!1,We=null,Ke={onError:function(e){Ge=!0,Ve=e}};function Ye(e,t,n,r,i,o,s,a,c){Ge=!1,Ve=null,Be.apply(Ke,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(Je(e)!==e)throw Error(s(188))}function Ze(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qe(i),e;if(o===r)return Qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,st=[],at=null,ct=null,ut=null,lt=new Map,dt=new Map,ht=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":ct=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=pt(t,n,r,i,o),null!==t&&(null!==(t=ei(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vt(e){var t=Zr(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ei(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function St(){for(ot=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ei(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==at&&yt(at)&&(at=null),null!==ct&&yt(ct)&&(ct=null),null!==ut&&yt(ut)&&(ut=null),lt.forEach(bt),dt.forEach(bt)}function Tt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,St)))}function _t(e){function t(t){return Tt(t,e)}if(0<st.length){Tt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&Tt(at,e),null!==ct&&Tt(ct,e),null!==ut&&Tt(ut,e),lt.forEach(t),dt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)vt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ct={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},wt={},Rt={};function kt(e){if(wt[e])return wt[e];if(!Ct[e])return e;var t,n=Ct[e];for(t in n)if(n.hasOwnProperty(t)&&t in Rt)return wt[e]=n[t];return e}d&&(Rt=document.createElement("div").style,"AnimationEvent"in window||(delete Ct.animationend.animation,delete Ct.animationiteration.animation,delete Ct.animationstart.animation),"TransitionEvent"in window||delete Ct.transitionend.transition);var At=kt("animationend"),Ot=kt("animationiteration"),It=kt("animationstart"),xt=kt("transitionend"),Dt=new Map,Pt=new Map,Nt=["abort","abort",At,"animationEnd",Ot,"animationIteration",It,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Dt.set(r,i),u(i,[r])}}(0,o.unstable_now)();var Mt=8;function Ut(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,o=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(0!==o)r=o,i=Mt=15;else if(0!==(o=134217727&n)){var c=o&~s;0!==c?(r=Ut(c),i=Mt):0!==(a&=o)&&(r=Ut(a),i=Mt)}else 0!==(o=n&~s)?(r=Ut(o),i=Mt):0!==a&&(r=Ut(a),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Gt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&s)){if(Ut(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Gt(t)),r|=e[n],t&=~i;return r}function Ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=$t(24&~t))?Ft(10,t):e;case 10:return 0===(e=$t(192&~t))?Ft(8,t):e;case 8:return 0===(e=$t(3584&~t))&&(0===(e=$t(4186112&~t))&&(e=512)),e;case 2:return 0===(t=$t(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function $t(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/zt|0)|0},Vt=Math.log,zt=Math.LN2;var Wt=o.unstable_UserBlockingPriority,Kt=o.unstable_runWithPriority,Yt=!0;function Jt(e,t,n,r){Ue||Le();var i=Qt,o=Ue;Ue=!0;try{Ne(i,e,t,n,r)}finally{(Ue=o)||He()}}function Xt(e,t,n,r){Kt(Wt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<st.length&&-1<ft.indexOf(e))e=pt(null,e,t,n,r),st.push(e);else{var o=Zt(e,t,n,r);if(null===o)i&&mt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=pt(o,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=gt(at,e,t,n,r,i),!0;case"dragenter":return ct=gt(ct,e,t,n,r,i),!0;case"mouseover":return ut=gt(ut,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return lt.set(o,gt(lt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,dt.set(o,gt(dt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;mt(e,r)}Dr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Re(r);if(null!==(i=Zr(i))){var o=Je(i);if(null===o)i=null;else{var s=o.tag;if(13===s){if(null!==(i=Xe(o)))return i;i=null}else if(3===s){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function an(){return!1}function cn(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var un,ln,dn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=cn(hn),pn=i({},hn,{view:0,detail:0}),mn=cn(pn),gn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(un=e.screenX-dn.screenX,ln=e.screenY-dn.screenY):ln=un=0,dn=e),un)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),vn=cn(gn),yn=cn(i({},gn,{dataTransfer:0})),bn=cn(i({},pn,{relatedTarget:0})),Sn=cn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),Tn=cn(i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),_n=cn(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function kn(){return Rn}var An=cn(i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),On=cn(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=cn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),xn=cn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=cn(i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Pn=[9,13,27,32],Nn=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var Mn=d&&"TextEvent"in window&&!Ln,Un=d&&(!Nn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Hn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Vn(e,t,n,r){xe(r),0<(t=Nr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,Wn=null;function Kn(e){Rr(e,0)}function Yn(e){if(X(ti(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Qn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;Xn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){zn&&(zn.detachEvent("onpropertychange",nr),Wn=zn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];if(Vn(t,Wn,e,Re(e)),e=Kn,Ue)e(t);else{Ue=!0;try{Pe(e,t)}finally{Ue=!1,He()}}}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(zn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},cr=Object.prototype.hasOwnProperty;function ur(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!cr.call(t,n[r])||!ar(e[n[r]],t[n[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Nr(vr,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Nt,2);for(var Tr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<Tr.length;_r++)Pt.set(Tr[_r],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function wr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,u){if(Ye.apply(this,arguments),Ge){if(!Ge)throw Error(s(198));var l=Ve;Ge=!1,Ve=null,ze||(ze=!0,We=l)}}(r,t,void 0,e),e.currentTarget=null}function Rr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;wr(i,a,u),o=c}else for(s=0;s<r.length;s++){if(c=(a=r[s]).instance,u=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;wr(i,a,u),o=c}}}if(ze)throw e=We,ze=!1,We=null,e}function kr(e,t){var n=ri(t),r=e+"__bubble";n.has(r)||(xr(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Ar]||(e[Ar]=!0,a.forEach((function(t){Cr.has(t)||Ir(t,!1,e,null),Ir(t,!0,e,null)})))}function Ir(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;i|=2,o=r}var s=ri(o),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(i|=4),xr(o,e,i,t),s.add(a))}function xr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!$e||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=Zr(a)))return;if(5===(c=s.tag)||6===c){r=o=s;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(je)return e(t,n);je=!0;try{Me(e,t,n)}finally{je=!1,He()}}((function(){var r=o,i=Re(n),s=[];e:{var a=Dt.get(e);if(void 0!==a){var c=fn,u=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":c=An;break;case"focusin":u="focus",c=bn;break;case"focusout":u="blur",c=bn;break;case"beforeblur":case"afterblur":c=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=In;break;case At:case Ot:case It:c=Sn;break;case xt:c=xn;break;case"scroll":c=mn;break;case"wheel":c=Dn;break;case"copy":case"cut":case"paste":c=Tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=On}var l=0!==(4&t),d=!l&&"scroll"===e,h=l?null!==a?a+"Capture":null:a;l=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Fe(p,h))&&l.push(Pr(p,m,f)))),d)break;p=p.return}0<l.length&&(a=new c(a,u,null,n,i),s.push({event:a,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=n.relatedTarget||n.fromElement)||!Zr(u)&&!u[Xr])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Zr(u):null)&&(u!==(d=Je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=vn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==c?a:ti(c),f=null==u?a:ti(u),(a=new l(m,p+"leave",c,n,i)).target=d,a.relatedTarget=f,m=null,Zr(i)===r&&((l=new l(h,p+"enter",u,n,i)).target=f,l.relatedTarget=d,m=l),d=m,c&&u)e:{for(h=u,p=0,f=l=c;f;f=Lr(f))p++;for(f=0,m=h;m;m=Lr(m))f++;for(;0<p-f;)l=Lr(l),p--;for(;0<f-p;)h=Lr(h),f--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Lr(l),h=Lr(h)}l=null}else l=null;null!==c&&Mr(s,a,c,l,!1),null!==u&&null!==d&&Mr(s,d,u,l,!0)}if("select"===(c=(a=r?ti(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Jn;else if(Gn(a))if(Xn)g=sr;else{g=ir;var v=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Vn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ie(a,"number",a.value)),v=r?ti(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,Sr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Sr(s,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,qn=!0)),0<(v=Nr(r,b)).length&&(b=new _n(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=$n(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Hn=!0,jn);case"textInput":return(e=t.data)===jn&&Hn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Nn&&Fn(e,t)?(e=rn(),nn=tn=en=null,qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Nr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Rr(s,t)}))}function Pr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Fe(e,n))&&r.unshift(Pr(e,o,i)),null!=(o=Fe(e,t))&&r.push(Pr(e,o,i))),e=e.return}return r}function Lr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Mr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(c=Fe(n,o))&&s.unshift(Pr(n,c,a)):i||null!=(c=Fe(n,o))&&s.push(Pr(n,c,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}function Ur(){}var jr=null,Hr=null;function Fr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function $r(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var qr="function"===typeof setTimeout?setTimeout:void 0,Br="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Vr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function zr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Wr=0;var Kr=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Kr,Jr="__reactProps$"+Kr,Xr="__reactContainer$"+Kr,Qr="__reactEvents$"+Kr;function Zr(e){var t=e[Yr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xr]||n[Yr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=zr(e);null!==e;){if(n=e[Yr])return n;e=zr(e)}return t}n=(e=n).parentNode}return null}function ei(e){return!(e=e[Yr]||e[Xr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ti(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ni(e){return e[Jr]||null}function ri(e){var t=e[Qr];return void 0===t&&(t=e[Qr]=new Set),t}var ii=[],oi=-1;function si(e){return{current:e}}function ai(e){0>oi||(e.current=ii[oi],ii[oi]=null,oi--)}function ci(e,t){oi++,ii[oi]=e.current,e.current=t}var ui={},li=si(ui),di=si(!1),hi=ui;function fi(e,t){var n=e.type.contextTypes;if(!n)return ui;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mi(){ai(di),ai(li)}function gi(e,t,n){if(li.current!==ui)throw Error(s(168));ci(li,t),ci(di,n)}function vi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,W(t)||"Unknown",o));return i({},n,r)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ui,hi=li.current,ci(li,e),ci(di,di.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=vi(e,t,hi),r.__reactInternalMemoizedMergedChildContext=e,ai(di),ai(li),ci(li,e)):ai(di),ci(di,n)}var Si=null,Ti=null,_i=o.unstable_runWithPriority,Ei=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,wi=o.unstable_shouldYield,Ri=o.unstable_requestPaint,ki=o.unstable_now,Ai=o.unstable_getCurrentPriorityLevel,Oi=o.unstable_ImmediatePriority,Ii=o.unstable_UserBlockingPriority,xi=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Ni={},Li=void 0!==Ri?Ri:function(){},Mi=null,Ui=null,ji=!1,Hi=ki(),Fi=1e4>Hi?ki:function(){return ki()-Hi};function $i(){switch(Ai()){case Oi:return 99;case Ii:return 98;case xi:return 97;case Di:return 96;case Pi:return 95;default:throw Error(s(332))}}function qi(e){switch(e){case 99:return Oi;case 98:return Ii;case 97:return xi;case 96:return Di;case 95:return Pi;default:throw Error(s(332))}}function Bi(e,t){return e=qi(e),_i(e,t)}function Gi(e,t,n){return e=qi(e),Ei(e,t,n)}function Vi(){if(null!==Ui){var e=Ui;Ui=null,Ci(e)}zi()}function zi(){if(!ji&&null!==Mi){ji=!0;var e=0;try{var t=Mi;Bi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Mi=null}catch(n){throw null!==Mi&&(Mi=Mi.slice(e+1)),Ei(Oi,Vi),n}finally{ji=!1}}}var Wi=T.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Yi=si(null),Ji=null,Xi=null,Qi=null;function Zi(){Qi=Xi=Ji=null}function eo(e){var t=Yi.current;ai(Yi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function no(e,t){Ji=e,Qi=Xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ns=!0),e.firstContext=null)}function ro(e,t){if(Qi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Qi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Xi){if(null===Ji)throw Error(s(308));Xi=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else Xi=Xi.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function so(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ao(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function co(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var o=e.updateQueue;io=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,c=o.shared.pending;if(null!==c){o.shared.pending=null;var u=c,l=u.next;u.next=null,null===a?s=l:a.next=l,a=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==a&&(null===h?d.firstBaseUpdate=l:h.next=l,d.lastBaseUpdate=u)}}if(null!==s){for(h=o.baseState,a=0,d=l=u=null;;){c=s.lane;var f=s.eventTime;if((r&c)===c){null!==d&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(c=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,c);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(c="function"===typeof(p=m.payload)?p.call(f,h,c):p)||void 0===c)break e;h=i({},h,c);break e;case 2:io=!0}}null!==s.callback&&(e.flags|=32,null===(c=o.effects)?o.effects=[s]:c.push(s))}else f={eventTime:f,lane:c,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(l=d=f,u=h):d=d.next=f,a|=c;if(null===(s=s.next)){if(null===(c=o.shared.pending))break;s=c.next,c.next=null,o.lastBaseUpdate=c,o.shared.pending=null}}null===d&&(u=h),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=d,ja|=a,e.lanes=a,e.memoizedState=h}}function ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var fo=(new r.Component).refs;function po(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=uc(),i=lc(e),o=ao(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),co(e,o),dc(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=uc(),i=lc(e),o=ao(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),co(e,o),dc(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=uc(),r=lc(e),i=ao(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),co(e,i),dc(e,r,n)}};function go(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function vo(e,t,n){var r=!1,i=ui,o=t.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=pi(t)?hi:li.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?fi(e,i):ui),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function yo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function bo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=fo,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=pi(t)?hi:li.current,i.context=fi(e,o)),lo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(po(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&mo.enqueueReplaceState(i,i.state,null),lo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var So=Array.isArray;function To(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===fo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function _o(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Eo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Bc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Wc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=To(e,t,n),r.return=e,r):((r=Gc(n.type,n.key,n.props,null,e.mode,r)).ref=To(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Vc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Wc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Gc(t.type,t.key,t.props,null,e.mode,n)).ref=To(e,null,t),n.return=e,n;case E:return(t=Kc(t,e.mode,n)).return=e,t}if(So(t)||q(t))return(t=Vc(t,e.mode,n,null)).return=e,t;_o(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===C?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null}if(So(n)||q(n))return null!==i?null:d(e,t,n,r,null);_o(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===C?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(So(r)||q(r))return d(t,e=e.get(n)||null,r,i,null);_o(t,r)}return null}function m(i,s,a,c){for(var u=null,l=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],c);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===l?u=v:l.sibling=v,l=v,d=g}if(m===a.length)return n(i,d),u;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],c))&&(s=o(d,s,m),null===l?u=d:l.sibling=d,l=d);return u}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===l?u=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(i,e)})),u}function g(i,a,c,u){var l=q(c);if("function"!==typeof l)throw Error(s(150));if(null==(c=l.call(c)))throw Error(s(151));for(var d=l=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,u);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?l=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),l;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=h(i,y.value,u))&&(a=o(y,a,g),null===d?l=y:d.sibling=y,d=y);return l}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?l=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,o,c){var u="object"===typeof o&&null!==o&&o.type===C&&null===o.key;u&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case _:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){switch(u.tag){case 7:if(o.type===C){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=To(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===C?((r=Vc(o.props.children,e.mode,c,o.key)).return=e,e=r):((c=Gc(o.type,o.key,o.props,null,e.mode,c)).ref=To(e,r,o),c.return=e,e=c)}return a(e);case E:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Kc(o,e.mode,c)).return=e,e=r}return a(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Wc(o,e.mode,c)).return=e,e=r),a(e);if(So(o))return m(e,r,o,c);if(q(o))return g(e,r,o,c);if(l&&_o(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,W(e.type)||"Component"))}return n(e,r)}}var Co=Eo(!0),wo=Eo(!1),Ro={},ko=si(Ro),Ao=si(Ro),Oo=si(Ro);function Io(e){if(e===Ro)throw Error(s(174));return e}function xo(e,t){switch(ci(Oo,t),ci(Ao,e),ci(ko,Ro),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ai(ko),ci(ko,t)}function Do(){ai(ko),ai(Ao),ai(Oo)}function Po(e){Io(Oo.current);var t=Io(ko.current),n=pe(t,e.type);t!==n&&(ci(Ao,e),ci(ko,n))}function No(e){Ao.current===e&&(ai(ko),ai(Ao))}var Lo=si(0);function Mo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uo=null,jo=null,Ho=!1;function Fo(e,t){var n=$c(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function $o(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function qo(e){if(Ho){var t=jo;if(t){var n=t;if(!$o(e,t)){if(!(t=Vr(n.nextSibling))||!$o(e,t))return e.flags=-1025&e.flags|2,Ho=!1,void(Uo=e);Fo(Uo,n)}Uo=e,jo=Vr(t.firstChild)}else e.flags=-1025&e.flags|2,Ho=!1,Uo=e}}function Bo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Uo=e}function Go(e){if(e!==Uo)return!1;if(!Ho)return Bo(e),Ho=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!$r(t,e.memoizedProps))for(t=jo;t;)Fo(e,t),t=Vr(t.nextSibling);if(Bo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){jo=Vr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}jo=null}}else jo=Uo?Vr(e.stateNode.nextSibling):null;return!0}function Vo(){jo=Uo=null,Ho=!1}var zo=[];function Wo(){for(var e=0;e<zo.length;e++)zo[e]._workInProgressVersionPrimary=null;zo.length=0}var Ko=T.ReactCurrentDispatcher,Yo=T.ReactCurrentBatchConfig,Jo=0,Xo=null,Qo=null,Zo=null,es=!1,ts=!1;function ns(){throw Error(s(321))}function rs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function is(e,t,n,r,i,o){if(Jo=o,Xo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ko.current=null===e||null===e.memoizedState?Is:xs,e=n(r,i),ts){o=0;do{if(ts=!1,!(25>o))throw Error(s(301));o+=1,Zo=Qo=null,t.updateQueue=null,Ko.current=Ds,e=n(r,i)}while(ts)}if(Ko.current=Os,t=null!==Qo&&null!==Qo.next,Jo=0,Zo=Qo=Xo=null,es=!1,t)throw Error(s(300));return e}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zo?Xo.memoizedState=Zo=e:Zo=Zo.next=e,Zo}function ss(){if(null===Qo){var e=Xo.alternate;e=null!==e?e.memoizedState:null}else e=Qo.next;var t=null===Zo?Xo.memoizedState:Zo.next;if(null!==t)Zo=t,Qo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Qo=e).memoizedState,baseState:Qo.baseState,baseQueue:Qo.baseQueue,queue:Qo.queue,next:null},null===Zo?Xo.memoizedState=Zo=e:Zo=Zo.next=e}return Zo}function as(e,t){return"function"===typeof t?t(e):t}function cs(e){var t=ss(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Qo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=a=o=null,u=i;do{var l=u.lane;if((Jo&l)===l)null!==c&&(c=c.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(a=c=d,o=r):c=c.next=d,Xo.lanes|=l,ja|=l}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=a,ar(r,t.memoizedState)||(Ns=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function us(e){var t=ss(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(Ns=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ls(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Jo&e)===e)&&(t._workInProgressVersionPrimary=r,zo.push(t))),e)return n(t._source);throw zo.push(t),Error(s(350))}function ds(e,t,n,r){var i=Ia;if(null===i)throw Error(s(349));var o=t._getVersion,a=o(t._source),c=Ko.current,u=c.useState((function(){return ls(i,t,n)})),l=u[1],d=u[0];u=Zo;var h=e.memoizedState,f=h.refs,p=f.getSnapshot,m=h.source;h=h.subscribe;var g=Xo;return e.memoizedState={refs:f,source:t,subscribe:r},c.useEffect((function(){f.getSnapshot=n,f.setSnapshot=l;var e=o(t._source);if(!ar(a,e)){e=n(t._source),ar(d,e)||(l(e),e=lc(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var c=31-Gt(s),u=1<<c;r[c]|=e,s&=~u}}}),[n,t,r]),c.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=lc(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),ar(p,n)&&ar(m,t)&&ar(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:as,lastRenderedState:d}).dispatch=l=As.bind(null,Xo,e),u.queue=e,u.baseQueue=null,d=ls(i,t,n),u.memoizedState=u.baseState=d),d}function hs(e,t,n){return ds(ss(),e,t,n)}function fs(e){var t=os();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:as,lastRenderedState:e}).dispatch=As.bind(null,Xo,e),[t.memoizedState,e]}function ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Xo.updateQueue)?(t={lastEffect:null},Xo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ms(e){return e={current:e},os().memoizedState=e}function gs(){return ss().memoizedState}function vs(e,t,n,r){var i=os();Xo.flags|=e,i.memoizedState=ps(1|t,n,void 0,void 0===r?null:r)}function ys(e,t,n,r){var i=ss();r=void 0===r?null:r;var o=void 0;if(null!==Qo){var s=Qo.memoizedState;if(o=s.destroy,null!==r&&rs(r,s.deps))return void ps(t,n,o,r)}Xo.flags|=e,i.memoizedState=ps(1|t,n,o,r)}function bs(e,t){return vs(516,4,e,t)}function Ss(e,t){return ys(516,4,e,t)}function Ts(e,t){return ys(4,2,e,t)}function _s(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Es(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ys(4,2,_s.bind(null,t,e),n)}function Cs(){}function ws(e,t){var n=ss();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&rs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Rs(e,t){var n=ss();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&rs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ks(e,t){var n=$i();Bi(98>n?98:n,(function(){e(!0)})),Bi(97<n?97:n,(function(){var n=Yo.transition;Yo.transition=1;try{e(!1),t()}finally{Yo.transition=n}}))}function As(e,t,n){var r=uc(),i=lc(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?o.next=o:(o.next=s.next,s.next=o),t.pending=o,s=e.alternate,e===Xo||null!==s&&s===Xo)ts=es=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,c=s(a,n);if(o.eagerReducer=s,o.eagerState=c,ar(c,a))return}catch(u){}dc(e,i,r)}}var Os={readContext:ro,useCallback:ns,useContext:ns,useEffect:ns,useImperativeHandle:ns,useLayoutEffect:ns,useMemo:ns,useReducer:ns,useRef:ns,useState:ns,useDebugValue:ns,useDeferredValue:ns,useTransition:ns,useMutableSource:ns,useOpaqueIdentifier:ns,unstable_isNewReconciler:!1},Is={readContext:ro,useCallback:function(e,t){return os().memoizedState=[e,void 0===t?null:t],e},useContext:ro,useEffect:bs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,vs(4,2,_s.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4,2,e,t)},useMemo:function(e,t){var n=os();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=os();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=As.bind(null,Xo,e),[r.memoizedState,e]},useRef:ms,useState:fs,useDebugValue:Cs,useDeferredValue:function(e){var t=fs(e),n=t[0],r=t[1];return bs((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=fs(!1),t=e[0];return ms(e=ks.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=os();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ds(r,e,t,n)},useOpaqueIdentifier:function(){if(Ho){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Wr++).toString(36))),Error(s(355))})),n=fs(t)[1];return 0===(2&Xo.mode)&&(Xo.flags|=516,ps(5,(function(){n("r:"+(Wr++).toString(36))}),void 0,null)),t}return fs(t="r:"+(Wr++).toString(36)),t},unstable_isNewReconciler:!1},xs={readContext:ro,useCallback:ws,useContext:ro,useEffect:Ss,useImperativeHandle:Es,useLayoutEffect:Ts,useMemo:Rs,useReducer:cs,useRef:gs,useState:function(){return cs(as)},useDebugValue:Cs,useDeferredValue:function(e){var t=cs(as),n=t[0],r=t[1];return Ss((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=cs(as)[0];return[gs().current,e]},useMutableSource:hs,useOpaqueIdentifier:function(){return cs(as)[0]},unstable_isNewReconciler:!1},Ds={readContext:ro,useCallback:ws,useContext:ro,useEffect:Ss,useImperativeHandle:Es,useLayoutEffect:Ts,useMemo:Rs,useReducer:us,useRef:gs,useState:function(){return us(as)},useDebugValue:Cs,useDeferredValue:function(e){var t=us(as),n=t[0],r=t[1];return Ss((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=us(as)[0];return[gs().current,e]},useMutableSource:hs,useOpaqueIdentifier:function(){return us(as)[0]},unstable_isNewReconciler:!1},Ps=T.ReactCurrentOwner,Ns=!1;function Ls(e,t,n,r){t.child=null===e?wo(t,null,n,r):Co(t,e.child,n,r)}function Ms(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=is(e,t,n,r,o,i),null===e||Ns?(t.flags|=1,Ls(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,na(e,t,i))}function Us(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!==typeof s||qc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,js(e,t,s,r,i,o))}return s=e.child,0===(i&o)&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:ur)(i,r)&&e.ref===t.ref)?na(e,t,o):(t.flags|=1,(e=Bc(s,r)).ref=t.ref,e.return=t,t.child=e)}function js(e,t,n,r,i,o){if(null!==e&&ur(e.memoizedProps,r)&&e.ref===t.ref){if(Ns=!1,0===(o&i))return t.lanes=e.lanes,na(e,t,o);0!==(16384&e.flags)&&(Ns=!0)}return $s(e,t,n,r,o)}function Hs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bc(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bc(t,e),null;t.memoizedState={baseLanes:0},bc(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,bc(t,r);return Ls(e,t,i,n),t.child}function Fs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function $s(e,t,n,r,i){var o=pi(n)?hi:li.current;return o=fi(t,o),no(t,i),n=is(e,t,n,r,o,i),null===e||Ns?(t.flags|=1,Ls(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,na(e,t,i))}function qs(e,t,n,r,i){if(pi(n)){var o=!0;yi(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vo(t,n,r),bo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ro(u):u=fi(t,u=pi(n)?hi:li.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==u)&&yo(t,s,r,u),io=!1;var h=t.memoizedState;s.state=h,lo(t,r,s,i),c=t.memoizedState,a!==r||h!==c||di.current||io?("function"===typeof l&&(po(t,n,l,r),c=t.memoizedState),(a=io||go(t,n,a,r,h,c,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4)):("function"===typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4),r=!1)}else{s=t.stateNode,so(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ki(t.type,a),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=ro(c):c=fi(t,c=pi(n)?hi:li.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==c)&&yo(t,s,r,c),io=!1,h=t.memoizedState,s.state=h,lo(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||di.current||io?("function"===typeof f&&(po(t,n,f,r),p=t.memoizedState),(u=io||go(t,n,u,r,h,p,c))?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=c,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Bs(e,t,n,r,o,i)}function Bs(e,t,n,r,i,o){Fs(e,t);var s=0!==(64&t.flags);if(!r&&!s)return i&&bi(t,n,!1),na(e,t,o);r=t.stateNode,Ps.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,a,o)):Ls(e,t,a,o),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Gs(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),xo(e,t.containerInfo)}var Vs,zs,Ws,Ks={dehydrated:null,retryLane:0};function Ys(e,t,n){var r,i=t.pendingProps,o=Lo.current,s=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ci(Lo,1&o),null===e?(void 0!==i.fallback&&qo(t),e=i.children,o=i.fallback,s?(e=Js(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ks,e):"number"===typeof i.unstable_expectedLoadTime?(e=Js(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ks,t.lanes=33554432,e):((n=zc({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,s?(i=Qs(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=Ks,i):(n=Xs(e,t,i.children,n),t.memoizedState=null,n))}function Js(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=zc(t,i,0,null),n=Vc(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Xs(e,t,n,r){var i=e.child;return e=i.sibling,n=Bc(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Qs(e,t,n,r,i){var o=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:n};return 0===(2&o)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=a,null!==(s=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Bc(s,a),null!==e?r=Bc(e,r):(r=Vc(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Zs(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),to(e.return,t)}function ea(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.lastEffect=o)}function ta(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ls(e,t,r.children,n),0!==(2&(r=Lo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Zs(e,n);else if(19===e.tag)Zs(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(Lo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Mo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ea(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Mo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ea(t,!0,n,null,o,t.lastEffect);break;case"together":ea(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function na(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ja|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Bc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ra(e,t){if(!Ho)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ia(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pi(t.type)&&mi(),null;case 3:return Do(),ai(di),ai(li),Wo(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Go(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:No(t);var o=Io(Oo.current);if(n=t.type,null!==e&&null!=t.stateNode)zs(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Io(ko.current),Go(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Yr]=t,r[Jr]=a,n){case"dialog":kr("cancel",r),kr("close",r);break;case"iframe":case"object":case"embed":kr("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)kr(Er[e],r);break;case"source":kr("error",r);break;case"img":case"image":case"link":kr("error",r),kr("load",r);break;case"details":kr("toggle",r);break;case"input":ee(r,a),kr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},kr("invalid",r);break;case"textarea":ce(r,a),kr("invalid",r)}for(var u in Ce(n,a),e=null,a)a.hasOwnProperty(u)&&(o=a[u],"children"===u?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):c.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&kr("scroll",r));switch(n){case"input":J(r),re(r,a,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,e===de&&(e=fe(n)),e===de?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Yr]=t,e[Jr]=r,Vs(e,t),t.stateNode=e,u=we(n,r),n){case"dialog":kr("cancel",e),kr("close",e),o=r;break;case"iframe":case"object":case"embed":kr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Er.length;o++)kr(Er[o],e);o=r;break;case"source":kr("error",e),o=r;break;case"img":case"image":case"link":kr("error",e),kr("load",e),o=r;break;case"details":kr("toggle",e),o=r;break;case"input":ee(e,r),o=Z(e,r),kr("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),kr("invalid",e);break;case"textarea":ce(e,r),o=ae(e,r),kr("invalid",e);break;default:o=r}Ce(n,o);var l=o;for(a in l)if(l.hasOwnProperty(a)){var d=l[a];"style"===a?_e(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ve(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&ye(e,d):"number"===typeof d&&ye(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(c.hasOwnProperty(a)?null!=d&&"onScroll"===a&&kr("scroll",e):null!=d&&S(e,a,d,u))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?se(e,!!r.multiple,a,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Ur)}Fr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ws(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Io(Oo.current),Io(ko.current),Go(t)?(r=t.stateNode,n=t.memoizedProps,r[Yr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yr]=t,t.stateNode=r)}return null;case 13:return ai(Lo),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Go(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Lo.current)?0===La&&(La=3):(0!==La&&3!==La||(La=4),null===Ia||0===(134217727&ja)&&0===(134217727&Ha)||mc(Ia,Da))),(r||n)&&(t.flags|=4),null);case 4:return Do(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return eo(t),null;case 17:return pi(t.type)&&mi(),null;case 19:if(ai(Lo),null===(r=t.memoizedState))return null;if(a=0!==(64&t.flags),null===(u=r.rendering))if(a)ra(r,!1);else{if(0!==La||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Mo(e))){for(t.flags|=64,ra(r,!1),null!==(a=u.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ci(Lo,1&Lo.current|2),t.child}e=e.sibling}null!==r.tail&&Fi()>Ba&&(t.flags|=64,a=!0,ra(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Mo(u))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ra(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!Ho)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Fi()-r.renderingStartTime>Ba&&1073741824!==n&&(t.flags|=64,a=!0,ra(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Fi(),n.sibling=null,t=Lo.current,ci(Lo,a?1&t|2:1&t),n):null;case 23:case 24:return Sc(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function oa(e){switch(e.tag){case 1:pi(e.type)&&mi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Do(),ai(di),ai(li),Wo(),0!==(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return No(e),null;case 13:return ai(Lo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ai(Lo),null;case 4:return Do(),null;case 10:return eo(e),null;case 23:case 24:return Sc(),null;default:return null}}function sa(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function aa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Vs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},zs=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Io(ko.current);var s,a=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),a=[];break;case"option":o=oe(e,o),r=oe(e,r),a=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":o=ae(e,o),r=ae(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(d in Ce(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var u=o[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(c.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var l=r[d];if(u=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&l!==u&&(null!=l||null!=u))if("style"===d)if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(c.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&kr("scroll",e),a||u===l||(a=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(a=a||[]).push(d,l))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Ws=function(e,t,n,r){n!==r&&(t.flags|=4)};var ca="function"===typeof WeakMap?WeakMap:Map;function ua(e,t,n){(n=ao(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wa||(Wa=!0,Ka=r),aa(0,t)},n}function la(e,t,n){(n=ao(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return aa(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ya?Ya=new Set([this]):Ya.add(this),aa(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var da="function"===typeof WeakSet?WeakSet:Set;function ha(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Uc(e,n)}else t.current=null}function fa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ki(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function pa(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Nc(n,e),Pc(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ki(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ho(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ho(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Fr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function ma(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=Te("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ga(e,t){if(Ti&&"function"===typeof Ti.onCommitFiberUnmount)try{Ti.onCommitFiberUnmount(Si,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Nc(t,n);else{r=t;try{i()}catch(o){Uc(r,o)}}n=n.next}while(n!==e)}break;case 1:if(ha(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Uc(t,o)}break;case 5:ha(t);break;case 4:_a(e,t)}}function va(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ya(e){return 5===e.tag||3===e.tag||4===e.tag}function ba(e){e:{for(var t=e.return;null!==t;){if(ya(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ya(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Sa(e,n,t):Ta(e,n,t)}function Sa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function Ta(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ta(e,t,n),e=e.sibling;null!==e;)Ta(e,t,n),e=e.sibling}function _a(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(s(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,c=i,u=c;;)if(ga(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,c=i.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ga(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ea(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),we(e,i),t=we(e,r),i=0;i<o.length;i+=2){var a=o[i],c=o[i+1];"style"===a?_e(n,c):"dangerouslySetInnerHTML"===a?ve(n,c):"children"===a?ye(n,c):S(n,a,c,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?se(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(n,!!r.multiple,r.defaultValue,!0):se(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(qa=Fi(),ma(t.child,!0)),void Ca(t);case 19:return void Ca(t);case 17:return;case 23:case 24:return void ma(t,null!==t.memoizedState)}throw Error(s(163))}function Ca(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new da),t.forEach((function(t){var r=Hc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function wa(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ra=Math.ceil,ka=T.ReactCurrentDispatcher,Aa=T.ReactCurrentOwner,Oa=0,Ia=null,xa=null,Da=0,Pa=0,Na=si(0),La=0,Ma=null,Ua=0,ja=0,Ha=0,Fa=0,$a=null,qa=0,Ba=1/0;function Ga(){Ba=Fi()+500}var Va,za=null,Wa=!1,Ka=null,Ya=null,Ja=!1,Xa=null,Qa=90,Za=[],ec=[],tc=null,nc=0,rc=null,ic=-1,oc=0,sc=0,ac=null,cc=!1;function uc(){return 0!==(48&Oa)?Fi():-1!==ic?ic:ic=Fi()}function lc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===$i()?1:2;if(0===oc&&(oc=Ua),0!==Wi.transition){0!==sc&&(sc=null!==$a?$a.pendingLanes:0),e=oc;var t=4186112&~sc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=$i(),0!==(4&Oa)&&98===e?e=Ft(12,oc):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),oc),e}function dc(e,t,n){if(50<nc)throw nc=0,rc=null,Error(s(185));if(null===(e=hc(e,t)))return null;Bt(e,t,n),e===Ia&&(Ha|=t,4===La&&mc(e,Da));var r=$i();1===t?0!==(8&Oa)&&0===(48&Oa)?gc(e):(fc(e,n),0===Oa&&(Ga(),Vi())):(0===(4&Oa)||98!==r&&99!==r||(null===tc?tc=new Set([e]):tc.add(e)),fc(e,n)),$a=e}function hc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function fc(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-Gt(a),u=1<<c,l=o[c];if(-1===l){if(0===(u&r)||0!==(u&i)){l=t,Ut(u);var d=Mt;o[c]=10<=d?l+250:6<=d?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=jt(e,e===Ia?Da:0),t=Mt,0===r)null!==n&&(n!==Ni&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ni&&Ci(n)}15===t?(n=gc.bind(null,e),null===Mi?(Mi=[n],Ui=Ei(Oi,zi)):Mi.push(n),n=Ni):14===t?n=Gi(99,gc.bind(null,e)):n=Gi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),pc.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function pc(e){if(ic=-1,sc=oc=0,0!==(48&Oa))throw Error(s(327));var t=e.callbackNode;if(Dc()&&e.callbackNode!==t)return null;var n=jt(e,e===Ia?Da:0);if(0===n)return null;var r=n,i=Oa;Oa|=16;var o=Ec();for(Ia===e&&Da===r||(Ga(),Tc(e,r));;)try{Rc();break}catch(c){_c(e,c)}if(Zi(),ka.current=o,Oa=i,null!==xa?r=0:(Ia=null,Da=0,r=La),0!==(Ua&Ha))Tc(e,0);else if(0!==r){if(2===r&&(Oa|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ht(e))&&(r=Cc(e,n))),1===r)throw t=Ma,Tc(e,0),mc(e,n),fc(e,Fi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(s(345));case 2:Oc(e);break;case 3:if(mc(e,n),(62914560&n)===n&&10<(r=qa+500-Fi())){if(0!==jt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){uc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qr(Oc.bind(null,e),r);break}Oc(e);break;case 4:if(mc(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Gt(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Fi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ra(n/1960))-n)){e.timeoutHandle=qr(Oc.bind(null,e),n);break}Oc(e);break;case 5:Oc(e);break;default:throw Error(s(329))}}return fc(e,Fi()),e.callbackNode===t?pc.bind(null,e):null}function mc(e,t){for(t&=~Fa,t&=~Ha,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),r=1<<n;e[n]=-1,t&=~r}}function gc(e){if(0!==(48&Oa))throw Error(s(327));if(Dc(),e===Ia&&0!==(e.expiredLanes&Da)){var t=Da,n=Cc(e,t);0!==(Ua&Ha)&&(n=Cc(e,t=jt(e,t)))}else n=Cc(e,t=jt(e,0));if(0!==e.tag&&2===n&&(Oa|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ht(e))&&(n=Cc(e,t))),1===n)throw n=Ma,Tc(e,0),mc(e,t),fc(e,Fi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Oc(e),fc(e,Fi()),null}function vc(e,t){var n=Oa;Oa|=1;try{return e(t)}finally{0===(Oa=n)&&(Ga(),Vi())}}function yc(e,t){var n=Oa;Oa&=-2,Oa|=8;try{return e(t)}finally{0===(Oa=n)&&(Ga(),Vi())}}function bc(e,t){ci(Na,Pa),Pa|=t,Ua|=t}function Sc(){Pa=Na.current,ai(Na)}function Tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Br(n)),null!==xa)for(n=xa.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mi();break;case 3:Do(),ai(di),ai(li),Wo();break;case 5:No(r);break;case 4:Do();break;case 13:case 19:ai(Lo);break;case 10:eo(r);break;case 23:case 24:Sc()}n=n.return}Ia=e,xa=Bc(e.current,null),Da=Pa=Ua=t,La=0,Ma=null,Fa=Ha=ja=0}function _c(e,t){for(;;){var n=xa;try{if(Zi(),Ko.current=Os,es){for(var r=Xo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}es=!1}if(Jo=0,Zo=Qo=Xo=null,ts=!1,Aa.current=null,null===n||null===n.return){La=1,Ma=t,xa=null;break}e:{var o=e,s=n.return,a=n,c=t;if(t=Da,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c;if(0===(2&a.mode)){var l=a.alternate;l?(a.updateQueue=l.updateQueue,a.memoizedState=l.memoizedState,a.lanes=l.lanes):(a.updateQueue=null,a.memoizedState=null)}var d=0!==(1&Lo.current),h=s;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=h.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(f){var g=h.updateQueue;if(null===g){var v=new Set;v.add(u),h.updateQueue=v}else g.add(u);if(0===(2&h.mode)){if(h.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=ao(-1,1);y.tag=2,co(a,y)}a.lanes|=1;break e}c=void 0,a=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new ca,c=new Set,b.set(u,c)):void 0===(c=b.get(u))&&(c=new Set,b.set(u,c)),!c.has(a)){c.add(a);var S=jc.bind(null,o,u,a);u.then(S,S)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);c=Error((W(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==La&&(La=2),c=sa(c,a),h=s;do{switch(h.tag){case 3:o=c,h.flags|=4096,t&=-t,h.lanes|=t,uo(h,ua(0,o,t));break e;case 1:o=c;var T=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof T.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Ya||!Ya.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,uo(h,la(h,o,t));break e}}h=h.return}while(null!==h)}Ac(n)}catch(E){t=E,xa===n&&null!==n&&(xa=n=n.return);continue}break}}function Ec(){var e=ka.current;return ka.current=Os,null===e?Os:e}function Cc(e,t){var n=Oa;Oa|=16;var r=Ec();for(Ia===e&&Da===t||Tc(e,t);;)try{wc();break}catch(i){_c(e,i)}if(Zi(),Oa=n,ka.current=r,null!==xa)throw Error(s(261));return Ia=null,Da=0,La}function wc(){for(;null!==xa;)kc(xa)}function Rc(){for(;null!==xa&&!wi();)kc(xa)}function kc(e){var t=Va(e.alternate,e,Pa);e.memoizedProps=e.pendingProps,null===t?Ac(e):xa=t,Aa.current=null}function Ac(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ia(n,t,Pa)))return void(xa=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Pa)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=oa(t)))return n.flags&=2047,void(xa=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(xa=t);xa=t=e}while(null!==t);0===La&&(La=5)}function Oc(e){var t=$i();return Bi(99,Ic.bind(null,e,t)),null}function Ic(e,t){do{Dc()}while(null!==Xa);if(0!==(48&Oa))throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,c=e.expirationTimes;0<o;){var u=31-Gt(o),l=1<<u;i[u]=0,a[u]=-1,c[u]=-1,o&=~l}if(null!==tc&&0===(24&r)&&tc.has(e)&&tc.delete(e),e===Ia&&(xa=Ia=null,Da=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Oa,Oa|=32,Aa.current=null,jr=Yt,pr(a=fr())){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(l=c.getSelection&&c.getSelection())&&0!==l.rangeCount){c=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{c.nodeType,u.nodeType}catch(R){c=null;break e}var d=0,h=-1,f=-1,p=0,m=0,g=a,v=null;t:for(;;){for(var y;g!==c||0!==o&&3!==g.nodeType||(h=d+o),g!==u||0!==l&&3!==g.nodeType||(f=d+l),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===a)break t;if(v===c&&++p===o&&(h=d),v===u&&++m===l&&(f=d),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}c=-1===h||-1===f?null:{start:h,end:f}}else c=null;c=c||{start:0,end:0}}else c=null;Hr={focusedElem:a,selectionRange:c},Yt=!1,ac=null,cc=!1,za=r;do{try{xc()}catch(R){if(null===za)throw Error(s(330));Uc(za,R),za=za.nextEffect}}while(null!==za);ac=null,za=r;do{try{for(a=e;null!==za;){var b=za.flags;if(16&b&&ye(za.stateNode,""),128&b){var S=za.alternate;if(null!==S){var T=S.ref;null!==T&&("function"===typeof T?T(null):T.current=null)}}switch(1038&b){case 2:ba(za),za.flags&=-3;break;case 6:ba(za),za.flags&=-3,Ea(za.alternate,za);break;case 1024:za.flags&=-1025;break;case 1028:za.flags&=-1025,Ea(za.alternate,za);break;case 4:Ea(za.alternate,za);break;case 8:_a(a,c=za);var _=c.alternate;va(c),null!==_&&va(_)}za=za.nextEffect}}catch(R){if(null===za)throw Error(s(330));Uc(za,R),za=za.nextEffect}}while(null!==za);if(T=Hr,S=fr(),b=T.focusedElem,a=T.selectionRange,S!==b&&b&&b.ownerDocument&&hr(b.ownerDocument.documentElement,b)){null!==a&&pr(b)&&(S=a.start,void 0===(T=a.end)&&(T=S),"selectionStart"in b?(b.selectionStart=S,b.selectionEnd=Math.min(T,b.value.length)):(T=(S=b.ownerDocument||document)&&S.defaultView||window).getSelection&&(T=T.getSelection(),c=b.textContent.length,_=Math.min(a.start,c),a=void 0===a.end?_:Math.min(a.end,c),!T.extend&&_>a&&(c=a,a=_,_=c),c=dr(b,_),o=dr(b,a),c&&o&&(1!==T.rangeCount||T.anchorNode!==c.node||T.anchorOffset!==c.offset||T.focusNode!==o.node||T.focusOffset!==o.offset)&&((S=S.createRange()).setStart(c.node,c.offset),T.removeAllRanges(),_>a?(T.addRange(S),T.extend(o.node,o.offset)):(S.setEnd(o.node,o.offset),T.addRange(S))))),S=[];for(T=b;T=T.parentNode;)1===T.nodeType&&S.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<S.length;b++)(T=S[b]).element.scrollLeft=T.left,T.element.scrollTop=T.top}Yt=!!jr,Hr=jr=null,e.current=n,za=r;do{try{for(b=e;null!==za;){var E=za.flags;if(36&E&&pa(b,za.alternate,za),128&E){S=void 0;var C=za.ref;if(null!==C){var w=za.stateNode;switch(za.tag){case 5:S=w;break;default:S=w}"function"===typeof C?C(S):C.current=S}}za=za.nextEffect}}catch(R){if(null===za)throw Error(s(330));Uc(za,R),za=za.nextEffect}}while(null!==za);za=null,Li(),Oa=i}else e.current=n;if(Ja)Ja=!1,Xa=e,Qa=t;else for(za=r;null!==za;)t=za.nextEffect,za.nextEffect=null,8&za.flags&&((E=za).sibling=null,E.stateNode=null),za=t;if(0===(r=e.pendingLanes)&&(Ya=null),1===r?e===rc?nc++:(nc=0,rc=e):nc=0,n=n.stateNode,Ti&&"function"===typeof Ti.onCommitFiberRoot)try{Ti.onCommitFiberRoot(Si,n,void 0,64===(64&n.current.flags))}catch(R){}if(fc(e,Fi()),Wa)throw Wa=!1,e=Ka,Ka=null,e;return 0!==(8&Oa)||Vi(),null}function xc(){for(;null!==za;){var e=za.alternate;cc||null===ac||(0!==(8&za.flags)?et(za,ac)&&(cc=!0):13===za.tag&&wa(e,za)&&et(za,ac)&&(cc=!0));var t=za.flags;0!==(256&t)&&fa(e,za),0===(512&t)||Ja||(Ja=!0,Gi(97,(function(){return Dc(),null}))),za=za.nextEffect}}function Dc(){if(90!==Qa){var e=97<Qa?97:Qa;return Qa=90,Bi(e,Lc)}return!1}function Pc(e,t){Za.push(t,e),Ja||(Ja=!0,Gi(97,(function(){return Dc(),null})))}function Nc(e,t){ec.push(t,e),Ja||(Ja=!0,Gi(97,(function(){return Dc(),null})))}function Lc(){if(null===Xa)return!1;var e=Xa;if(Xa=null,0!==(48&Oa))throw Error(s(331));var t=Oa;Oa|=32;var n=ec;ec=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(u){if(null===o)throw Error(s(330));Uc(o,u)}}for(n=Za,Za=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var c=i.create;i.destroy=c()}catch(u){if(null===o)throw Error(s(330));Uc(o,u)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Oa=t,Vi(),!0}function Mc(e,t,n){co(e,t=ua(0,t=sa(n,t),1)),t=uc(),null!==(e=hc(e,1))&&(Bt(e,1,t),fc(e,t))}function Uc(e,t){if(3===e.tag)Mc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Mc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ya||!Ya.has(r))){var i=la(n,e=sa(t,e),1);if(co(n,i),i=uc(),null!==(n=hc(n,1)))Bt(n,1,i),fc(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ya||!Ya.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=uc(),e.pingedLanes|=e.suspendedLanes&n,Ia===e&&(Da&n)===n&&(4===La||3===La&&(62914560&Da)===Da&&500>Fi()-qa?Tc(e,0):Fa|=n),fc(e,t)}function Hc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===$i()?1:2:(0===oc&&(oc=Ua),0===(t=$t(62914560&~oc))&&(t=4194304))),n=uc(),null!==(e=hc(e,t))&&(Bt(e,t,n),fc(e,n))}function Fc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function $c(e,t,n,r){return new Fc(e,t,n,r)}function qc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bc(e,t){var n=e.alternate;return null===n?((n=$c(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)qc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return Vc(n.children,i,o,t);case M:a=8,i|=16;break;case w:a=8,i|=1;break;case R:return(e=$c(12,n,t,8|i)).elementType=R,e.type=R,e.lanes=o,e;case I:return(e=$c(13,n,t,i)).type=I,e.elementType=I,e.lanes=o,e;case x:return(e=$c(19,n,t,i)).elementType=x,e.lanes=o,e;case U:return zc(n,i,o,t);case j:return(e=$c(24,n,t,i)).elementType=j,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case A:a=9;break e;case O:a=11;break e;case D:a=14;break e;case P:a=16,r=null;break e;case N:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=$c(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Vc(e,t,n,r){return(e=$c(7,e,r,t)).lanes=n,e}function zc(e,t,n,r){return(e=$c(23,e,r,t)).elementType=U,e.lanes=n,e}function Wc(e,t,n){return(e=$c(6,e,null,t)).lanes=n,e}function Kc(e,t,n){return(t=$c(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yc(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Xc(e,t,n,r){var i=t.current,o=uc(),a=lc(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(pi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(s(171))}if(1===n.tag){var u=n.type;if(pi(u)){n=vi(n,u,c);break e}}n=c}else n=ui;return null===t.context?t.context=n:t.pendingContext=n,(t=ao(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),co(i,t),dc(i,a,o),a}function Qc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Zc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eu(e,t){Zc(e,t),(e=e.alternate)&&Zc(e,t)}function tu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yc(e,t,null!=n&&!0===n.hydrate),t=$c(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,oo(t),e[Xr]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=Qc(s);a.call(e)}}Xc(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tu(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var c=i;i=function(){var e=Qc(s);c.call(e)}}yc((function(){Xc(t,s,e,i)}))}return Qc(s)}function iu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(s(200));return Jc(e,t,null,n)}Va=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||di.current)Ns=!0;else{if(0===(n&r)){switch(Ns=!1,t.tag){case 3:Gs(t),Vo();break;case 5:Po(t);break;case 1:pi(t.type)&&yi(t);break;case 4:xo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ci(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ys(e,t,n):(ci(Lo,1&Lo.current),null!==(t=na(e,t,n))?t.sibling:null);ci(Lo,1&Lo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ta(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ci(Lo,Lo.current),r)break;return null;case 23:case 24:return t.lanes=0,Hs(e,t,n)}return na(e,t,n)}Ns=0!==(16384&e.flags)}else Ns=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=fi(t,li.current),no(t,n),i=is(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,pi(r)){var o=!0;yi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&po(t,r,a,e),i.updater=mo,t.stateNode=i,i._reactInternals=t,bo(t,r,e,n),t=Bs(null,t,r,!0,o,n)}else t.tag=0,Ls(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return qc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===D)return 14}return 2}(i),e=Ki(i,e),o){case 0:t=$s(null,t,i,e,n);break e;case 1:t=qs(null,t,i,e,n);break e;case 11:t=Ms(null,t,i,e,n);break e;case 14:t=Us(null,t,i,Ki(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,$s(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,qs(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:if(Gs(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,so(e,t),lo(t,r,null,n),(r=t.memoizedState.element)===i)Vo(),t=na(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(jo=Vr(t.stateNode.containerInfo.firstChild),Uo=t,o=Ho=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],zo.push(o);for(n=wo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ls(e,t,r,n),Vo();t=t.child}return t;case 5:return Po(t),null===e&&qo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,$r(r,i)?a=null:null!==o&&$r(r,o)&&(t.flags|=16),Fs(e,t),Ls(e,t,a,n),t.child;case 6:return null===e&&qo(t),null;case 13:return Ys(e,t,n);case 4:return xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Co(t,null,r,n):Ls(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return Ls(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ls(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var c=t.type._context;if(ci(Yi,c._currentValue),c._currentValue=o,null!==a)if(c=a.value,0===(o=ar(c,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,o):1073741823))){if(a.children===i.children&&!di.current){t=na(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){a=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===c.tag&&((l=ao(-1,n&-n)).tag=2,co(c,l)),c.lanes|=n,null!==(l=c.alternate)&&(l.lanes|=n),to(c.return,n),u.lanes|=n;break}l=l.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}Ls(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.flags|=1,Ls(e,t,r,n),t.child;case 14:return o=Ki(i=t.type,t.pendingProps),Us(e,t,i,o=Ki(i.type,o),r,n);case 15:return js(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pi(r)?(e=!0,yi(t)):e=!1,no(t,n),vo(t,r,i),bo(t,r,i,n),Bs(null,t,r,!0,e,n);case 19:return ta(e,t,n);case 23:case 24:return Hs(e,t,n)}throw Error(s(156,t.tag))},tu.prototype.render=function(e){Xc(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Xc(null,e,null,(function(){t[Xr]=null}))},tt=function(e){13===e.tag&&(dc(e,4,uc()),eu(e,4))},nt=function(e){13===e.tag&&(dc(e,67108864,uc()),eu(e,67108864))},rt=function(e){if(13===e.tag){var t=uc(),n=lc(e);dc(e,n,t),eu(e,n)}},it=function(e,t){return t()},ke=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ni(r);if(!i)throw Error(s(90));X(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Pe=vc,Ne=function(e,t,n,r,i){var o=Oa;Oa|=4;try{return Bi(98,e.bind(null,t,n,r,i))}finally{0===(Oa=o)&&(Ga(),Vi())}},Le=function(){0===(49&Oa)&&(function(){if(null!==tc){var e=tc;tc=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,fc(e,Fi())}))}Vi()}(),Dc())},Me=function(e,t){var n=Oa;Oa|=2;try{return e(t)}finally{0===(Oa=n)&&(Ga(),Vi())}};var ou={Events:[ei,ti,ni,xe,De,Dc,{current:!1}]},su={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},au={bundleType:su.bundleType,version:su.version,rendererPackageName:su.rendererPackageName,rendererConfig:su.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:su.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{Si=cu.inject(au),Ti=cu}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=iu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Oa;if(0!==(48&n))return e(t);Oa|=1;try{if(e)return Bi(99,e.bind(null,t))}finally{Oa=n,Vi()}},t.hydrate=function(e,t,n){if(!nu(t))throw Error(s(200));return ru(null,e,t,!0,n)},t.render=function(e,t,n){if(!nu(t))throw Error(s(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(s(40));return!!e._reactRootContainer&&(yc((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[Xr]=null}))})),!0)},t.unstable_batchedUpdates=vc,t.unstable_createPortal=function(e,t){return iu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ru(e,t,n,!1,r)},t.version="17.0.1"},function(e,t,n){"use strict";e.exports=n(34)},function(e,t,n){"use strict";var r,i,o,s;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,d=null,h=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(h,0))},i=function(e,t){d=setTimeout(e,t)},o=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,v=null,y=-1,b=5,S=0;t.unstable_shouldYield=function(){return t.unstable_now()>=S},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var T=new MessageChannel,_=T.port2;T.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();S=e+b;try{v(!0,e)?_.postMessage(null):(g=!1,v=null)}catch(n){throw _.postMessage(null),n}}else g=!1},r=function(e){v=e,g||(g=!0,_.postMessage(null))},i=function(e,n){y=f((function(){e(t.unstable_now())}),n)},o=function(){p(y),y=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<R(i,t)))break e;e[r]=t,e[n]=i,n=r}}function C(e){return void 0===(e=e[0])?null:e}function w(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,c=e[a];if(void 0!==s&&0>R(s,n))void 0!==c&&0>R(c,s)?(e[r]=c,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==c&&0>R(c,n)))break e;e[r]=c,e[a]=n,r=a}}}return t}return null}function R(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var k=[],A=[],O=1,I=null,x=3,D=!1,P=!1,N=!1;function L(e){for(var t=C(A);null!==t;){if(null===t.callback)w(A);else{if(!(t.startTime<=e))break;w(A),t.sortIndex=t.expirationTime,E(k,t)}t=C(A)}}function M(e){if(N=!1,L(e),!P)if(null!==C(k))P=!0,r(U);else{var t=C(A);null!==t&&i(M,t.startTime-e)}}function U(e,n){P=!1,N&&(N=!1,o()),D=!0;var r=x;try{for(L(n),I=C(k);null!==I&&(!(I.expirationTime>n)||e&&!t.unstable_shouldYield());){var s=I.callback;if("function"===typeof s){I.callback=null,x=I.priorityLevel;var a=s(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?I.callback=a:I===C(k)&&w(k),L(n)}else w(k);I=C(k)}if(null!==I)var c=!0;else{var u=C(A);null!==u&&i(M,u.startTime-n),c=!1}return c}finally{I=null,x=r,D=!1}}var j=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||D||(P=!0,r(U))},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return C(k)},t.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var n=x;x=t;try{return e()}finally{x=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=j,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=x;x=e;try{return t()}finally{x=n}},t.unstable_scheduleCallback=function(e,n,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:O++,callback:n,priorityLevel:e,startTime:s,expirationTime:c=s+c,sortIndex:-1},s>a?(e.sortIndex=s,E(A,e),null===C(k)&&e===C(A)&&(N?o():N=!0,i(M,s-a))):(e.sortIndex=c,E(k,e),P||D||(P=!0,r(U))),e},t.unstable_wrapCallback=function(e){var t=x;return function(){var n=x;x=t;try{return e.apply(this,arguments)}finally{x=n}}}},,function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(0),i=n(1),o=n(6),s=n.n(o),a={blur:"onBlur",cancel:"onCancel",click:"onClick",close:"onClose",contextmenu:"onContextMenu",copy:"onCopy",cut:"onCut",auxclick:"onAuxClick",doubleclick:"onDoubleClick",dragend:"onDragEnd",dragstart:"onDragStart",drop:"onDrop",focus:"onFocus",input:"onInput",invalid:"onInvalid",keydown:"onKeyDown",keypress:"onKeyPress",keyup:"onKeyUp",mousedown:"onMouseDown",mouseup:"onMouseUp",paste:"onPaste",pause:"onPause",play:"onPlay",pointercancel:"onPointerCancel",pointerdown:"onPointerDown",pointerup:"onPointerUp",ratechange:"onRateChange",reset:"onReset",seeked:"onSeeked",submit:"onSubmit",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchstart:"onTouchStart",volumechange:"onVolumeChange",abort:"onAbort",animationend:"onAnimationEnd",animationiteration:"onAnimationIteration",animationstart:"onAnimationStart",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",drag:"onDrag",dragenter:"onDragEnter",dragexit:"onDragExit",dragleave:"onDragLeave",dragover:"onDragOver",durationchange:"onDurationChange",emptied:"onEmptied",encrypted:"onEncrypted",ended:"onEnded",error:"onError",gotpointercapture:"onGotPointerCapture",load:"onLoad",loadeddata:"onLoadedData",loadedmetadata:"onLoadedMetadata",loadstart:"onLoadStart",lostpointercapture:"onLostPointerCapture",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseover:"onMouseOver",playing:"onPlaying",pointermove:"onPointerMove",pointerout:"onPointerOut",pointerover:"onPointerOver",progress:"onProgress",scroll:"onScroll",seeking:"onSeeking",stalled:"onStalled",suspend:"onSuspend",timeupdate:"onTimeUpdate",toggle:"onToggle",touchmove:"onTouchMove",transitionend:"onTransitionEnd",waiting:"onWaiting",wheel:"onWheel",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",change:"onChange",select:"onSelect",beforeinput:"onBeforeInput",compositionend:"onCompositionEnd",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate"},c=n(17),u=n(4),l=function(e){return a[e]||e},d=function(){function e(e){this._classes=new Set,this._events={},this._style={},this._props={},this._ref=null,this._onChange=null,this._onChange=e,this.onChange=this.onChange.bind(this),this.addClass=this.addClass.bind(this),this.removeClass=this.removeClass.bind(this),this.hasClass=this.hasClass.bind(this),this.setProp=this.setProp.bind(this),this.getProp=this.getProp.bind(this),this.removeProp=this.removeProp.bind(this),this.setStyle=this.setStyle.bind(this),this.addEventListener=this.addEventListener.bind(this),this.removeEventListener=this.removeEventListener.bind(this),this.setRef=this.setRef.bind(this)}return e.prototype.onChange=function(){this._onChange&&this._onChange()},e.prototype.destroy=function(){var e=this;this._onChange=null,this._events={},this._style={},this._props={},this._classes=new Set,setTimeout((function(){e._ref=null}))},e.prototype.addClass=function(e){this._classes.has(e)||(this._classes.add(e),this.onChange())},e.prototype.removeClass=function(e){this._classes.has(e)&&(this._classes.delete(e),this.onChange())},e.prototype.hasClass=function(e){return this._classes.has(e)},e.prototype.setProp=function(e,t,n){void 0===n&&(n=!1),this._props[e]!==t&&(this._props[e]=t,!n&&this.onChange())},e.prototype.getProp=function(e){return this._props[e]},e.prototype.removeProp=function(e){void 0!==this._props[e]&&(delete this._props[e],this.onChange())},e.prototype.props=function(e){var t=this,n=e.className,i=void 0===n?"":n,o=e.style,a=void 0===o?{}:o,c=Object.entries(e).reduce((function(e,n){var i=Object(r.c)(n,2),o=i[0],s=i[1],a=t._events[o];if("function"===typeof s&&"function"===typeof a){e[o]=function(e){return a(e),s(e)}}return e}),Object(r.a)({},this._events)),u=s()(i,Object(r.e)(this._classes)),l=Object(r.a)(Object(r.a)({},this._style),a);return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},e),this._props),c),{style:l,className:u})},e.prototype.setStyle=function(e,t){e=e.startsWith("--")?e:Object(c.a)(e),this._style[e]!==t&&(this._style[e]=t,this.onChange())},e.prototype.addEventListener=function(e,t){var n=l(e);this._events[n]!==t&&(this._events[n]=t,this.onChange())},e.prototype.removeEventListener=function(e,t){var n=l(e);this._events[n]&&(delete this._events[n],this.onChange())},e.prototype.setRef=function(e){e&&(this._ref=e)},Object.defineProperty(e.prototype,"ref",{get:function(){return this._ref},enumerable:!1,configurable:!0}),e}(),h=function(e){return function(t,n,r){var i;void 0===r&&(r=!1),i=new CustomEvent(t,{detail:n,bubbles:r}),Object.defineProperty(i,"target",{value:n,writable:!1}),Object.defineProperty(i,"currentTarget",{value:n,writable:!1});var o=t;return e[o]&&e[o](i),i}},f=function(e){var t=e.foundation,n=e.props,o=e.elements,s=e.api,a=Object(r.c)(Object(i.useState)(0),2)[1],c=Object(i.useRef)(n);c.current=n;var l=Object(i.useMemo)((function(){return Object.keys(o).reduce((function(e,t){return e[t]=new d((function(){a((function(e){return e+1}))})),e}),{})}),[]),f=Object(i.useMemo)((function(){var e=t(Object(r.a)(Object(r.a)({},l),{getProps:function(){return c.current},emit:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return h(c.current).apply(void 0,Object(r.e)(e))}}));return s&&Object(u.d)(c.current.apiRef,s(Object(r.a)({foundation:e},l))),e}),[]);return Object(i.useEffect)((function(){var e=f;return e.init(),s&&Object(u.d)(c.current.apiRef,s(Object(r.a)({foundation:e},l))),Object(u.d)(c.current.foundationRef,e),function(){e.destroy(),Object(u.d)(c.current.apiRef,null),Object(u.d)(c.current.foundationRef,null),Object.values(l).map((function(e){return e.destroy()})),c.current={}}}),[f,l]),Object(r.a)({foundation:f},l)}}]]);
//# sourceMappingURL=2.1deed716.chunk.js.map